module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=86)}([function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(82),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){var r=n(9),o=n(181),i=n(180),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:a:u&&u in Object(t)?o(t):i(t)}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var r=n(78),o=n(158),i=n(7);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(183),o=n(177);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e,n){var r=n(83),o=n(34);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(2).Symbol;t.exports=r},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){var r=n(13),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){var r=n(3),o=n(0),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(147),o=n(39),i=n(146),a=n(67),s=n(145),u=n(3),c=n(81),p=c(r),l=c(o),f=c(i),h=c(a),d=c(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=g(new o)||i&&"[object Promise]"!=g(i.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case p:return"[object DataView]";case l:return"[object Map]";case f:return"[object Promise]";case h:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){(function(t){var r=n(82),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(35)(t))},function(t,e,n){var r=n(80),o=n(37);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],p=i?i(n[c],t[c],c,n,t):void 0;void 0===p&&(p=t[c]),a?o(n,c,p):r(n,c,p)}return n}},function(t,e,n){var r=n(168);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(6)(Object,"create");t.exports=r},function(t,e,n){var r=n(40);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(193),o=n(192),i=n(191),a=n(190),s=n(189);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){return function t(e,n,r){var o,i,a=window,s="application/octet-stream",u=r||s,c=e,p=!n&&!r&&c,l=document.createElement("a"),f=function(t){return String(t)},h=a.Blob||a.MozBlob||a.WebKitBlob||f,d=n||"download";if(h=h.call?h.bind(a):Blob,"true"===String(this)&&(u=(c=[c,u])[0],c=c[1]),p&&p.length<2048&&(d=p.split("/").pop().split("?")[0],l.href=p,-1!==l.href.indexOf(p))){var g=new XMLHttpRequest;return g.open("GET",p,!0),g.responseType="blob",g.onload=function(e){t(e.target.response,d,s)},setTimeout(function(){g.send()},0),g}if(/^data\:[\w+\-]+\/[\w+\-]+[,;]/.test(c)){if(!(c.length>2096103.424&&h!==f))return navigator.msSaveBlob?navigator.msSaveBlob(y(c),d):v(c);c=y(c),u=c.type||s}function y(t){for(var e=t.split(/[:;,]/),n=e[1],r="base64"==e[2]?atob:decodeURIComponent,o=r(e.pop()),i=o.length,a=0,s=new Uint8Array(i);a<i;++a)s[a]=o.charCodeAt(a);return new h([s],{type:n})}function v(t,e){if("download"in l)return l.href=t,l.setAttribute("download",d),l.className="download-js-link",l.innerHTML="downloading...",l.style.display="none",document.body.appendChild(l),setTimeout(function(){l.click(),document.body.removeChild(l),!0===e&&setTimeout(function(){a.URL.revokeObjectURL(l.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return t=t.replace(/^data:([\w\/\-\+]+)/,s),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),e||(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,s)),n.src=t,setTimeout(function(){document.body.removeChild(n)},333)}if(o=c instanceof h?c:new h([c],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(o,d);if(a.URL)v(a.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===f)try{return v("data:"+u+";base64,"+a.btoa(o))}catch(t){return v("data:"+u+","+encodeURIComponent(o))}(i=new FileReader).onload=function(t){v(this.result)},i.readAsDataURL(o)}return!0}})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){var r=n(1),o=n(13),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||a.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(110),o=n(102),i=n(24),a=n(1),s=n(92);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?o(t[0],t[1]):r(t):s(t)}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(38),o=n(127),i=n(126);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e,n){var r=n(128),o=n(5);t.exports=function(t){return null==t?[]:r(t,o(t))}},function(t,e,n){var r=n(3),o=n(1),i=n(0),a="[object String]";t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&r(t)==a}},function(t,e,n){var r=n(66);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(74)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(150),o=n(72),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return i.call(t,e)}))}:o;t.exports=s},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(t){var r=n(2),o=n(160),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;t.exports=u}).call(this,n(35)(t))},function(t,e,n){var r=n(79);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(176),o=n(169),i=n(167),a=n(166),s=n(165);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(6)(n(2),"Map");t.exports=r},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(20),o=n(188),i=n(187),a=n(186),s=n(185),u=n(184);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjQ4MS45NXB4IiBoZWlnaHQ9IjQ4MS45NXB4IiB2aWV3Qm94PSIwIDAgNDgxLjk1IDQ4MS45NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDgxLjk1IDQ4MS45NTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9InJvdGF0ZS1sZWZ0Ij4NCgkJPHBhdGggZmlsbD0iZGVlcFNreUJsdWUiIGQ9Ik0xMTQuNzUsMTkxLjI1bC0zNS43LTM1LjdDNTYuMSwxODYuMTUsNDAuOCwyMTkuMywzOC4yNSwyNTVoNTFDOTEuOCwyMzIuMDUsMTAyLDIxMS42NSwxMTQuNzUsMTkxLjI1eiBNODkuMjUsMzA2aC01MQ0KCQkJYzUuMSwzNS43LDE3Ljg1LDY4Ljg1LDQwLjgsOTkuNDVsMzUuNy0zNS43QzEwMiwzNDkuMzUsOTEuOCwzMjguOTUsODkuMjUsMzA2eiBNMTE0Ljc1LDQ0MS4xNQ0KCQkJYzMwLjYsMjIuOTQ5LDYzLjc1LDM1LjY5OSw5OS40NSw0MC44di01MWMtMjIuOTUtMi41NS00My4zNS0xMi43NS02My43NS0yNS41TDExNC43NSw0NDEuMTV6IE0yNjUuMiw3OS4wNVYwTDE1MC40NSwxMTQuNzUNCgkJCUwyNjUuMiwyMjkuNXYtOTkuNDVjNzEuNCwxMi43NSwxMjcuNSw3My45NSwxMjcuNSwxNTAuNDVzLTU2LjEsMTM3LjctMTI3LjUsMTUwLjQ1djUxYzk5LjQ1LTEyLjc1LDE3OC41LTk5LjQ1LDE3OC41LTIwMS40NQ0KCQkJUzM2NC42NSw5MS44LDI2NS4yLDc5LjA1eiIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K"},function(t,e,n){var r=n(88)(n(87));t.exports=r},function(t,e,n){var r=n(89),o=n(8),i=n(15),a=i&&i.isDate,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(3),o=n(0),i="[object Boolean]";t.exports=function(t){return!0===t||!1===t||o(t)&&r(t)==i}},function(t,e,n){var r=n(3),o=n(0),i="[object Number]";t.exports=function(t){return"number"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(3),o=n(31),i=n(0),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,p=u.hasOwnProperty,l=c.call(Object);t.exports=function(t){if(!i(t)||r(t)!=a)return!1;var e=o(t);if(null===e)return!0;var n=p.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==l}},function(t,e,n){var r=n(1),o=n(22),i=n(100),a=n(97);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e,n){var r=n(49),o=n(11);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(4);t.exports=function(t){return t==t&&!r(t)}},function(t,e,n){var r=n(27),o=n(107),i=n(26),a=1,s=2;t.exports=function(t,e,n,u,c,p){var l=n&a,f=t.length,h=e.length;if(f!=h&&!(l&&h>f))return!1;var d=p.get(t);if(d&&p.get(e))return d==e;var g=-1,y=!0,v=n&s?new r:void 0;for(p.set(t,e),p.set(e,t);++g<f;){var b=t[g],m=e[g];if(u)var _=l?u(m,b,g,e,t,p):u(b,m,g,t,e,p);if(void 0!==_){if(_)continue;y=!1;break}if(v){if(!o(e,function(t,e){if(!i(v,e)&&(b===t||c(b,t,n,u,p)))return v.push(e)})){y=!1;break}}else if(b!==m&&!c(b,m,n,u,p)){y=!1;break}}return p.delete(t),p.delete(e),y}},function(t,e,n){var r=n(108),o=n(0);t.exports=function t(e,n,i,a,s){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,s))}},function(t,e,n){var r=n(37),o=n(113),i=n(23);t.exports=function(t,e){var n={};return e=i(e,3),o(t,function(t,o,i){r(n,o,e(t,o,i))}),n}},function(t,e,n){var r=n(12),o=n(123),i=n(122),a=n(115),s=i(function(t){var e=r(t,a);return e.length&&e[0]===t[0]?o(e):[]});t.exports=s},function(t,e,n){var r=n(60);t.exports=function(t,e){return e="function"==typeof e?e:void 0,t&&t.length?r(t,void 0,e):[]}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(64);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(27),o=n(59),i=n(58),a=n(26),s=n(125),u=n(25),c=200;t.exports=function(t,e,n){var p=-1,l=o,f=t.length,h=!0,d=[],g=d;if(n)h=!1,l=i;else if(f>=c){var y=e?null:s(t);if(y)return u(y);h=!1,l=a,g=new r}else g=e?[]:d;t:for(;++p<f;){var v=t[p],b=e?e(v):v;if(v=n||0!==v?v:0,h&&b==b){for(var m=g.length;m--;)if(g[m]===b)continue t;e&&g.push(b),d.push(v)}else l(g,b,n)||(g!==d&&g.push(b),d.push(v))}return d}},function(t,e,n){var r=n(60);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r=n(130);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,n){var r=n(63),o=n(132),i=n(131);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e,n){var r=n(64),o=n(7),i=n(29),a=n(62),s=n(28),u=Math.max;t.exports=function(t,e,n,c){t=o(t)?t:s(t),n=n&&!c?a(n):0;var p=t.length;return n<0&&(n=u(p+n,0)),i(t)?n<=p&&t.indexOf(e,n)>-1:!!p&&r(t,e,n)>-1}},function(t,e,n){var r=n(2).Uint8Array;t.exports=r},function(t,e,n){var r=n(6)(n(2),"Set");t.exports=r},function(t,e,n){var r=n(70),o=n(1);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(68),o=n(32),i=n(5);t.exports=function(t){return r(t,i,o)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(70),o=n(31),i=n(32),a=n(72),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=s},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(78),o=n(155),i=n(7);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(159),o=n(8),i=n(15),a=i&&i.isTypedArray,s=a?o(a):r;t.exports=s},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(161),o=n(0),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(162),o=n(77),i=n(1),a=n(36),s=n(76),u=n(75),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),p=!n&&o(t),l=!n&&!p&&a(t),f=!n&&!p&&!l&&u(t),h=n||p||l||f,d=h?r(t.length,String):[],g=d.length;for(var y in t)!e&&!c.call(t,y)||h&&("length"==y||l&&("offset"==y||"parent"==y)||f&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,g))||d.push(y);return d}},function(t,e,n){var r=n(6),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(37),o=n(40),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(182))},function(t,e,n){var r=n(3),o=n(4),i="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==a||e==s||e==i||e==u}},function(t,e,n){var r=n(194),o=1,i=4;t.exports=function(t){return r(t,o|i)}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){"use strict";n.r(e);var r,o="Page1",i=Math.PI/180,a=180/Math.PI,s=50;!function(t){t.HANDLE_IN="HANDLE_IN",t.HANDLE_OUT="HANDLE_OUT"}(r||(r={}));var u=function(t){var e,n;for(void 0===t&&(t=""),e="",n=0;n<32;n++)8!=n&&12!=n&&16!=n&&20!=n||(e+="-"),e+=Math.floor(16*Math.random()).toString(16).toUpperCase();return t+"-"+e+"-"+(new Date).getTime()};function c(t){var e=t.x,n=t.y,r=Math.atan(Math.abs(n/e));return 0===e&&0===n?0:e>=0&&n>=0?r+Math.PI/2:e<0&&n>=0?Math.PI-r+Math.PI/2:e<0&&n<0?Math.PI+r+Math.PI/2:e>=0&&n<0?-r+Math.PI/2:void 0}var p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t};function l(t){return p({},t)}var f,h=function(t,e,n){if(void 0===n&&(n={x:0,y:0}),0===e)return t;var r=l(t),o=e*Math.PI/180,i=r.x-n.x,a=r.y-n.y;return r={x:i*Math.cos(o)-a*Math.sin(o)+n.x,y:i*Math.sin(o)+a*Math.cos(o)+n.y}},d=(window.console.log,n(10)),g=n.n(d),y=function(t){return!g()(t)},v=function(){return function(){this.rootId="",this.activePanelId=null,this.syncStore={rootId:"",elements:[]},this.panels=[{id:u(),name:o,elements:[]}],this.setting={},this.cellList=[],this.draw=null,this.canvas=null,this.tmpCanvas=null,this.viewPort=null,this.renderer=null,this.selector=null,this.interaction=null,this.miniMap=null,this.grid=null,this.testUtils=null,this.textInput=null}}(),b=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(t){function e(e){var n=t.call(this)||this;return n.formatter=null,n.ds=e,n}return b(e,t),e}(v),_="operation",P="horizontal",O="polygon",E="rect",S="line",T="polyline",w="point",L="circle",x="text",C="mini-map",D="minimap-view-box",A="rotation-arrow",j="size-point",I=[A,j,C,D],N=[A,j,C,D],R=n(85),M=n.n(R),k=n(42),U=n.n(k),B=n(1),H=n.n(B),z=(n(4),n(84)),F=n.n(z),W=n(65),G=n.n(W),V=n(61),Y=n.n(V),K=n(57),X=n.n(K),Z=n(56),Q=n.n(Z),J=n(55),q=n.n(J),$=n(28),tt=n.n($),et=n(48),nt=n.n(et),rt=n(47),ot=n.n(rt),it=n(46),at=n.n(it),st=n(29),ut=n.n(st),ct=n(45),pt=n.n(ct),lt=n(44),ft=n.n(lt),ht=function(t){return!g()(t)},dt=function(t){return!U()(t)},gt=function(){function t(t){this.drawStore=t}return Object.defineProperty(t.prototype,"draw",{get:function(){return this.drawStore.draw},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeActivePanelId",{get:function(){return g()(this.drawStore.activePanelId)?this.drawStore.panels.length>0?this.drawStore.panels[0].id:null:this.drawStore.activePanelId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeElementsIds",{get:function(){var t=[];if(g()(this.drawStore)||g()(this.drawStore.panels))return[];return this.drawStore.panels.map(function(e){t=t.concat(e.elements)}),t.map(function(t){return t.id})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeActiveElements",{get:function(){return this.getStoreElementsByPanelId(this.storeActivePanelId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storePanels",{get:function(){return this.drawStore.panels},enumerable:!0,configurable:!0}),t.prototype.generateUniqueDrawRootId=function(){return u("draw")},t.prototype.generateUniqueDrawElementId=function(){var t=this,e=u("draw-el");return e=function e(n){return G()(t.storeElementsIds,n)?e(u()):n}(e)},Object.defineProperty(t.prototype,"cellList",{get:function(){return this.drawStore.cellList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellListShouldRender",{get:function(){return this.miniMap.renderingMainCells?this.cellList.filter(t).filter(function(t){return t.shouldRenderInMiniMap}):this.cellList.filter(t);function t(t){var e=t.type;return!G()(N,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellsShouldSelect",{get:function(){return this.cellList.filter(function(t){return!0===t.shouldSelect})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellsShouldDrag",{get:function(){return this.cellList.filter(function(t){return!0===t.dragger.enable})},enumerable:!0,configurable:!0}),t.prototype.getTopCell=function(t){var e,n=t.x,r=t.y;return this.cellList.map(function(t){!t.isPart&&t.contain(n,r)&&(e=t)}),e},Object.defineProperty(t.prototype,"canvas",{get:function(){return this.drawStore.canvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasLeft",{get:function(){return this.canvas.getBoundingClientRect().left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasRight",{get:function(){return this.canvas.getBoundingClientRect().right},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasTop",{get:function(){return this.canvas.getBoundingClientRect().top},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasBottom",{get:function(){return this.canvas.getBoundingClientRect().bottom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasWidth",{get:function(){return this.canvas.getBoundingClientRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasHeight",{get:function(){return this.canvas.getBoundingClientRect().height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasCenterPoint",{get:function(){return{x:this.canvas.width/2,y:this.canvas.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tmpCanvas",{get:function(){return this.drawStore.tmpCanvas},enumerable:!0,configurable:!0}),t.prototype.pointOnPath=function(t,e){this.renderer.resetTransform();var n=t.x,r=t.y,o=this.ctx.isPointInPath(e,n,r);return this.renderer.setTransformViewPort(),o},t.prototype.getPoint=function(t){return{x:t.x-this.canvasLeft,y:t.y-this.canvasTop}},t.prototype.getInitialPoint=function(t){var e=this.getPoint(t);return this.viewPort.transformToInitial(e)},Object.defineProperty(t.prototype,"viewPort",{get:function(){return this.drawStore.viewPort},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoom",{get:function(){return this.viewPort.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pan",{get:function(){return this.viewPort.pan},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panX",{get:function(){return this.viewPort.pan.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panY",{get:function(){return this.viewPort.pan.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movementX",{get:function(){return this.viewPort.movementX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movementY",{get:function(){return this.viewPort.movementY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this.drawStore.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selector",{get:function(){return this.drawStore.selector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCells",{get:function(){return this.cellList.filter(function(t){return!0===t.shouldSelect})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellsInSelectorRigion",{get:function(){var t=this;return this.cellList.filter(function(t){var e=t.type;return!G()(I,e)}).filter(function(t){return!t.isPart}).filter(function(e){var n=e.bounds;return t.selector.boundsInSelectionArea(n)})},enumerable:!0,configurable:!0}),t.prototype.pointOnSelectionExcludingCells=function(t){var e=!1,n=this.getTopCell(t);return y(n)&&(e=G()(I,n.type)),e},t.prototype.pointOnCellSelected=function(t){var e=!1,n=this.getTopCell(t);y(n)&&(e=!0===n.shouldSelect);return e},t.prototype.pointOnCellDeselected=function(t){var e=!1,n=this.getTopCell(t);y(n)&&(e=!1===n.shouldSelect);return e},Object.defineProperty(t.prototype,"clonedStoreWithoutCircularObjects",{get:function(){var t=F()(this.drawStore);return delete t.cellList,t.panels.map(function(e,n){e.elements.map(function(e){return function(n,r){delete t.panels[e].elements[r].__instance__}}(n))}),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"__storeActiveElementsInstances__",{get:function(){return this.storeActiveElements.map(function(t){return t.__instance__})},enumerable:!0,configurable:!0}),t.prototype.getStoreElementsByPanelId=function(t){var e=ft()(this.drawStore.panels,{id:t});return g()(e)?[]:e.elements},t.prototype.pointOnEmpty=function(t){var e=this.getTopCell(t);return g()(e)},t.prototype.setCtx=function(t){this.ctx=t},t.prototype.setTmpCtx=function(t){this.tmpCtx=t},Object.defineProperty(t.prototype,"interaction",{get:function(){return this.drawStore.interaction},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventKeyboard",{get:function(){return this.interaction.eventKeyboard},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"miniMap",{get:function(){return this.drawStore.miniMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this.drawStore.grid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"testUtils",{get:function(){return this.drawStore.testUtils},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textInput",{get:function(){return this.drawStore.textInput},enumerable:!0,configurable:!0}),t}();function yt(t,e){var n=t.bounds;return e.boundsInSelectionArea(n)}var vt="data-node",bt="result-node",mt="operation-link",_t="result-link",Pt="flow",Ot="flow",Et=((f={})[P]=P,f.vertical="vertical",f);function St(t){return Tt(t)||H()(t)&&t.every(Tt)||nt()(t)&&tt()(t).every(Tt)}function Tt(t){return ut()(t)||ot()(t)||at()(t)||M()(t)}var wt="#293240",Lt="#526375",xt="#105456",Ct="rgba(2,213,198,0.50)",Dt="#526375",At=function(){function t(t){this.id=null;var e=t.draw;this.draw=e,this.id=this.getters.generateUniqueDrawElementId()}return Object.defineProperty(t.prototype,"drawStore",{get:function(){return this.draw.drawStore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getters",{get:function(){return this.draw.getters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actions",{get:function(){return this.draw.actions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedGetters",{get:function(){return this.draw.sharedGetters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharedActions",{get:function(){return this.draw.sharedActions},enumerable:!0,configurable:!0}),t.prototype.remove=function(){this.actions.REMOVE_ELEMENT(this)},t}();function jt(t){return 0===t}var It=function(t){return!jt(t)};function Nt(t,e){return t===e.length-1}var Rt=function(t){return 0===t.length},Mt=function(t){return!Rt(t)};var kt=function(t,e){return!function(t,e){return jt(e)}(0,e)};var Ut=function(t,e,n){return!function(t,e,n){return Nt(e,n)}(0,e,n)};function Bt(t,e){for(var n=0;n<t.length;n++){if(t[n]===e)return n}return null}function Ht(t){return t[0]}function zt(t){return t[t.length-1]}function Ft(t,e){return t[e-1]}function Wt(t,e){var n=Bt(t,e);ht(n)&&t.splice(n,1)}var Gt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(t){function e(e){var n=t.call(this,e)||this;return n.interfaceStartDragList=[],n.interfaceBeforeDraggingList=[],n.interfaceDraggingList=[],n.interfaceAfterDraggingList=[],n.interfaceStopDragList=[],n.updateList=[],n.target=e.target,n}return Gt(e,t),Object.defineProperty(e.prototype,"prevPoint",{get:function(){return this.getters.getInitialPoint(this.prevEvent)},enumerable:!0,configurable:!0}),e.prototype.getDeltaPointToPrevPoint=function(t){var e=t.x,n=t.y,r=this.prevPoint;return{x:e-r.x,y:n-r.y}},e.prototype.getDeltaXToPrevPoint=function(t){return this.getDeltaPointToPrevPoint(t).x},e.prototype.getDeltaYToPrevPoint=function(t){return this.getDeltaPointToPrevPoint(t).y},Object.defineProperty(e.prototype,"startPoint",{get:function(){return this.getters.getInitialPoint(this.startEvent)},enumerable:!0,configurable:!0}),e.prototype.getDeltaPointToStartPoint=function(t){var e=t.x,n=t.y,r=this.startPoint;return{x:e-r.x,y:n-r.y}},e.prototype.getDeltaXToStartPoint=function(t){return this.getDeltaPointToStartPoint(t).x},e.prototype.getDeltaYToStartPoint=function(t){return this.getDeltaPointToStartPoint(t).y},e.prototype.updatePrevEvent=function(t){this.prevEvent=t},e.prototype.updateStartEvent=function(t){this.startEvent=t},e.prototype.update=function(t){},e.prototype.start=function(t){this.getters.getInitialPoint(t);this.enable=!0,this.updatePrevEvent(t),this.updateStartEvent(t),this._applyInterfaceFn(this.interfaceStartDrag,this.interfaceStartDragList,t),this.handleStart&&this.handleStart(t,this)},e.prototype.dragging=function(t){this.handleBeforeDragging&&this.handleBeforeDragging(t,this),this._applyInterfaceFn(this.interfaceBeforeDragging,this.interfaceBeforeDraggingList,t);this.getters.getInitialPoint(t);this._applyInterfaceFn(this.update,this.updateList,t),this._applyInterfaceFn(this.interfaceDragging,this.interfaceDraggingList,t),this.handleDragging&&this.handleDragging(t,this),this.updatePrevEvent(t),this.handleAfterDragging&&this.handleAfterDragging(t,this),this._applyInterfaceFn(this.interfaceAfterDragging,this.interfaceAfterDraggingList,t)},e.prototype.stop=function(t){this.enable=!1,this._applyInterfaceFn(this.interfaceStopDrag,this.interfaceStopDragList,t),this.handleStop&&this.handleStop(t,this)},e.prototype.handleStart=function(t,e){},e.prototype.handleBeforeDragging=function(t,e){},e.prototype.handleDragging=function(t,e){},e.prototype.handleAfterDragging=function(t,e){},e.prototype.handleStop=function(t,e){},e.prototype._applyInterfaceFn=function(t,e,n){var r=this,o=Rt(e);o&&t&&t(n,this),!o&&e.map(function(t){return t(n,r)})},e}(At),Yt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kt=Math.abs,Xt=function(t){function e(e){var n=t.call(this,e)||this;n._isInstance=!0,n.angle=0,n.prevAngle=0,n.show=!0,n.fillColor="#000",n.strokeColor="#000",n.strokeWidth=1,n.isPart=!1,n.kX=1,n.kY=1,n.prevKX=1,n.prevKY=1,n.shouldSelect=!1,n.draggable=!0,n.shouldRotate=!1,n.isSizing=!1,n.isVisiableInMiniMap=!0,n.fill="black",n.shouldRenderInMiniMap=!0,n.renderFnInMiniMap=null,n.addedToBottom=!1;var r=n.getters.miniMap;return n.id=ht(e.id)?e.id:n.id,n.fillColor=ht(e.fillColor)?e.fillColor:n.fillColor,n.strokeColor=ht(e.strokeColor)?e.strokeColor:n.strokeColor,n.strokeWidth=ht(e.strokeWidth)?e.strokeWidth:n.strokeWidth,n.show=ht(e.show)?e.show:n.show,n.draggable=ht(e.draggable)?e.draggable:n.draggable,n.isPart=ht(e.isPart)?e.isPart:n.isPart,n.addedToBottom=ht(e.addedToBottom)?e.addedToBottom:n.addedToBottom,n.dragger=new Vt({draw:n.draw,target:n}),n.dragger.update=n.updateDrag.bind(n),n.dragger.handleStart=n.handleStartDrag.bind(n),n.dragger.handleBeforeDragging=n.handleBeforeDragging.bind(n),n.dragger.handleDragging=n.handleDragging.bind(n),n.dragger.handleAfterDragging=n.handleAfterDragging.bind(n),n.dragger.handleStop=n.handleStopDrag.bind(n),n.actions.ADD_ELEMENT_TO_CELL_LIST(n),r&&r.preventDefaultCellsRenderInMiniMap&&(n.shouldRenderInMiniMap=!1),n.shouldRenderInMiniMap=ht(e.shouldRenderInMiniMap)?e.shouldRenderInMiniMap:n.shouldRenderInMiniMap,n}return Yt(e,t),Object.defineProperty(e.prototype,"radian",{get:function(){return this.angle*i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaAngle",{get:function(){return this.angle-this.prevAngle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaRadian",{get:function(){return this.deltaAngle*i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitKX",{get:function(){var t=this.kX;return 0===t?0:t/Kt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitKY",{get:function(){var t=this.kY;return 0===t?0:t/Kt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return{left:0,right:0,top:0,bottom:0}},enumerable:!0,configurable:!0}),e.prototype.render=function(){},e.prototype.updateDrag=function(t,e){},e.prototype.handleStartDrag=function(t,e){},e.prototype.handleBeforeDragging=function(t,e){},e.prototype.handleDragging=function(t,e){},e.prototype.handleAfterDragging=function(t,e){},e.prototype.handleStopDrag=function(t){},e.prototype.handleClick=function(t){},e.prototype.handleDoubleClick=function(t){},e.prototype.handleMouseIn=function(t){},e.prototype.handleMouseMove=function(t){},e.prototype.handleMouseOut=function(t){},e.prototype.rotate=function(t){this.prevAngle=this.angle,this.angle=t},e.prototype.size=function(t,e,n){this.prevKX=this.kX,this.kX=t,this.prevKY=this.kY,this.kY=e},e.prototype.select=function(){this.shouldSelect=!0},e.prototype.deselect=function(){this.shouldSelect=!1},e}(At),Zt=function(t){var e=t.left,n=t.top,r=t.right,o=t.bottom,i=t.width,a=t.height;return{leftTop:{x:e,y:n},rightTop:{x:r=y(r)?r:e+i,y:n},rightBottom:{x:r,y:o=y(o)?o:n+a},leftBottom:{x:e,y:o},topCenter:{x:(e+r)/2,y:n},rightCenter:{x:r,y:(n+o)/2},bottomCenter:{x:(e+r)/2,y:o},leftCenter:{x:e,y:(n+o)/2}}},Qt=function(t,e){return void 0===e&&(e=new Path2D),t.map(function(t,n,r){var o=r.length;0===n&&e.moveTo(t.x,t.y);0!==n&&e.lineTo(t.x,t.y);if(n===o-1){var i=r[0];e.lineTo(i.x,i.y)}}),e},Jt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qt=function(t){function e(e){var n=t.call(this,e)||this;return n.left=0,n.top=0,n.width=null,n.height=null,n.image=new Image,n.src="",n.strokeColor=null,n.src=ht(e.src)?e.src:n.src,n.strokeColor=ht(e.strokeColor)?e.strokeColor:n.strokeColor,n.image.src=n.src,n.image.onload=function(){var t=e.width,r=e.height,o=n.image,i=o.width,a=o.height;if(ht(t)&&ht(r)&&(n.updateWidth(t),n.updateHeight(r)),ht(t)&&g()(r)){n.updateWidth(t);var s=a/i*t;n.updateHeight(s)}if(ht(r)&&g()(t)){n.updateHeight(r);var u=i/a*r;n.updateWidth(u)}g()(t)&&g()(r)&&(n.updateWidth(i),n.updateHeight(a));var c=n,p=c.width,l=c.height,f=e.x,h=e.y,d=e.left,y=e.top;ht(f)&&ht(h)?(n.left=f-p/2,n.top=h-l/2):(n.left=ht(d)?d:n.left,n.top=ht(y)?y:n.top),n.render(),n.interfaceOnImageLoaded&&n.interfaceOnImageLoaded()},n}return Jt(e,t),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.left,e=this.top,n=this.width,r=this.height,o=Zt({left:t,top:e,width:n,height:r}),i=o.leftTop,a=o.rightTop,s=o.rightBottom,u=o.leftBottom;return Qt([i,a,s,u])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.left,e=this.top;return{left:t,top:e,right:t+this.width,bottom:e+this.height}},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){return this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.render=function(){var t=this,e=t.left,n=t.top,r=t.width,o=t.height,i=t.image,a=t.getters,s=t.strokeColor,u=t.strokeWidth;if(ht(r)&&ht(o)){var c=a.ctx;ht(s)&&(c.lineWidth=u,c.strokeStyle=s,c.stroke(this.path2d)),c.drawImage(i,e,n,r,o)}},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e);this.translate(n,r)}},e.prototype.translate=function(t,e){this.left=this.left+t,this.top=this.top+e},e.prototype.updateWidth=function(t){this.width=t},e.prototype.updateHeight=function(t){this.height=t},e.prototype.updateLeft=function(t){this.left=t},e.prototype.updateTop=function(t){this.top=t},e.prototype.udpateSrc=function(t){this.src=t,this.image.src=t},e.prototype.sizeOnCenter=function(t,e){var n=t-this.kX,r=e-this.kX;this.kX=t,this.kY=e;var o=this.left,i=this.top,a=this.width,s=this.height;this.width=a*(1+n),this.height=s*(1+r),this.left=o-n*a/2,this.top=i-r*s/2},e.DEFAULT_WIDTH=0,e.DEFAULT_HEIGHT=0,e}(Xt),$t=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),te=(Math.max,Math.min,Math.PI,function(t){function e(e){var n=t.call(this,e)||this;return n.target=e.target,n}return $t(e,t),Object.defineProperty(e.prototype,"targetSizable",{get:function(){return this.target&&this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return this.target.radian},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.target.itemContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.container,e=t.leftTop,n=t.rightTop,r=t.rightBottom,o=t.leftBottom;new Path2D;return Qt([e,n,r,o])},enumerable:!0,configurable:!0}),e.prototype.render=function(){if(this.targetSizable){var t=this.getters.ctx;t.save(),t.lineWidth=1,t.strokeStyle="#5FB3B3",t.stroke(this.path2d),t.restore()}},e}(At)),ee=function(t,e,n){void 0===n&&(n={x:0,y:0});var r=t.x,o=t.y,i=n.x,a=n.y,s={x:r-i,y:o-a},u=s.x,c=s.y;return{x:u*Math.cos(e)-c*Math.sin(e)+i,y:u*Math.sin(e)+c*Math.cos(e)+a}},ne=n(43),re=n.n(ne),oe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ie=function(t){function e(e){var n=t.call(this,e)||this;n.type=A,n.image=new Image;var r=n;return n.target=e.target,n.image.src=re.a,n.image.onload=function(){r.shouldRender&&r.render()},n}return oe(e,t),Object.defineProperty(e.prototype,"targetRotatable",{get:function(){return this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return this.target.radian},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCenter",{get:function(){return this.target.itemCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicArrowCenter",{get:function(){var t=e.SPACE;return{x:this.itemCenter.x,y:this.target.itemInitialBounds.top-t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotatedArrowCenter",{get:function(){var t=this.itemCenter;return ee(this.basicArrowCenter,this.radian,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldRender",{get:function(){var t=this.target,e=t.shouldSelect,n=t.shouldRotate;return e||n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){var t=e.SIZE,n=this.itemCenter,r=function(t,e,n){return void 0===n&&(n={x:0,y:0}),t.map(function(t){return ee(t,e,n)})}(function(t,e,n){var r=t.x,o=t.y,i=e/2,a=n/2,s=r-i,u=r+i,c=o-a,p=o+a;return[{x:s,y:c},{x:u,y:c},{x:u,y:p},{x:s,y:p}]}(this.basicArrowCenter,t,t),this.radian,n);return Qt(r)},enumerable:!0,configurable:!0}),e.prototype.render=function(){if(this.targetRotatable&&this.shouldRender){var t=this.getters.ctx,n=e.SIZE;t.save(),t.transform(1,0,0,1,this.rotatedArrowCenter.x,this.rotatedArrowCenter.y),t.drawImage(this.image,-n/2,-n/2,n,n),t.restore(),this.getters.renderer.setTransformViewPort()}},e.prototype.contain=function(t,e){return this.targetRotatable&&this.getters.pointOnPath({x:t,y:e},this.path)},e.prototype.handleStartDrag=function(t){this.sharedActions.deselectCell(this.target),this.sharedActions.enableCellRotate(this.target)},e.prototype.updateDrag=function(t){var e=this;if(this.draggable){var n=function(t){var n=t.x,r=t.y,o=e.dragger.prevPoint,i=o.x,a=o.y,s=e.itemCenter,u=s.x,p=s.y,l=c({x:n-u,y:r-p}),f=c({x:i-u,y:a-p});return l-f}(this.getters.getInitialPoint(t)),r=this.radian+n;this.sharedActions.rotateCell(this.target,r*a)}},e.prototype.handleStopDrag=function(t){this.target.shouldRotate;this.sharedActions.disableCellRotate(this.target),this.sharedActions.selectCell(this.target)},e.SPACE=20,e.SIZE=20,e}(Xt),ae=function(){function t(){}return t.getNewK=function(t,e,n,r,o,i,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var u=h(n,-i),c=u.x,p=u.y,l=h(r,-i),f=l.x,d=l.y,g=h(o,-i),v=g.x,b=g.y,m=t,_=e;!a&&y(t)&&function(t,e){return t!==e}(c,v)&&(m=(m=(f-v)/((c-v)/t))>1e-12||m<0?m:1e-12);!s&&y(e)&&function(t,e){return t!==e}(p,b)&&(_=(_=(d-b)/((p-b)/e))>1e-12||_<0?_:1e-12);return{kX:m,kY:_}},t}(),se=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ue=Math.PI,ce=function(t){function e(e){var n=t.call(this,e)||this;return n.type=j,n.sizePoints=e.sizePoints,n}return se(e,t),Object.defineProperty(e.prototype,"sizable",{get:function(){return this.target&&this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=new Path2D;return t.arc(this.x,this.y,5,0,2*ue),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.target.itemCenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return ht(this.sizePoints)?this.sizePoints.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetUnitKX",{get:function(){return this.target.unitKX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetUnitKY",{get:function(){return this.target.unitKY},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.fillStyle="#3b99fc",t.fill(this.path2d),t.restore()},e.prototype.contain=function(t,e){return this.sizable&&this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e),o=this.target,i=o.kX,a=o.kY,s=this.point,u={x:s.x+n,y:s.y+r},c=this.getNewK(i,a,this.point,u,this.center,this.target.angle),p=c.kX,l=c.kY;this.target&&this.sharedActions.sizeItem(this.target,p,l,this.center)}},e.prototype.getNewK=function(t,e,n,r,o,i){},e}(Xt),pe=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.leftTopPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.rightBottomPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ce),le=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.topPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.bottomPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle,!0,!1)},e}(ce),fe=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.rightTopPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.leftBottomPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ce),he=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.leftPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.rightPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle,!1,!0)},e}(ce),de=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.rightPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.leftPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle,!1,!0)},e}(ce),ge=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.leftBottomPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.rightTopPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ce),ye=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.bottomPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.topPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle,!0,!1)},e}(ce),ve=function(t){function e(e){return t.call(this,e)||this}return se(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this.sizePoints.rightBottomPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return this.sizePoints.leftTopPoint},enumerable:!0,configurable:!0}),e.prototype.getNewK=function(t,e,n,r,o,i){return ae.getNewK(t,e,this.point,r,this.center,this.target.angle)},e}(ce),be=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),me=function(t){function e(e){var n=t.call(this,e)||this;return n.sizeContainer=e.sizeContainer,n.leftTop=new pe({draw:n.draw,sizePoints:n}),n.top=new le({draw:n.draw,sizePoints:n}),n.rightTop=new fe({draw:n.draw,sizePoints:n}),n.left=new he({draw:n.draw,sizePoints:n}),n.right=new de({draw:n.draw,sizePoints:n}),n.leftBottom=new ge({draw:n.draw,sizePoints:n}),n.bottom=new ye({draw:n.draw,sizePoints:n}),n.rightBottom=new ve({draw:n.draw,sizePoints:n}),n}return be(e,t),Object.defineProperty(e.prototype,"target",{get:function(){return ht(this.sizeContainer)?this.sizeContainer.target:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetSizable",{get:function(){return this.target.sizable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this.sizeContainer.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftTopPoint",{get:function(){return this.container.leftTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightTopPoint",{get:function(){return this.container.rightTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBottomPoint",{get:function(){return this.container.rightBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftBottomPoint",{get:function(){return this.container.leftBottom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPoint",{get:function(){var t=this.leftTopPoint,e=t.x,n=t.y,r=this.rightTopPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftPoint",{get:function(){var t=this.leftTopPoint,e=t.x,n=t.y,r=this.leftBottomPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightPoint",{get:function(){var t=this.rightTopPoint,e=t.x,n=t.y,r=this.rightBottomPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomPoint",{get:function(){var t=this.leftBottomPoint,e=t.x,n=t.y,r=this.rightBottomPoint;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizePoints",{get:function(){return[this.leftTop,this.top,this.rightTop,this.left,this.right,this.leftBottom,this.bottom,this.rightBottom]},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.targetSizable&&this.sizePoints.map(this.sharedActions.renderParticle)},e}(At),_e=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=Math.abs,Oe=function(t){function e(e){var n=t.call(this,e)||this;return n.sizable=ht(e.sizable)?e.sizable:n.sizable,n.sizable&&(n.sizeContainer=new te({draw:n.draw,target:n})),n.rotatable=ht(e.rotatable)?e.rotatable:n.rotatable,n.rotatable&&(n.rotationArrow=new ie({draw:n.draw,target:n})),n}return _e(e,t),e.prototype.implementInUpperConstructor=function(){this.sizePoints=new me({draw:this.draw,sizeContainer:this.sizeContainer})},Object.defineProperty(e.prototype,"bounds",{get:function(){return this.itemInitialBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsExtra",{get:function(){var t=this.bounds,e=t.left,n=t.top,r=t.right,o=t.bottom;return{left:e,top:n,right:r,bottom:o,leftCenter:{x:e,y:(o+n)/2},topCenter:{x:(e+r)/2,y:n},rightCenter:{x:r,y:(o+n)/2},bottomCenter:{x:(e+r)/2,y:o},width:Pe(r-e),height:Pe(o-n)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCenter",{get:function(){return{x:0,y:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemInitialBounds",{get:function(){return{left:0,right:0,top:0,bottom:0}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemContainer",{get:function(){var t=this.itemInitialBounds,e=t.left,n=t.right,r=t.top,o=t.bottom,i=this.radian,a=this.itemCenter,s={x:n,y:r},u={x:n,y:o},c={x:e,y:o},p=ee({x:e,y:r},i,a),l=ee(s,i,a),f=ee(u,i,a),h=ee(c,i,a),d=this.unitKX,g=this.unitKY,y={x:p.x,y:p.y},v={x:l.x,y:l.y},b={x:f.x,y:f.y},m={x:h.x,y:h.y};return d<0&&g<0&&(y={x:f.x,y:f.y},v={x:h.x,y:h.y},b={x:p.x,y:p.y},m={x:l.x,y:l.y}),d>0&&g<0&&(y={x:h.x,y:h.y},v={x:f.x,y:f.y},b={x:l.x,y:l.y},m={x:p.x,y:p.y}),d<0&&g>0&&(y={x:l.x,y:l.y},v={x:p.x,y:p.y},b={x:h.x,y:h.y},m={x:f.x,y:f.y}),{leftTop:y,rightTop:v,rightBottom:b,leftBottom:m}},enumerable:!0,configurable:!0}),e.prototype.size=function(t,e,n){},e.prototype.renderTransformWidget=function(){this.shouldSelect&&this.sizeContainer&&this.sizePoints&&(this.sizeContainer.render(),this.sizePoints.render()),this.rotationArrow&&this.rotationArrow.shouldRender&&this.sizeContainer&&this.rotationArrow&&(this.sizeContainer.render(),this.rotationArrow.render())},e}(Xt),Ee=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Se=function(t){function e(e){return t.call(this,e)||this}return Ee(e,t),e}(Oe),Te=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),we=(Math.max,Math.min,Math.PI),Le=function(t){function e(e){var n=t.call(this,e)||this;return n.target=e.target,n}return Te(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.target.bounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.target.angle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radian",{get:function(){return this.angle*we/180},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.bounds,e=t.left,n=t.right,r=t.top,o=t.bottom,i=(this.radian,{x:e,y:r}),a={x:n,y:r},s={x:n,y:o},u={x:e,y:o};new Path2D;return Qt([i,a,s,u])},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.stroke(this.path2d),t.restore()},e}(At),xe={x:0,y:0};function Ce(t,e){t.strokeStyle="yellow",t.lineWidth=1,t.stroke(e)}var De=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ae=(Math.min,Math.max,function(t){function e(e){var n=t.call(this,e)||this;n.segments=[],n.curves=[],n.fillColor="#61dafb",n.strokeColor=null,n.strokeWidth=1,n.showHandle=!1,n.defaultSegmentHandleLength=s;var r=n.segments||[];if(y(e.segments)&&(r=e.segments),n.curveUsesCanvasApi=ht(e.curveUsesCanvasApi)?e.curveUsesCanvasApi:n.curveUsesCanvasApi,n.curveRate=ht(e.curveRate)?e.curveRate:n.curveRate,n.fillColor=dt(e.fillColor)?e.fillColor:n.fillColor,n.strokeColor=dt(e.strokeColor)?e.strokeColor:n.strokeColor,n.strokeWidth=dt(e.strokeWidth)?e.strokeWidth:n.strokeWidth,n.showHandle=ht(e.showHandle)?e.showHandle:n.showHandle,n.defaultSegmentHandleLength=ht(e.defaultSegmentHandleLength)?e.defaultSegmentHandleLength:n.defaultSegmentHandleLength,g()(e.segments)&&(r=y(e.points)?e.points.map(function(t){return n.sharedGetters.createSegmentByPoint(t,n.draw,{path:n,defaultHandleLength:n.defaultSegmentHandleLength,showHandle:n.showHandle})}):n.segments),n.updateSegments(r),n.boundsContainer=new Le({draw:n.draw,target:n}),y(e.angle)&&n.rotate(e.angle),n.implementInUpperConstructor(),y(e.kX)||y(e.kY)){y(e.kX)?e.kX:n.kX,y(e.kY)?e.kY:n.kY;n.size(e.kX,e.kY,n.itemCenter)}return n.showHandle||n.sharedActions.hideSegmentsHandles(n.segments),n}return De(e,t),e.prototype.implementInUpperConstructor=function(){t.prototype.implementInUpperConstructor&&t.prototype.implementInUpperConstructor.call(this)},Object.defineProperty(e.prototype,"segmentsCenter",{get:function(){return this.sharedGetters.getSegmentsCenter(this.segments)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cx",{get:function(){return this.segmentsCenter.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cy",{get:function(){return this.segmentsCenter.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){return this.sharedGetters.getPath2dByCurves(this.curves)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.sharedGetters.getPathBounds(this.curves)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initialBounds",{get:function(){return this.sharedGetters.getPathInitialBounds(this.curves)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCenter",{get:function(){return this.sharedGetters.getPathItemCenter(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemInitialBounds",{get:function(){var t=this.itemCenter,e=(t.x,t.y,ee(t,-this.radian,xe)),n=t.x-e.x,r=t.y-e.y;return this.sharedGetters.getTranslatedBounds(this.initialBounds,n,r)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"points",{get:function(){return this.segments.map(function(t){return t.point})},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx,e=this.fillColor,n=this.strokeColor,r=this.strokeWidth;t.save(),ht(e)&&(t.fillStyle=dt(e)?e:"#61dafb",t.fill(this.path2d)),t.restore(),this.segments.map(this.sharedActions.renderParticle),this.renderTransformWidget(),ht(n)&&(t.strokeStyle=n,t.lineWidth=r,t.stroke(this.path2d)),this.shouldSelect&&(t.strokeStyle="yellow",t.lineWidth=1,t.stroke(this.path2d)),this.shouldSelect&&Ce(t,this.path2d)},e.prototype.contain=function(t,e){return this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.updateDrag=function(t,e){if(this.draggable){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.sharedActions.translateSegments(this.segments,r,o)}},e.prototype.rotate=function(t){var e=t-this.angle;this.sharedActions.rotateSegments(this.segments,e,this.itemCenter),this.prevAngle=this.angle,this.angle=t},e.prototype.size=function(t,e,n){this.kX,this.kY;var r=0===this.kX?0:t/this.kX,o=0===this.kY?0:e/this.kY;this.sharedActions.sizeSegments(this.segments,r,o,n),this.prevKX=this.kX,this.kX=t,this.prevKY=this.kY,this.kY=e},e.prototype.updateSegments=function(t){var e=this;this.segments=t,this.sharedActions.ajustSegmentsPreviousAndNext(this.segments),this.segments.map(function(t){var n=e.sharedGetters.getPerpHandleRelativePoint(t.previous,t,t.next);e.sharedActions.updateHandleRelativePoint(t.handleOut,n),e.sharedActions.adjustHandleParterPoint(t.handleOut)}),this.actions.REMOVE_ELEMENTS(this.curves),this.curves=this.sharedGetters.getCurves(this.segments,this.curveUsesCanvasApi,this.curveRate,this.draw)},e.prototype.translate=function(t,e){this.sharedActions.translateSegments(this.segments,t,e)},e.prototype.translateTo=function(t,e){var n=this.itemCenter,r=t-n.x,o=e-n.y;this.translateTo(r,o)},e.prototype.translateToPoint=function(t){this.translateTo(t.x,t.y)},e}(Se)),je=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ie=function(t){function e(n){var r=t.call(this,function(t){var n=t.x,r=t.y,o=t.left,i=t.top,a=t.width,s=t.height;a=dt(a)?a:e.DEFAULT_WIDTH,s=dt(s)?s:e.DEFAULT_HEIGHT,ht(n)&&ht(r)?(o=n-a/2,i=r-s/2):(o=dt(o)?o:e.DEFAULT_LEFT,i=dt(i)?i:e.DEFAULT_TOP);var u=Zt({left:o,top:i,width:a,height:s}),c=u.leftTop,p=u.rightTop,l=u.rightBottom,f=u.leftBottom,h=[c,p,l,f];return t.points=h,t}(n))||this;r.type=E,r.left=e.DEFAULT_LEFT,r.top=e.DEFAULT_TOP,r.width=e.DEFAULT_WIDTH,r.height=e.DEFAULT_HEIGHT,r.t=1;var o=n.x,i=n.y,a=n.left,s=n.top;r.width=ht(n.width)?n.width:r.width,r.height=ht(n.height)?n.height:r.height;var u=r,c=u.width,p=u.height;return ht(o)&&ht(i)?(r.left=o-c/2,r.top=i-p/2):(r.left=ht(a)?a:r.left,r.top=ht(s)?s:r.top),r.sizable=ht(n.sizable)?n.sizable:r.sizable,r.rotatable=ht(n.rotatable)?n.rotatable:r.rotatable,r.sharedActions.clearSegmentsHandles(r.segments),r.sharedActions.hideSegmentsHandles(r.segments),r.sharedActions.hideSegments(r.segments),r}return je(e,t),e.prototype.updateWidth=function(t){this.width=t},e.prototype.updateHeight=function(t){this.height=t},e.prototype.translate=function(e,n){this.left=this.left+e,this.top=this.top+n,t.prototype.translate.call(this,e,n)},e.DEFAULT_LEFT=0,e.DEFAULT_TOP=0,e.DEFAULT_WIDTH=100,e.DEFAULT_HEIGHT=100,e}(Ae),Ne=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=function(t){function e(n){var r=t.call(this,n)||this;return r.type=x,r.x=0,r.y=0,r.text="",r.fontSize=e.DEFAULT_FONT_SIZE,r.x=y(n.x)?n.x:r.x,r.y=y(n.y)?n.y:r.y,r.text=y(n.text)?n.text:r.text,r.fontSize=y(n.fontSize)?n.fontSize:r.fontSize,r}return Ne(e,t),Object.defineProperty(e.prototype,"width",{get:function(){var t=this.fontSize,e=this.getters.ctx;return e.textBaseline="bottom",e.textAlign="center",e.font=t+"px sans-serif",this.getters.ctx.measureText(this.text).width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.fontSize,e=this.getters.ctx;return e.textBaseline="bottom",e.textAlign="center",e.font=t+"px Arial",e.measureText("yy").width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.x,e=this.y,n=this.width,r=this.height,o=Zt({left:t-n/2,top:e-r,width:n,height:r}),i=o.leftTop,a=o.rightTop,s=o.rightBottom,u=o.leftBottom;return Qt([i,a,s,u])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textInput",{get:function(){return this.getters.textInput},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){return this.show&&this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.render=function(){if(this.show){var t=this.getters.ctx,e=this.text,n=this.x,r=this.y,o=this.fontSize;t.save(),t.textBaseline="bottom",t.textAlign="center",t.fillStyle=this.fillColor,t.font=o+"px sans-serif",t.fillText(e,n,r),t.restore()}},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e);this.translate(n,r)}},e.prototype.handleDoubleClick=function(t){var e=t.x,n=t.y;this.getters.textInput.target=this,this.getters.textInput.updateProp({left:e,top:n,text:this.text}),this.getters.textInput.show(),this.getters.textInput.focus()},e.prototype.translate=function(t,e){this.x=this.x+t,this.y=this.y+e},e.prototype.updateText=function(t){this.text=t},e.DEFAULT_FONT_SIZE=12,e}(Xt),Me=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ke=function(t){function e(e){return t.call(this,e)||this}return Me(e,t),e.prototype.render=function(){t.prototype.render.call(this)},e}(Xt),Ue=Math.sqrt,Be=Math.pow,He=function(t,e){var n=t.x,r=t.y,o=e.x,i=e.y;return Ue(Be(o-n,2)+Be(i-r,2))},ze=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=Math.cos,We=Math.sin,Ge=Math.PI,Ve=function(t){function e(e){var n=t.call(this,e)||this;n.type=r.HANDLE_IN,n.show=!0,n.partner=null,n.defaultLength=s;var o=n;return n.segment=e.segment,y(e.type)&&(n.type=e.type),y(e.partner)&&(n.partner=e.partner),n.defaultLength=ht(e.defaultLength)?e.defaultLength:n.defaultLength,n.show=ht(e.show)?e.show:n.show,n.relativePoint=function(t,e){var n=0;e===r.HANDLE_IN&&(n=-180);e===r.HANDLE_OUT&&(n=0);t.x,t.y;var a=o.defaultLength,s=a*Fe(n*i),u=a*We(n*i);return{x:s,y:u}}(n.segmentPoint,n.type),n.dragger=new Vt({draw:n.draw}),n.dragger.update=n.updateDrag.bind(n),n}return ze(e,t),Object.defineProperty(e.prototype,"segmentPoint",{get:function(){return this.segment.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linePath",{get:function(){var t=new Path2D,e=this.segmentPoint,n=e.x,r=e.y,o=this.point,i=o.x,a=o.y;return t.moveTo(n,r),t.lineTo(i,a),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointPath",{get:function(){var t=new Path2D,e=this.point,n=e.x,r=e.y;return t.arc(n,r,3,0,2*Ge),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){var t=this.segmentPoint,e=this.relativePoint;return{x:t.x+e.x,y:t.y+e.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.point.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.point.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){var t=this.point,e=this.segment;return He(t,e)},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.show&&(this.renderLine(),this.renderPoint())},e.prototype.renderLine=function(){var t=this.getters.ctx,e=this.linePath;t.save(),t.strokeStyle="deepSkyBlue",t.stroke(e),t.restore()},e.prototype.renderPoint=function(){var t=this.getters.ctx,e=this.pointPath;t.save(),t.fillStyle=this.type===r.HANDLE_IN?"#fc929e":"#79b6f2",t.fill(e),t.restore()},e.prototype.contain=function(t,e){return this.show&&this.getters.pointOnPath({x:t,y:e},this.pointPath)},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e),o=this.relativePoint,i={x:o.x+n,y:o.y+r};this.sharedActions.updateHandleRelativePoint(this,i),this.sharedActions.adjustHandleParterPoint(this)}},e}(Xt),Ye=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=Math.PI,Xe=function(t){function e(e){var n=t.call(this,e)||this;n.show=!0,n.selected=!1,n.shouldShowHandleIn=!1,n.shouldShowHandleOut=!1,n.fillColor="deepSkyBlue",n.defaultHandleLength=s,n.showHandle=!1,n.x=e.x,n.y=e.y,n.path=ht(e.path)?e.path:n.path,n.show=ht(e.show)?e.show:n.show;var o=n.drawStore.setting.showSegments;return n.show=ht(o)?o:n.show,n.fillColor=ht(e.fillColor)?e.fillColor:n.fillColor,n.defaultHandleLength=ht(e.defaultHandleLength)?e.defaultHandleLength:n.defaultHandleLength,n.showHandle=ht(e.showHandle)?e.showHandle:n.showHandle,n.handleIn=new Ve({draw:n.draw,segment:n,type:r.HANDLE_IN,defaultLength:n.defaultHandleLength,show:n.showHandle}),n.handleOut=new Ve({draw:n.draw,segment:n,type:r.HANDLE_OUT,defaultLength:n.defaultHandleLength,show:n.showHandle}),n.handleIn.partner=n.handleOut,n.handleOut.partner=n.handleIn,n.sharedActions.adjustHandleParterPoint(n.handleIn),n}return Ye(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return{x:this.x,y:this.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=new Path2D;return t.arc(this.x,this.y,5,0,2*Ke),t},enumerable:!0,configurable:!0}),e.prototype.render=function(){if(this.show){var t=this.getters.ctx;t.save(),t.lineWidth=3,t.fillStyle=this.fillColor,t.fill(this.path2d),t.restore(),this.handleIn.render(),this.handleOut.render()}},e.prototype.renerPosition=function(){var t="("+this.x+", "+this.y+")",e=this.getters.ctx;e.save(),e.font="12px",e.fillText(t,this.x,this.y),e.restore()},e.prototype.contain=function(t,e){return this.show&&this.getters.pointOnPath({x:t,y:e},this.path2d)},e.prototype.updateDrag=function(t,e){if(this.draggable){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.translate(r,o)}},e.prototype.translate=function(t,e){this.x=this.x+t,this.y=this.y+e},e.prototype.translateTo=function(t,e){this.x=t,this.y=e},e.prototype.translateToPoint=function(t){this.x=t.x,this.y=t.y},e}(Xt),Ze=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(t){function e(e){var n=t.call(this,function(t){return t.draggable=!1,t}(e))||this;return n.show=!1,n}return Ze(e,t),e}(Xe),Je=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qe=function(t){function e(e){return t.call(this,function(t){var e=t.path,n=e.cy,r=e.bounds.right;return t.x=r-1,t.y=n,t.fillColor="red",t}(e))||this}return Je(e,t),e}(Qe),$e=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tn=function(t){function e(e){var n=t.call(this,function(t){return t}(e))||this;return n.operationLink=null,n.singleOperationLink=null,n}return $e(e,t),Object.defineProperty(e.prototype,"operationOrthogonalLines",{get:function(){return this.operationLink.links},enumerable:!0,configurable:!0}),e.prototype.setOperationLink=function(t){this.operationLink=t},e.prototype.setSingleOperationLink=function(t){this.singleOperationLink=t},e.prototype.translate=function(e,n){var r=this.singleOperationLink;if(ht(r)){var o=this.x,i=this.y,a=r.startLinking;!r.shouldSelect&&a&&a.translateLinkingToPoint({x:o+e,y:i+n})}t.prototype.translate.call(this,e,n)},e}(qe),en=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nn=function(t){function e(n){var r=t.call(this,function(t){var n=t.width,r=t.height;return t.width=ht(n)?n:e.DEFAULT_WIDTH,t.height=ht(r)?r:e.DEFAULT_HEIGHT,t.sizable=!1,t.fillColor=null,t.shouldRenderInMiniMap=!0,t}(n))||this;r.data={},r.selectedFillColor=wt,r.selectedStrokeColor=Lt;var o=e.IMAGE_WIDTH,i=(e.IMAGE_HEIGHT,e.TITLE_TEXT_COLOR),a=e.TITLE_TEXT_MARGIN_TOP,s=Re.DEFAULT_FONT_SIZE;r.width=ht(n.width)?n.width:r.width,r.height=ht(n.height)?n.height:r.height,r.data=ht(n.data)?n.data:r.data;var u=r.data,c=u.src,p=u.name,l=void 0===p?"Data Node":p,f=n.x,h=n.y;ht(f)&&ht(h)?(r.left=f-r.width/2,r.top=h-r.height/2):(r.left=ht(n.left)?n.left:r.left,r.top=ht(n.top)?n.top:r.top);var d=r,g=(d.left,d.top,d.width,d.height,r.bounds),y=(g.right,g.bottom),v=r.itemCenter,b=v.x,m=v.y;return r.src=ht(n.src)?n.src:r.src,ht(c)&&(r.src=c),r.image=new qt({draw:r.draw,draggable:!1,src:r.src,x:b,y:m,width:o}),r.titleText=new Re({draw:r.draw,draggable:!1,x:b,y:y+s/2+a,text:l,fillColor:i}),r.rightLinking=new tn({draw:r.draw,path:r}),r}return en(e,t),Object.defineProperty(e.prototype,"identityClass",{get:function(){return"node"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"operation",{get:function(){try{return this.rightLinking.operationLink.operation}catch(t){}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDataNode",{get:function(){return this.type===vt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResultNode",{get:function(){return this.type===bt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadePath2d",{get:function(){var t=new Path2D,e=this.width,n=this.height,r=this.left,o=this.top;return r-=1,o-=1,e+=2,n+=2,t.rect(r,o,e,n),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleNode",{get:function(){return g()(this.operation)},enumerable:!0,configurable:!0}),e.prototype.updateData=function(t){this.data=t;var e=this.data,n=e.src,r=e.name;ht(n)&&this.image.udpateSrc(n),ht(r)&&this.titleText.updateText(r)},e.prototype.handleMouseIn=function(){this.strokeColor="#293240"},e.prototype.handleMouseOut=function(){this.strokeColor=null},e.prototype.updateDrag=function(t,e){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.translate(r,o)},e.prototype.bindDrag=function(){this.image.dragger.interfaceDragging=this.updateDrag.bind(this),this.rightLinking.dragger.handleDragging=this.updateDrag.bind(this),this.titleText.dragger.interfaceDragging=this.updateDrag.bind(this)},e.prototype.translate=function(e,n){t.prototype.translate.call(this,e,n),this.image.translate(e,n),this.rightLinking.translate(e,n),this.titleText.translate(e,n)},e.prototype.translateCenterToPoint=function(t){var e=this.itemCenter,n=e.x,r=e.y,o=t.x-n,i=t.y-r;this.translate(o,i)},e.prototype.select=function(){this.rightLinking.select(),t.prototype.select.call(this)},e.prototype.render=function(){var t=this.getters.ctx,e=this,n=e.strokeColor,r=e.shouldSelect,o=e.selectedFillColor,i=e.selectedStrokeColor,a=e.path2d;ht(n)&&(t.strokeStyle=n,t.lineWidth=1,t.stroke(a)),r&&(t.fillStyle=o,t.fill(a),t.lineWidth=1,t.strokeStyle=i,t.stroke(a))},e.prototype.remove=function(){this.image&&this.image.remove(),this.rightLinking&&this.rightLinking.remove(),this.titleText&&this.titleText.remove(),t.prototype.remove.call(this)},e.DEFAULT_WIDTH=70,e.DEFAULT_HEIGHT=70,e.IMAGE_WIDTH=50,e.IMAGE_HEIGHT=50,e.TITLE_TEXT_COLOR="#8196AC",e.TITLE_TEXT_MARGIN_TOP=8,e}(Ie),rn=Math.min,on=Math.max,an=function(t){var e=t.map(function(t){return t.x}),n=t.map(function(t){return t.y});return{x:(rn.apply(void 0,e)+on.apply(void 0,e))/2,y:(rn.apply(void 0,n)+on.apply(void 0,n))/2}};function sn(t){return function(e,n,r){return jt(n)?t.createStartSegment(e):Nt(n,r)?t.createEndSegment(e):t.createCornerSegment(e)}}function un(t,e){var n=t.x,r=t.y,o=e.x,i=e.y;return n===o&&r!==i||r===i&&n!==o}var cn=Math.sqrt,pn=Math.pow,ln=Math.atan,fn=Math.abs,hn=Math.PI,dn=function(){function t(t,e){function n(t){var e=!1;try{e=ot()(t.x)&&ot()(t.y)}catch(t){}return e}this.type="MATH_VECTOR",ot()(t)&&ot()(e)&&(this.x=t,this.y=e),n(t)&&!n(e)&&(this.x=t.x,this.y=t.y),n(t)&&n(e)&&(this.x=e.x-t.x,this.y=e.y-t.y)}return Object.defineProperty(t.prototype,"length",{get:function(){return cn(pn(this.x,2)+pn(this.y,2))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this.divide(this.length)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){var t,e=this.x,n=this.y,r=180*ln(fn(n/e))/hn;return(function(t){return 0===t.x&&0===t.y}(this)||function(t){return 0===t.y&&t.x>0}(this))&&(t=0),function(t){return 0===t.y&&t.x<0}(this)&&(t=180),function(t){return 0===t.x&&t.y>0}(this)&&(t=90),function(t){return 0===t.x&&t.y<0}(this)&&(t=270),function(t){return t.x>0&&t.y>0}(this)&&(t=r),function(t){return t.x<0&&t.y>0}(this)&&(t=180-r),function(t){return t.x<0&&t.y<0}(this)&&(t=180+r),function(t){return t.x>0&&t.y<0}(this)&&(t=360-r),t},enumerable:!0,configurable:!0}),t.prototype.add=function(e){var n=e.x,r=e.y;return new t(this.x+n,this.y+r)},t.prototype.subtract=function(e){var n=e.x,r=e.y;return new t(this.x-n,this.y-r)},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.rotate=function(e){var n=e*Math.PI/180,r=this.x,o=this.y;return new t(r*Math.cos(n)-o*Math.sin(n),r*Math.sin(n)+o*Math.cos(n))},t.prototype.absoluteParallelWith=function(t){return this.angle===t.angle},t}(),gn=function(t,e,n){var r,o,i,a,s,u=l(t),c=l(e);o=new dn(u,c).angle,r=h(c,-o,u);var p=u.x,f=u.y,d=r.x,g=r.y;return i={x:d+n,y:g-n},a={x:d+n,y:g+n},s={x:p-n,y:f+n},{leftTop:h({x:p-n,y:f-n},o,u),rightTop:h(i,o,u),rightBottom:h(a,o,u),leftBottom:h(s,o,u)}},yn=function(t,e,n){void 0===n&&(n=20);var r,o,i,a,s,u,c=l(t),p=l(e);o=new dn(c,p).angle;var f=(r=h(p,-o,c)).x,d=r.y;return i={x:f-4*n/5,y:d},a={x:f-n,y:d+n/2},s=h({x:f-n,y:d-n/2},o,c),u=h(i,o,c),{top:s,right:p,bottom:h(a,o,c),left:u}},vn="#999",bn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mn=function(t){function e(e){var n=t.call(this,function(t){var e=t.source,n=t.target,r=t.sourceSegment,o=t.targetSegment;if(y(e)&&y(n)){var i=[e,n];t.points=i}if(y(r)&&y(o)){var a=[r,o];t.segments=a}return t}(e))||this;n.type=S,n.rotatable=!1,n.sizable=!1,n.t=1,n.fillColor=vn,n.lineWidth=1,n.showArrow=!1;var r=e.lineWidth,o=e.getErasingPath2d;n.lineWidth=ht(r)?r:n.lineWidth,n.getErasingPath2d=ht(o)?o:n.getErasingPath2d;var i=n.segments.length;return n.source=n.segments[0],n.target=n.segments[i-1],n.showArrow=y(e.showArrow)?e.showArrow:n.showArrow,n.sharedActions.clearSegmentsHandles(n.segments),n.sharedActions.hideSegmentsHandles(n.segments),n.fillColor=y(e.fillColor)?e.fillColor:n.fillColor,n}return bn(e,t),Object.defineProperty(e.prototype,"hitBounds",{get:function(){return gn(this.source.point,this.target.point,this.lineWidth)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRegionPath2d",{get:function(){var t=this.hitBounds,e=t.leftTop,n=t.rightTop,r=t.rightBottom,o=t.leftBottom;return Qt([e,n,r,o])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetArrowPath2d",{get:function(){var t=yn(this.source.point,this.target.point,20),e=t.top,n=t.right,r=t.bottom,o=t.left;return Qt([e,n,r,o])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){var t=this.source,e=this.target;return t.x===e.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHorizontal",{get:function(){var t=this.source,e=this.target;return t.y===e.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCoincided",{get:function(){var t=this.source,e=this.target,n=t.x,r=t.y,o=e.x,i=e.y;return n===o&&r===i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){var t=this.source,e=t.x,n=t.y,r=this.target;return{x:(e+r.x)/2,y:(n+r.y)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"erasingPath2d",{get:function(){var t=this.getErasingPath2d;return t?t():null},enumerable:!0,configurable:!0}),e.prototype.render=function(){this.renderHitRegion(),this.showArrow&&this.renderArrow()},e.prototype.renderHitRegion=function(){var t=this.erasingPath2d,e=this.getters.ctx,n=this.getters,r=(n.tmpCtx,n.tmpCanvas,this.bounds),o=(r.left,r.right,r.top);r.bottom;e.save(),e.fillStyle=this.fillColor,e.fill(this.hitRegionPath2d),this.shouldSelect&&Ce(e,this.hitRegionPath2d),e.globalCompositeOperation="destination-out",t&&e.fill(t),e.restore()},e.prototype.renderArrow=function(){if(this.showArrow){var t=this.getters.ctx;t.save(),t.fillStyle=this.fillColor,t.fill(this.targetArrowPath2d),this.shouldSelect&&Ce(t,this.targetArrowPath2d),t.restore()}},e.prototype.contain=function(t,e){var n=this.getters.pointOnPath({x:t,y:e},this.hitRegionPath2d),r=this.getters.pointOnPath({x:t,y:e},this.targetArrowPath2d);return this.showArrow&&r||n},e.prototype.updateSegments=function(e){t.prototype.updateSegments.call(this,e);var n=e.length;this.source=e[0],this.target=e[n-1]},e.prototype.translate=function(t,e){this.source.translate(t,e),this.target.translate(t,e)},e.prototype.translateTargetToPoint=function(t){ht(this.target)&&this.target.translateToPoint(t)},e.prototype.forceRemove=function(){this.remove(),this.actions.REMOVE_ELEMENTS([this.source,this.target])},e}(Ae),_n=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=function(t){function e(e){var n=t.call(this,e)||this;return n.centerSegment=null,n.renderFnInMiniMap=function(){var t=n.getters.ctx;t.lineWidth=5,t.fillStyle="#2aaffa",t.strokeStyle="#2aaffa",n.hitRegionPath2d&&t.fill(n.hitRegionPath2d),n.hitRegionPath2d&&t.stroke(n.hitRegionPath2d)},n.orthogonalLine=e.orthogonalLine,n}return _n(e,t),e.prototype.updateCenterSegmentPosition=function(){this.sharedActions.updateSegmentPoint(this.centerSegment,this.center)},e}(mn),On=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),En=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Sn=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine.isSimpleLine||(n.centerSegment=n.orthogonalLine.createStartCenterSegment(En({},n.center,{line:n}))),n}return On(e,t),e}(Pn),Tn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ln=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine.isSimpleLine||(n.centerSegment=n.orthogonalLine.createEndCenterSegment(wn({},n.center,{line:n}))),n}return Tn(e,t),e}(Pn),xn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Dn=function(t){function e(e){var n=t.call(this,e)||this;return n.centerSegment=n.orthogonalLine.createEndInnerCenterSegment(Cn({},n.center,{line:n})),n}return xn(e,t),e}(Pn),An=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jn=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine=e.orthogonalLine,n}return An(e,t),e}(Xe);var In=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nn=function(t){function e(e){var n=t.call(this,function(t,e){return t.fillColor=e,t}(e,"deepSkyBlue"))||this;return n.line=null,n.orthogonalLine=e.orthogonalLine,n.line=e.line,n}return In(e,t),e.prototype._updateLineColorToDefault=function(){this.line.fillColor=vn},e.prototype.handleDragging=function(t){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e),o=this.line,i=o.isVertical,a=o.isHorizontal;i&&this.line.translate(n,0),a&&this.line.translate(0,r),this._updateLineColorToDefault(),this.orthogonalLine.updateCenterSegmentsPosition()},e}(Xe),Rn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mn=(Math.abs,function(t){function e(e){var n=t.call(this,e)||this;return n.tmpStartLine=null,n.shouldAddCornerSegmentWhenMoving=!1,n}return Rn(e,t),e.prototype._removeTmpStartLine=function(){ht(this.tmpStartLine)&&(this.actions.REMOVE_ELEMENT(this.tmpStartLine.centerSegment),this.actions.REMOVE_ELEMENT(this.tmpStartLine),this.tmpStartLine=null)},e.prototype._updateTmpStartLineCenterSegmentsPosition=function(){this.tmpStartLine.updateCenterSegmentPosition()},e.prototype.handleBeforeDragging=function(t){var e=this.getters.getInitialPoint(t),n=(this.dragger.getDeltaXToStartPoint(e),this.dragger.getDeltaYToStartPoint(e),this.line),r=n.isVertical,o=n.isHorizontal,i=this.orthogonalLine.startSegment;if(r||o){if(!this.shouldAddCornerSegmentWhenMoving){this.shouldAddCornerSegmentWhenMoving=!0,this.orthogonalLine.addCornerSegmentStart(i.point);var a=Ht(this.orthogonalLine.cornerSegments);this.line.source=a,this.tmpStartLine=this.orthogonalLine.addTmpStartLine({sourceSegment:i,targetSegment:a})}this.tmpStartLine&&this.tmpStartLine.updateCenterSegmentPosition()}},e.prototype.handleStopDrag=function(){this.shouldAddCornerSegmentWhenMoving=!1,this._removeTmpStartLine(),this.orthogonalLine.refresh(),t.prototype.handleStopDrag&&t.prototype.handleStopDrag.call(this)},e}(Nn)),kn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Un=function(t){function e(e){var n=t.call(this,e)||this;return n.tmpEndLine=null,n.shouldAddCornerSegmentWhenMoving=!1,n}return kn(e,t),e.prototype._removeTmpEndLine=function(){ht(this.tmpEndLine)&&(this.actions.REMOVE_ELEMENT(this.tmpEndLine.centerSegment),this.actions.REMOVE_ELEMENT(this.tmpEndLine),this.tmpEndLine=null)},e.prototype._updateTmpEndLineCenterSegmentsPosition=function(){this.tmpEndLine.updateCenterSegmentPosition()},e.prototype._hideLineArrow=function(){this.line.showArrow=!1},e.prototype.handleBeforeDragging=function(t){var e=this.getters.getInitialPoint(t),n=(this.dragger.getDeltaXToStartPoint(e),this.dragger.getDeltaYToStartPoint(e),this.line),r=n.isVertical,o=n.isHorizontal,i=this.orthogonalLine.endSegment;if(r||o){if(!this.shouldAddCornerSegmentWhenMoving){this.shouldAddCornerSegmentWhenMoving=!0,this.orthogonalLine.addCornerSegmentEnd(i.point);var a=zt(this.orthogonalLine.cornerSegments);this.line.target=a,this._hideLineArrow(),this.tmpEndLine=this.orthogonalLine.addTmpEndLine({sourceSegment:a,targetSegment:i})}this.tmpEndLine&&this.tmpEndLine.updateCenterSegmentPosition()}},e.prototype.handleStopDrag=function(){this.shouldAddCornerSegmentWhenMoving=!1,this._removeTmpEndLine(),this.orthogonalLine.refresh(),t.prototype.handleStopDrag&&t.prototype.handleStopDrag.call(this)},e}(Nn),Bn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hn=function(t){function e(e){var n=t.call(this,e)||this;return n.orthogonalLine=e.orthogonalLine,n}return Bn(e,t),e}(Nn),zn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Wn=function(t){function e(e){var n=t.call(this,e)||this,r=e.segment,o=e.point;n.segment=ht(r)?r:new Xe(Fn({draw:n.draw},o,{fillColor:e.segmentFillColor})),n.handleSegmentAfterDragging=n.handleSegmentAfterDragging.bind(n),n.handleSegmentStopDrag=n.handleSegmentStopDrag.bind(n),n.updateSegmentDrag=n.updateSegmentDrag.bind(n),n.orthogonalLine=e.orthogonalLine;var i=n.segment.dragger;return i.interfaceStopDragList.push(n.handleSegmentStopDrag),i.interfaceDraggingList.push(n.handleSegmentAfterDragging),i.updateList.push(n.updateSegmentDrag),n}return zn(e,t),e.prototype.translateLinkingToPointWith=function(t,e,n,r){if(!this.orthogonalLine.isSimpleLine){var o=this,i=e.isVertical,a=e.isHorizontal,s=e.isCoincided,u=t.x,c=t.y;if(s){var p=r(e);if(ht(p)){if(p.isHorizontal&&ht(n)&&this.sharedActions.updateSegmentX(n,u),p.isVertical&&ht(n)&&this.sharedActions.updateSegmentY(n,c),p.isCoincided){var l=r(p);ht(l)?(l.isVertical&&this.sharedActions.updateSegmentX(n,u),l.isHorizontal&&ht(n)&&this.sharedActions.updateSegmentY(n,c)):f()}}else f()}else i&&ht(n)&&this.sharedActions.updateSegmentX(n,t.x),a&&ht(n)&&this.sharedActions.updateSegmentY(n,t.y)}function f(){ht(n)&&o.sharedActions.updateSegmentX(n,u)}},e.prototype.updateSegmentDrag=function(t){if(this.segment.draggable){var e=this.segment.getters.getInitialPoint(t),n=this.segment.dragger,r=n.updateList,o=Mt(r),i=n.getDeltaXToPrevPoint(e),a=n.getDeltaYToPrevPoint(e),s=this.segment.point,u=s.x,c=s.y;u+=i,c+=a,this.translateLinkingToPoint({x:u,y:c}),(!o||o&&function(t,e){return Nt(Bt(t,e),t)}(r,this.updateSegmentDrag))&&this.segment.translateToPoint({x:u,y:c})}},e.prototype.handleSegmentAfterDragging=function(t){this.segment.draggable&&!this.orthogonalLine.isSimpleLine&&this.orthogonalLine.updateCenterSegmentsPosition()},e.prototype.contain=function(){},e.prototype.remove=function(){var e=this.segment.dragger;Wt(e.interfaceStopDragList,this.handleSegmentStopDrag),Wt(e.interfaceAfterDraggingList,this.handleSegmentAfterDragging),t.prototype.remove.call(this)},e.prototype.forceRemove=function(){this.segment&&this.segment.remove(),this.remove()},e}(Xt),Gn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vn=function(t){function e(e){return t.call(this,function(t){return t.segmentFillColor="red",t}(e))||this}return Gn(e,t),Object.defineProperty(e.prototype,"startLine",{get:function(){return this.orthogonalLine.startLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCornerSegment",{get:function(){return Ht(this.orthogonalLine.cornerSegments)},enumerable:!0,configurable:!0}),e.prototype._getCornerSegmentToBeCombined=function(){for(var t=this.orthogonalLine.cornerSegments.filter(function(t,e,n){return!Nt(e,n)}),e=t.length,n=this.segment.point,r=null,o=0;o<e;o++){var i=t[o],a=i.point;He(n,a)<=qn.COMBINE_INTERVAL&&(r=i)}return r},e.prototype._combineCornerSegment=function(t){if(ht(t)){var e=this.orthogonalLine.cornerSegments,n=Bt(e,t);if(this.translateLinkingToPoint(t.point),this.segment.translateToPoint(t.point),ht(n)){var r=e.filter(function(t,e){return e<=n});this.orthogonalLine.removeCornerSegments(r)}}},e.prototype.translateLinkingToPoint=function(t){this.translateLinkingToPointWith(t,this.startLine,this.firstCornerSegment,this.orthogonalLine.getNextLine.bind(this.orthogonalLine))},e.prototype.handleSegmentStopDrag=function(t){if(this.segment.draggable){var e=this._getCornerSegmentToBeCombined();ht(e)&&(this._combineCornerSegment(e),this.orthogonalLine.refresh()),this.orthogonalLine.handleStartSegmentStopDrag(t)}},e}(Wn),Yn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kn=function(t){function e(e){return t.call(this,function(t){return t.segmentFillColor="blue",t}(e))||this}return Yn(e,t),Object.defineProperty(e.prototype,"endLine",{get:function(){return this.orthogonalLine.endLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCornerSegment",{get:function(){return zt(this.orthogonalLine.cornerSegments)},enumerable:!0,configurable:!0}),e.prototype._getCornerSegmentToBeCombined=function(){for(var t=this.orthogonalLine.cornerSegments.filter(function(t,e,n){return!jt(e)}),e=t.length,n=this.segment.point,r=0;r<e;r++){var o=t[r],i=o.point;if(He(n,i)<=qn.COMBINE_INTERVAL)return o}return null},e.prototype._combineCornerSegment=function(t){if(ht(t)){var e=this.orthogonalLine.cornerSegments,n=Bt(e,t);if(this.translateLinkingToPoint(t.point),this.segment.translateToPoint(t.point),ht(n)){var r=e.filter(function(t,e){return e>=n});this.orthogonalLine.removeCornerSegments(r)}}},e.prototype.translateLinkingToPoint=function(t){this.translateLinkingToPointWith(t,this.endLine,this.lastCornerSegment,this.orthogonalLine.getPrevLine.bind(this.orthogonalLine))},e.prototype.handleSegmentStopDrag=function(e){if(this.segment.draggable){var n=this._getCornerSegmentToBeCombined();ht(n)&&(this._combineCornerSegment(n),this.orthogonalLine.refresh()),this.orthogonalLine.handleEndSegmentStopDrag(e),t.prototype.handleStopDrag&&t.prototype.handleStopDrag.call(this)}},e}(Wn),Xn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Qn=(Math.abs,Math.min),Jn=Math.max,qn=function(t){function e(e){var n=t.call(this,e)||this;n.startLinking=null,n.endLinking=null,n.cornerSegments=[],n.startLine=null,n.endLine=null,n.innerLines=[],n.showArrow=!0,n.showCenterSegment=!0,n.showCorner=!0,n.startLineFillColor="red",n.endLineFillColor="blue",n.innerLineFillColor="grey",n.startSegmentFillColor="darkRed",n.endSegmentFillColor="darkBlue",n.addedToBottom=!1;var r=e.points,o=void 0===r?[]:r,i=e.startSegment,a=e.endSegment,s=e.corners,u=void 0===s?[]:s,c=o.length;if(n.showArrow=ht(e.showArrow)?e.showArrow:n.showArrow,n.showCenterSegment=ht(e.showCenterSegment)?e.showCenterSegment:n.showCenterSegment,n.showCorner=ht(e.showCorner)?e.showCorner:n.showCorner,n.startLineFillColor=ht(e.startLineFillColor)?e.startLineFillColor:n.startLineFillColor,n.endLineFillColor=ht(e.endLineFillColor)?e.endLineFillColor:n.endLineFillColor,n.innerLineFillColor=ht(e.innerLineFillColor)?e.innerLineFillColor:n.innerLineFillColor,n.startSegmentFillColor=ht(e.startSegmentFillColor)?e.startSegmentFillColor:n.startSegmentFillColor,n.endSegmentFillColor=ht(e.endSegmentFillColor)?e.endSegmentFillColor:n.endSegmentFillColor,n.addedToBottom=ht(e.addedToBottom)?e.addedToBottom:n.addedToBottom,ht(i)&&ht(a))return n.startLinking=new Vn({draw:n.draw,orthogonalLine:n,segment:i}),n.endLinking=new Kn({draw:n.draw,orthogonalLine:n,segment:a}),n.cornerSegments=u.map(function(t){return n.createCornerSegment(t)}),n._initializeCornerSegments(),n._refreshLines(),n;if(c<2)throw"Orthgonal line: Require at lest 2 points!";if(c>=2){var p=o.map(sn(n)),l=Ht(p),f=zt(p);n.startLinking=new Vn({draw:n.draw,orthogonalLine:n,segment:l}),n.endLinking=new Kn({draw:n.draw,orthogonalLine:n,segment:f}),n.cornerSegments=p.filter(kt).filter(Ut),n._initializeCornerSegments(),n._refreshLines()}return n}return Xn(e,t),e.prototype.contain=function(t,e){return this.lines.some(function(n){return n.contain(t,e)})},Object.defineProperty(e.prototype,"startSegment",{get:function(){return this.startLinking.segment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endSegment",{get:function(){return this.endLinking.segment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segments",{get:function(){return[this.startSegment].concat(this.cornerSegments,[this.endSegment])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return[this.startLine].concat(this.innerLines,[this.endLine])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerSegments",{get:function(){return this.lines.map(function(t){return t.centerSegment})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSimpleLine",{get:function(){return 2===this.segments.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notSimpleLine",{get:function(){return!this.isSimpleLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=null,e=null,n=null,r=null;return this.segments.map(function(o){var i=o.x,a=o.y;g()(t)&&(t=i),ht(t)&&(t=Qn(i,t)),g()(e)&&(e=i),ht(e)&&(e=Jn(i,e)),g()(n)&&(n=a),ht(n)&&(n=Qn(a,n)),g()(r)&&(r=a),ht(r)&&(r=Jn(a,r))}),t=ht(t)?t:0,e=ht(e)?e:0,n=ht(n)?n:0,r=ht(r)?r:0,{left:t,right:e,top:n,bottom:r}},enumerable:!0,configurable:!0}),e.prototype.getNextLine=function(t){var e=function(t,e){for(var n=null,r=0;r<t.length;r++)t[r]===e&&(n=r);return n}(this.lines,t);return ht(e)?this.lines[e+1]:null},e.prototype.getPrevLine=function(t){var e=Bt(this.lines,t);return ht(e)?this.lines[e-1]:null},e.prototype.createStartSegment=function(t){return new Xe(Zn({draw:this.draw,orthogonalLine:this,fillColor:this.startSegmentFillColor},t))},e.prototype.createEndSegment=function(t){return new Xe(Zn({draw:this.draw,orthogonalLine:this,fillColor:this.endSegmentFillColor},t))},e.prototype.createCornerSegment=function(t){return new jn(Zn({draw:this.draw},t,{orthogonalLine:this,fillColor:"grey",draggable:!1,show:this.showCorner}))},e.prototype.createStartCenterSegment=function(t){return new Mn(Zn({draw:this.draw,orthogonalLine:this,show:this.showCenterSegment},t))},e.prototype.createEndCenterSegment=function(t){return new Un(Zn({draw:this.draw,orthogonalLine:this,show:this.showCenterSegment},t))},e.prototype.createEndInnerCenterSegment=function(t){return new Hn(Zn({draw:this.draw,orthogonalLine:this,show:this.showCenterSegment},t))},e.prototype.createStartLine=function(t){var e=this.isSimpleLine,n=this.showArrow;return new Sn(Zn({draw:this.draw},t,{orthogonalLine:this,fillColor:this.isSimpleLine?this.innerLineFillColor:this.startLineFillColor,draggable:!1,showArrow:!!e&&n,isPart:!0,shouldRenderInMiniMap:this.shouldRenderInMiniMap,addedToBottom:this.addedToBottom}))},e.prototype.createEndLine=function(t){var e=this.showArrow;return new Ln(Zn({draw:this.draw},t,{orthogonalLine:this,fillColor:this.endLineFillColor,showArrow:e,draggable:!1,isPart:!0,shouldRenderInMiniMap:this.shouldRenderInMiniMap,addedToBottom:this.addedToBottom}))},e.prototype.createInnerLine=function(t){return new Dn(Zn({draw:this.draw},t,{orthogonalLine:this,draggable:!1,fillColor:this.innerLineFillColor,isPart:!0,shouldRenderInMiniMap:this.shouldRenderInMiniMap,addedToBottom:this.addedToBottom}))},e.prototype.addCornerSegmentStart=function(t){var e=this.createCornerSegment(t);this.cornerSegments=[e].concat(this.cornerSegments)},e.prototype.addCornerSegmentEnd=function(t){var e=this.createCornerSegment(t);this.cornerSegments=this.cornerSegments.concat([e])},e.prototype.removeCornerSegment=function(t){Wt(this.cornerSegments,t),this.actions.REMOVE_ELEMENT(t)},e.prototype.removeCornerSegments=function(t){t.map(this.removeCornerSegment.bind(this))},e.prototype.addTmpStartLine=function(t){return this.createStartLine(t)},e.prototype.addTmpEndLine=function(t){return this.createEndLine(t)},e.prototype._createCornerSegmentBetween=function(t,e){this.segments;var n=t.x,r=t.y,o=e.x,i=e.y;if(n!==o&&r!==i){var a={x:n,y:i};return this.createCornerSegment(a)}},e.prototype._initializeCornerSegments=function(){var t=this,e=(this.segments.map(function(t){return t.point}),function(t){return t.map(function(t){return l(t)})}(this.segments.map(function(t){return t.point})));y(this.startSegment)&&e.map(function(e,n,r){if(It(n)){var o=r[n-1];if(un(o,e)){var i=t._createCornerSegmentBetween(o,e);y(i)&&t._insertCornerSegment(e,i)}}});var n=this.cornerSegments.filter(function(t,e,n){if(!jt(e)&&!Nt(e,n)){var r=Ft(n,e),o=function(t,e){return t[e+1]}(n,e),i=t.x,a=t.y,s=r.x,u=r.y,c=o.x,p=o.y;return i===s&&i===c||a===u&&a===p}return!1});this.removeCornerSegments(n)},e.prototype._insertCornerSegment=function(t,e){var n=Bt(this.segments.map(function(t){return t.id}),t.id);if(ht(n)){var r=n-1;this.cornerSegments.splice(r,0,e)}},e.prototype._refreshLines=function(){var t=this;this._removeLines();var e=this.segments,n=null,r=null,o=[];e.reduce(function(i,a,s){if(!g()(i)&&!g()(a)){if(1===s)n=t.createStartLine({sourceSegment:i,targetSegment:a});else if(Nt(s,e))r=t.createEndLine({sourceSegment:i,targetSegment:a});else{var u=t.createInnerLine({sourceSegment:i,targetSegment:a});o.push(u)}return a}}),this.startLine=n,this.endLine=r,this.innerLines=o},e.prototype._removeLines=function(){var t=this;this.lines.map(function(e){ht(e)&&(t.actions.REMOVE_ELEMENT(e.centerSegment),t.actions.REMOVE_ELEMENT(e))})},e.prototype.refresh=function(){this._refreshLines()},e.prototype.translateStartToPoint=function(t){ht(this.startSegment)&&this.startSegment.translateToPoint(t),this.refresh()},e.prototype.translateTargetToPoint=function(t){ht(this.endSegment)&&this.endSegment.translateToPoint(t),this.refresh()},e.prototype.render=function(){},e.prototype.updateCenterSegmentsPosition=function(){this.lines.map(function(t){return t.updateCenterSegmentPosition()})},e.prototype.select=function(){this.sharedActions.selectCells(this.lines),t.prototype.select.call(this)},e.prototype.updateDrag=function(t,e){if(this.draggable){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.sharedActions.translateSegments(this.segments,r,o),this.updateCenterSegmentsPosition()}},e.prototype.reGenerate=function(t){this.removeChildrenElements();var e=t.map(sn(this));e[0],e[e.length-1];this.cornerSegments=e.filter(kt).filter(Ut),this._initializeCornerSegments(),this._refreshLines()},e.prototype.removeChildrenElements=function(){this.actions.REMOVE_ELEMENTS(this.cornerSegments.concat(this.lines,this.centerSegments,[this.startLinking,this.endLinking])),this.startLinking=null,this.endLinking=null,this.cornerSegments=[]},e.prototype.forceRemove=function(){this.startLinking&&this.startLinking.forceRemove(),this.endLinking&&this.endLinking.forceRemove(),this.removeChildrenElements(),this.remove()},e.prototype.handleStartSegmentStopDrag=function(t){},e.prototype.handleEndSegmentStopDrag=function(t){},e.COMBINE_INTERVAL=10,e}(Oe),$n=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tr=function(t){function e(e){var n=t.call(this,function(t){return t.showCenterSegment=!1,t.showCorner=!1,t.startLineFillColor=Dt,t.endLineFillColor=Dt,t.innerLineFillColor=Dt,t.shouldRenderInMiniMap=!0,t.addedToBottom=!0,t}(e))||this;return n.shouldRenderInMiniMap=!0,n}return $n(e,t),e.prototype.updateDrag=function(){},e}(qn),er=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nr=function(t){function e(e){var n=t.call(this,function(t){var e=t.node,n=t.operation,r=function(t,e){var n=t.rightLinking,r=e.centerLinking,o=(n.x,n.y),i=r.x;r.y;return[{x:i,y:o}]}(e,n);return t.startSegment=e.rightLinking,t.endSegment=n.centerLinking,t.corners=r,t.showArrow=!1,t}(e))||this,r=e.node,o=e.operation;return n.node=ht(r)?r:n.node,n.node.rightLinking.setSingleOperationLink(n),n.operation=ht(o)?o:n.operation,n.startLine.getErasingPath2d=function(){return r.path2d},n.endLine.getErasingPath2d=function(){return r.path2d},n}return er(e,t),e.prototype.translateVerticalLine=function(t){this.cornerSegments.map(function(e){var n=e.x,r=e.y,o=n+t;e.translateToPoint({x:o,y:r})})},e.prototype.translateVerticalLineToX=function(t){this.cornerSegments.map(function(e){var n=e.y;e.translateToPoint({x:t,y:n})})},e}(tr),rr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),or=Math.min,ir=Math.max,ar=function(t){function e(e){var n=t.call(this,function(t){return t}(e))||this;n.type=mt,n.operation=null,n.links=[];var r=e.operation;return r.nodes.map(function(t){var e=new nr({draw:n.draw,node:t,operation:r});n.links.push(e),t.rightLinking.setOperationLink(n)}),n.operation=ht(e.operation)?e.operation:n.operation,n.operation.centerLinking.setOperationLink(n),n}return rr(e,t),Object.defineProperty(e.prototype,"identityClass",{get:function(){return"link"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodes",{get:function(){return this.links.map(function(t){return t.node})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.links.map(function(t){return t.bounds});return{left:or.apply(void 0,t.map(function(t){return t.left})),right:ir.apply(void 0,t.map(function(t){return t.right})),top:or.apply(void 0,t.map(function(t){return t.top})),bottom:ir.apply(void 0,t.map(function(t){return t.bottom}))}},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){return this.links.some(function(n){return n.contain(t,e)})},e.prototype.select=function(){this.sharedActions.selectCells(this.links),this.sharedActions.selectCells(this.nodes),this.operation.select(),t.prototype.select.call(this)},e.prototype.updateDrag=function(t,e){var n=this;if(this.draggable){var r=this.getters.getInitialPoint(t),o=e.getDeltaXToPrevPoint(r),i=e.getDeltaYToPrevPoint(r);this.links.map(function(t){var e=t.cornerSegments;n.sharedActions.translateSegments(e,o,i)})}},e.prototype.translateVerticalLine=function(t){this.links.map(function(e){return e.translateVerticalLine(t)})},e.prototype.translateVerticalLinesToX=function(t){this.links.map(function(e){return e.translateVerticalLineToX(t)})},e.prototype.resetOperation=function(){this.operation=null},e.prototype.remove=function(){this.links.map(function(t){return t&&t.forceRemove()}),t.prototype.remove.call(this)},e.END_LINE_LENGTH=10,e}(Xt),sr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ur=function(t){function e(e){return t.call(this,function(t){var e=t.path,n=e.cy,r=e.bounds.left;return t.x=r,t.y=n,t.fillColor="blue",t}(e))||this}return sr(e,t),e}(Qe),cr=Math.min,pr=Math.max;function lr(t){return fr(t.map(function(t){return t.bounds}))}function fr(t){return{left:cr.apply(void 0,t.map(function(t){return t.left})),right:pr.apply(void 0,t.map(function(t){return t.right})),top:cr.apply(void 0,t.map(function(t){return t.top})),bottom:pr.apply(void 0,t.map(function(t){return t.bottom}))}}function hr(t){var e=t.left,n=t.top,r=t.right,o=t.bottom,i=Zt({left:e,top:n,right:r,bottom:o}),a=i.leftTop,s=i.rightTop,u=i.rightBottom,c=i.leftBottom;return Qt([a,s,u,c])}function dr(t,e){try{var n=t.dsElements.map(function(t){return t.id}),r=e.dsElements.map(function(t){return t.id});return n.length===r.length&&n.every(function(t,e){return t===r[e]})}catch(t){}return!1}function gr(t){var e=t[0];return e?e.bounds.right+_r.DATA_TO_OPERATION_CENTER:null}var yr,vr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),br=Math.min,mr=Math.max,_r=(Math.abs,function(t){function e(n,r){var o=t.call(this,n)||this;o.type=Pt;var i=r.nodes,a=r.resultNode,s=null;return a&&a.operation&&(s=new e({draw:o},a.operation)),o.data=i,o.operation=r,o.result=a,o.resultFlow=s,o}return vr(e,t),Object.defineProperty(e.prototype,"operationLink",{get:function(){return this.operation.operationLink},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsElements",{get:function(){return this.data.concat([this.operation,this.result]).filter(ht)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortedData",{get:function(){return this.data.slice().sort(function(t,e){var n=t.bounds.top,r=e.bounds.top;return n-r})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataBounds",{get:function(){var t=this.data.map(function(t){return t.bounds});return{left:br.apply(void 0,t.map(function(t){return t.left})),right:mr.apply(void 0,t.map(function(t){return t.right})),top:br.apply(void 0,t.map(function(t){return t.top})),bottom:mr.apply(void 0,t.map(function(t){return t.bottom}))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataBorderPath",{get:function(){return hr(this.dataBounds)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsPath",{get:function(){return hr(this.bounds)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mostTopDataElement",{get:function(){return Ht(this.sortedData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mostBottomDataElement",{get:function(){return zt(this.sortedData)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"twoSideNodesCenter",{get:function(){return function(t){var e=t.length,n=t.reduce(function(t,e){var n=t.x,r=t.y,o=e.x,i=e.y;return{x:n+o,y:r+i}});return{x:n.x/e,y:n.y/e}}([this.mostTopDataElement,this.mostBottomDataElement].filter(ht).map(function(t){return t.itemCenter}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.dsElements.map(function(t){return t.bounds});return{left:br.apply(void 0,t.map(function(t){return t.left})),right:mr.apply(void 0,t.map(function(t){return t.right})),top:br.apply(void 0,t.map(function(t){return t.top})),bottom:mr.apply(void 0,t.map(function(t){return t.bottom}))}},enumerable:!0,configurable:!0}),e.prototype.contain=function(){},e.prototype.render=function(){var t=this.getters.ctx,e=(this.dataBorderPath,this.boundsPath);t.strokeStyle="rgba( 255, 255, 255, 0.1 )",t.stroke(e)},e.prototype.format=function(){this.formatSortedData(),this.formatOperationLink(),this.formatOperation(),this.formatResult()},e.prototype.formatSortedData=function(){var t=this.mostTopDataElement,n=this.sortedData,r=e.DATA_ELEMENT_INTERVAL,o=0,i={x:0,y:0};t&&(i=t.itemCenter),n.map(function(e,n,a){if(e!==t){var s=Ft(a,n),u=s?s.height/2:0,c=e.height/2;o=o+r+u+c;var p=i.x,l=i.y,f={x:p,y:l+o};e.translateCenterToPoint(f)}})},e.prototype.formatOperation=function(){e.DATA_TO_OPERATION_CENTER;var t=this.operation,n=this.twoSideNodesCenter,r=this.data,o=void 0===r?[]:r,i=(n.x,n.y),a=gr(o)||null,s={x:a,y:i};ht(a)&&t.translateCenterToPoint(s)},e.prototype.formatOperationLink=function(){e.DATA_TO_OPERATION_CENTER,this.operation;var t=this.twoSideNodesCenter,n=this.data,r=(t.x,t.y,gr(n)||null);ht(r)&&this.operationLink.translateVerticalLinesToX(r)},e.prototype.formatResult=function(){var t=this.result;if(t){var n=this.operation,r=e.OPERATION_CENTER_TO_RESULT,o=n.itemCenter,i={x:o.x+r,y:o.y};t.translateCenterToPoint(i)}},e.prototype.translate=function(t,e){this.data.map(function(n){return n.translate(t,e)}),this.operation&&this.operation.translate(t,e),this.result&&this.result.translate(t,e)},e.prototype.forceRemove=function(){var t=this.data,e=this.operation,n=this.result,r=this.resultFlow;this.actions.REMOVE_ELEMENTS(t.concat([e,n,r])),this.remove()},e.DATA_ELEMENT_INTERVAL=100,e.DATA_TO_OPERATION_CENTER=100,e.OPERATION_CENTER_TO_RESULT=200,e}(Xt)),Pr={WAITING:0,PROCESSING:5,SUCCESS:10,FAILURE:15,INVALID:20},Or={},Er=((yr={})[Pr.SUCCESS]=function(){return Or.STATUS_COMPLETE},yr[Pr.FAILURE]=function(){return Or.STATUS_ERROR},yr[Pr.PROCESSING]=function(){return Or.STATUS_LOADING},yr[Pr.INVALID]=function(){return Or.STATUS_NOT_RUNNING},yr[Pr.WAITING]=function(){return Or.STATUS_WAITING},yr),Sr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tr=22,wr=function(t){function e(n){var r=t.call(this,function(t){return t.src=Or.FILE_RESULT_SET_TEMPORARY,t}(n))||this;r.type=bt,r.stateIconSrc=Er[Pr.WAITING](),r.renderFnInMiniMap=function(){var t=r.getters.ctx;t.fillStyle="#007ee4",r.path2d&&t.fill(r.path2d)},r.sourceOperation=ht(n.sourceOperation)?n.sourceOperation:r.sourceOperation;var o=e.INFO_TEXT_MARGIN_TOP,i=nn.TITLE_TEXT_COLOR,a=nn.TITLE_TEXT_MARGIN_TOP,s=Re.DEFAULT_FONT_SIZE,u=r.segmentsCenter.x,c=r,p=(c.left,c.stateIconSrc),l=r.bounds,f=l.bottom;l.right,l.top;r.infoText=new Re({draw:r.draw,draggable:!1,x:u,y:f+a+s+o/2+o,text:"",fillColor:i}),r.stateIcon=new qt({draw:r.draw,draggable:!1,src:p,show:!1,width:Tr}),r.leftLinking=new ur({draw:r.draw,path:r}),r.bindDrag(),r.image.interfaceOnImageLoaded=function(){var t=r.image.bounds,e=t.top,n=t.right;r.stateIcon.updateLeft(n-Tr/2),r.stateIcon.updateTop(e-Tr/2),r.stateIcon.show=!0};var h=r.data,d=h.status,y=h.name;return ht(d)&&r.updateDataStatus(d),g()(y)&&r.titleText.updateText("Result Node"),r}return Sr(e,t),Object.defineProperty(e.prototype,"sourceResultLink",{get:function(){return this.sourceOperation.resultLink},enumerable:!0,configurable:!0}),e.prototype.setSourceOperation=function(t){this.sourceOperation=t},e.prototype.bindDrag=function(){t.prototype.bindDrag.call(this),this.infoText.dragger.interfaceDragging=this.updateDrag.bind(this),this.stateIcon.dragger.interfaceDragging=this.updateDrag.bind(this),this.leftLinking.dragger.interfaceDragging=this.updateDrag.bind(this)},e.prototype.translate=function(e,n){t.prototype.translate.call(this,e,n),this.infoText.translate(e,n),this.stateIcon.translate(e,n),this.leftLinking.translate(e,n)},e.prototype.select=function(){this.leftLinking.select(),t.prototype.select.call(this)},e.prototype.updateDataStatus=function(t){var e=Er[t]();this.stateIconSrc=e,this.stateIcon.udpateSrc(e)},e.prototype.remove=function(){this.infoText&&this.infoText.remove(),this.stateIcon&&this.stateIcon.remove(),this.leftLinking&&this.leftLinking.remove(),t.prototype.remove.call(this)},e.prototype.forceRemove=function(){this.sourceResultLink&&this.sourceResultLink.remove(),this.remove()},e.MARGIN=_r.OPERATION_CENTER_TO_RESULT,e.INFO_TEXT_MARGIN_TOP=4,e}(nn),Lr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xr=function(t){function e(e){var n=t.call(this,function(t){var e=t.operation,n=t.resultNode;return t.sourceSegment=e.rightLinking,t.targetSegment=n.leftLinking,t.showArrow=!1,t.shouldRenderInMiniMap=!0,t.fillColor=Dt,t.addedToBottom=!0,t.getErasingPath2d=function(){return n.path2d},t}(e))||this;return n.type=_t,n.operation=null,n.resultNode=null,n.renderFnInMiniMap=function(){var t=n.getters.ctx;t.lineWidth=5,t.fillStyle="#2aaffa",t.strokeStyle="#2aaffa",n.hitRegionPath2d&&t.fill(n.hitRegionPath2d),n.hitRegionPath2d&&t.stroke(n.hitRegionPath2d)},n.operation=ht(e.operation)?e.operation:n.operation,n.resultNode=ht(e.resultNode)?e.resultNode:n.resultNode,n}return Lr(e,t),Object.defineProperty(e.prototype,"identityClass",{get:function(){return"link"},enumerable:!0,configurable:!0}),e.prototype.updateDrag=function(t,e){},e.prototype.select=function(){t.prototype.select.call(this),this.operation&&this.operation.select(),this.resultNode&&this.resultNode.select()},e}(mn),Cr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dr=Math.sin,Ar=Math.cos,jr=Math.PI,Ir=function(t){function e(n){var r=t.call(this,function(t){var n=t.x,r=void 0===n?e.DEFAULT_CX:n,o=t.y,i=void 0===o?e.DEFAULT_CY:o,a=t.radius,s=void 0===a?e.DEFAULT_RADIUS:a,u=2*s,c=(Ar(jr/6),Dr(jr/6),Zt({left:r-s,top:i-s,width:u,height:u}));c.topCenter,c.leftBottom,c.rightBottom,c.leftCenter,c.rightCenter,c.bottomCenter;return t.points=function(t,e,n,r){void 0===r&&(r=6);for(var o=[],i=0;i<r;i++){var a=2*i*jr/r;o.push({x:t+n*Ar(a),y:e+n*Dr(a)})}return o}(r,i,s),t.sizable=!1,t.defaultSegmentHandleLength=.35726558990816404*s,t.curveUsesCanvasApi=!0,t}(n))||this;r.type=L,r.x=e.DEFAULT_CX,r.y=e.DEFAULT_CY,r.radius=e.DEFAULT_RADIUS;var o=n.x,i=n.y,a=n.radius;return r.x=ht(o)?o:r.x,r.y=ht(i)?i:r.y,r.radius=ht(a)?a:r.radius,r.sizable=ht(n.sizable)?n.sizable:r.sizable,r.rotatable=ht(n.rotatable)?n.rotatable:r.rotatable,r.sharedActions.hideSegments(r.segments),r}return Cr(e,t),e.prototype.translate=function(e,n){t.prototype.translate.call(this,e,n),this.x=this.x+e,this.y=this.y+n},e.DEFAULT_CX=0,e.DEFAULT_CY=0,e.DEFAULT_RADIUS=200,e}(Ae),Nr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rr=function(t){function e(e){return t.call(this,function(t){var e=t.path,n=(e.cy,e.bounds),r=n.left,o=n.right,i=n.bottom,a=n.top;return t.x=(r+o)/2,t.y=(i+a)/2,t.fillColor="blue",t}(e))||this}return Nr(e,t),e}(Qe),Mr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kr=function(t){function e(e){var n=t.call(this,function(t){return t.show=!1,t}(e))||this;return n.operationLink=null,n}return Mr(e,t),Object.defineProperty(e.prototype,"operationOrthogonalLines",{get:function(){return this.operationLink.links},enumerable:!0,configurable:!0}),e.prototype.setOperationLink=function(t){this.operationLink=t},e.prototype.translate=function(e,n){var r=this,o=this.operationOrthogonalLines,i=Mt(o),a=this.operationLink.shouldSelect;i&&o.map(function(t){var o=r,i=o.x,s=o.y,u=t.endLinking;!a&&u&&u.translateLinkingToPoint({x:i+e,y:s+n})}),t.prototype.translate.call(this,e,n)},e}(Rr),Ur=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Br=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hr=(Math.PI,function(t){function e(n){var r=t.call(this,function(t){var n=e.DEFAULT_RADIUS,r=_r.DATA_TO_OPERATION_CENTER,o=t.nodes,i=void 0===o?[]:o,a=t.radius;a=ht(a)?a:n;var s=Ht(i),u=i.map(function(t){var e=t.segmentsCenter;return e}),c=an(u).y,p=r+(ht(s)?s.bounds.right:0);return t.radius=a,t.x=p,t.y=c,t.sizable=!1,t.fillColor=xt,t.strokeColor=Ct,t}(n))||this;r.type=_,r.operationType=null,r.data=null,r.nodes=[],r.hovering=!1,r.renderFnInMiniMap=function(){};var o=n.nodes,i=e.DEFAULT_ICON_WIDTH;e.DEFAULT_ICON_HEIGHT;r.src=ht(n.src)?n.src:r.src,r.nodes=ht(o)?o:r.nodes,r.operationType=ht(n.operationType)?n.operationType:r.operationType,r.data=ht(n.data)?n.data:r.data;var a=r,s=a.x,u=a.y;return r.image=new qt({draw:r.draw,draggable:!1,src:r.src,x:s,y:u,width:i}),r.centerLinking=new kr({draw:r.draw,path:r}),r.rightLinking=new qe({draw:r.draw,path:r}),r.operationLink=new ar({draw:r.draw,operation:r}),r}return Ur(e,t),Object.defineProperty(e.prototype,"identityClass",{get:function(){return _},enumerable:!0,configurable:!0}),e.prototype.updateData=function(t){this.data=t},e.prototype.createResultNode=function(t){void 0===t&&(t={});var e=this.draw;if(g()(this.resultNode)){var n=this.cy,r=this.bounds.right;return this.resultNode=e.createResultNode(Br({draw:this.draw,x:r+nn.DEFAULT_WIDTH/2+wr.MARGIN,y:n,sourceOperation:this},t)),this.resultLink=new xr({draw:this.draw,operation:this,resultNode:this.resultNode}),this.resultNode}},e.prototype.connectToResultNode=function(t){if(g()(this.resultNode)&&ht(t))return this.resultNode=t,t.setSourceOperation(this),this.resultLink=new xr({draw:this.draw,operation:this,resultNode:this.resultNode}),t},e.prototype.removeResultNode=function(){this.resultNode&&this.resultNode.remove(),this.resultLink&&this.resultLink.remove(),this.resultNode=null,this.resultLink=null},e.prototype.regenerateResultNode=function(t){return void 0===t&&(t={}),this.removeResultNode(),this.createResultNode(t)},e.prototype.handleMouseIn=function(){var t=e.HOVERING_RADIUS,n=e.DEFAULT_RADIUS;this.hovering=!0;var r=t/n;this.size(r,r,this.itemCenter),this.image.sizeOnCenter(r,r)},e.prototype.handleMouseOut=function(){this.hovering=!0,this.size(1,1,this.itemCenter),this.image.sizeOnCenter(1,1)},e.prototype.updateDrag=function(t,e){var n=this.getters.getInitialPoint(t),r=e.getDeltaXToPrevPoint(n),o=e.getDeltaYToPrevPoint(n);this.translate(r,o)},e.prototype.bindDrag=function(){this.image.dragger.interfaceDragging=this.updateDrag.bind(this),this.centerLinking.dragger.handleDragging=this.updateDrag.bind(this),this.rightLinking.dragger.interfaceDragging=this.updateDrag.bind(this)},e.prototype.translate=function(e,n){t.prototype.translate.call(this,e,n),this.image.translate(e,n),this.centerLinking.translate(e,n),this.rightLinking.translate(e,n)},e.prototype.translateCenterToPoint=function(t){var e=this.itemCenter,n=e.x,r=e.y,o=t.x-n,i=t.y-r;this.translate(o,i)},e.prototype.render=function(){var t=this.getters.ctx,e=this,n=e.fillColor,r=e.strokeColor,o=e.shouldSelect,i=e.path2d;e.hovering;o&&(t.fillStyle="#00BEAA",t.fill(i),t.lineWidth=6,t.strokeStyle="rgba(0,190,170,0.30)",t.stroke(i)),o||(t.fillStyle=n,t.fill(i),t.lineWidth=1,t.strokeStyle=r,t.stroke(i))},e.prototype.remove=function(){this.operationLink.resetOperation(),this.actions.REMOVE_ELEMENTS([this.image,this.operationLink,this.centerLinking,this.resultNode,this.resultLink,this.rightLinking]),t.prototype.remove.call(this)},e.DEFAULT_RADIUS=20,e.HOVERING_RADIUS=23,e.DEFAULT_ICON_WIDTH=24,e.DEFAULT_ICON_HEIGHT=24,e}(Ir)),zr={FILTER:"FILTER",UNION:"UNION",INTERSECT:"INTERSECT",INTERSECT_MULTI:"INTERSECT_MULTI",SUBTRACT:"SUBTRACT",SUBTRACT_MULTI:"SUBTRACT_MULTI",INTERSECT_TWO:"INTERSECT_TWO",SUBSET:"SUBSET",RELATE:"RELATE"},Fr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wr=function(t){function e(e){var n=t.call(this,function(t){var e=zr.UNION;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return Fr(e,t),e}(Hr),Gr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vr=function(t){function e(e){var n=t.call(this,function(t){var e=zr.INTERSECT;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return Gr(e,t),e}(Hr),Yr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kr=function(t){function e(e){var n=t.call(this,function(t){var e=zr.FILTER;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return Yr(e,t),e}(Hr),Xr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zr=function(t){function e(e){var n=t.call(this,function(t){var e=zr.INTERSECT_MULTI;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return Xr(e,t),e}(Hr),Qr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jr=function(t){function e(e){var n=t.call(this,function(t){var e=zr.SUBTRACT;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return Qr(e,t),e}(Hr),qr=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$r=function(t){function e(e){var n=t.call(this,function(t){var e=zr.SUBTRACT_MULTI;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return qr(e,t),e}(Hr),to=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eo=function(t){function e(e){var n=t.call(this,function(t){var e=zr.INTERSECT_TWO;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return to(e,t),e}(Hr),no=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ro=function(t){function e(e){var n=t.call(this,function(t){var e=zr.SUBSET;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return no(e,t),e}(Hr),oo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),io=function(t){function e(e){var n=t.call(this,function(t){var e=zr.RELATE;return t.src=Or[e],t.operationType=e,t}(e))||this;return n.bindDrag(),n}return oo(e,t),e}(Hr),ao=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),so=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return ao(e,t),Object.defineProperty(e.prototype,"ds",{get:function(){return this.store.ds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsElementsList",{get:function(){return this.nodesList.concat(this.linksList,this.operationsList)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dsElementsInSelectorRegion",{get:function(){var t=this;return this.dsElementsList.filter(function(e){return yt(e,t.selector)})},enumerable:!0,configurable:!0}),e.prototype.getTopDsElement=function(t){var e=t.x,n=t.y,r=this.dsElementsList.filter(function(t){return t.contain(e,n)});return r[r.length-1]},Object.defineProperty(e.prototype,"nodesList",{get:function(){return this.store.cellList.filter(function(t){return"node"===t.identityClass})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataNodeList",{get:function(){return this.nodesList.filter(function(t){return t.type===vt})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resultNodeList",{get:function(){return this.nodesList.filter(function(t){return t.type===bt})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nodesInSelectorRegion",{get:function(){var t=this;return this.nodesList.filter(function(e){return yt(e,t.selector)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linksList",{get:function(){return this.store.cellList.filter(function(t){return"link"===t.identityClass})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linksInSelectorRegion",{get:function(){var t=this;return this.linksList.filter(function(e){return yt(e,t.selector)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"operationsList",{get:function(){return this.store.cellList.filter(function(t){return t.identityClass===_})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"operationsInSelectorRegion",{get:function(){var t=this;return this.operationsList.filter(function(e){return yt(e,t.selector)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"operationTypesMap",{get:function(){var t,e=zr.FILTER,n=zr.UNION,r=zr.INTERSECT,o=zr.INTERSECT_MULTI,i=zr.SUBTRACT,a=zr.SUBTRACT_MULTI,s=zr.INTERSECT_TWO;return(t={})[e]=Kr,t[n]=Wr,t[r]=Vr,t[o]=Zr,t[i]=Jr,t[a]=$r,t[s]=eo,t.SUBSET=ro,t.RELATE=io,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedDsElements",{get:function(){return this.dsElementsList.filter(function(t){return!0===t.shouldSelect})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedDsElementsDraggerEnabled",{get:function(){return this.selectedDsElements.filter(function(t){return!0===t.dragger.enable})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteredSelectedDsElementsDraggerEnabled",{get:function(){var t,e=[],n=this.selectedDsElementsDraggerEnabled.filter(function(t){return t.type===mt}),r=this.selectedDsElementsDraggerEnabled.filter(function(t){return t.type===_t});e=function(t){var e=[];return t.map(function(t){var n=t.nodes,r=t.operation;e=e.concat(n,[r])}),e}(n),t=function(t){var e=[];return t.map(function(t){var n=t.resultNode,r=t.operation;e=e.concat([n,r])}),e}(r);e.concat(t);return this.selectedDsElementsDraggerEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedSingleNodes",{get:function(){return this.selectedDsElements.filter(function(t){var e=t.identityClass,n=t.isSingleNode;return"node"===e&&n})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedDataNodes",{get:function(){return this.selectedDsElements.filter(function(t){return t.type===vt})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedOperations",{get:function(){return this.selectedDsElements.filter(function(t){return t.type===_})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedResultNodes",{get:function(){return this.selectedDsElements.filter(function(t){return t.type===bt})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onlySingleNodesSelected",{get:function(){return this.selectedDsElements.every(function(t){var e=t.isSingleNode,n=t.identityClass;return e&&"node"===n})},enumerable:!0,configurable:!0}),e.prototype.pointOnDeselectedDsElement=function(t){var e=this.getTopDsElement(t);return ht(e)&&!1===e.shouldSelect},e.prototype.pointOnSelectedDsElement=function(t){var e=this.getTopDsElement(t);return ht(e)&&!0===e.shouldSelect},Object.defineProperty(e.prototype,"imageUrls",{get:function(){return this.store.setting.imageUrls||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportingDataNodes",{get:function(){return this.dataNodeList.filter(function(t){return t.exportable}).map(function(t){var e={};return q()(t,function(t,n){(St(t)||nt()(t))&&(e[n]=t)}),e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportingOperations",{get:function(){return this.operationsList.filter(function(t){return t.exportable}).map(function(t){var e={};return q()(t,function(t,n){(St(t)||nt()(t))&&(e[n]=t),"nodes"===n&&(e.nodesIds=t.map(function(t){return t.id}))}),e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportingResultNodes",{get:function(){return this.resultNodeList.filter(function(t){return t.exportable}).map(function(t){var e={};return q()(t,function(t,n){(St(t)||nt()(t))&&(e[n]=t),"sourceOperation"===n&&(e.operationId=t.id)}),e})},enumerable:!0,configurable:!0}),e.prototype.getExportingAbbreviationUrl=function(t,e){void 0===t&&(t=500),void 0===e&&(e=500);var n=null;try{var r=this,o=r.canvas,i=(r.canvasLeft,r.canvasTop,r.canvasWidth),a=r.canvasHeight,s=r.miniMap,u=r.viewPort,c=this.store.formatter,p=this.miniMap.shouldRender,l=u.zoom,f=u.center;this.miniMap.enableRender(),c.centerViewport(),c.removeFlowsChains(),this.ds.render();var h=s.viewBox,d=(function(t,e,n,r){var o={width:t,height:e},i=t/n,a=e/r,s=i;i>1&&a>1?(o.width=n,o.height=r):(s=i<a?i:a,o.width=n*s,o.height=r*s)}(t,e,i,a),h.basicWidth),g=h.basicHeight,y=document.createElement("canvas");y.style.position="absolute",y.style.left="0px",y.style.bottom="0px",document.body.appendChild(y);var v=y.getContext("2d");y.setAttribute("width",""+d),y.setAttribute("height",""+g),v.drawImage(o,h.basicLeft,h.basicTop,d,g,0,0,d,g),n=y.toDataURL();return y.remove(),u.update(l,f),this.miniMap.shouldRender=p,this.ds.render(),n}catch(t){console.log(t)}return n},e.prototype.getExportingData=function(t,e){void 0===t&&(t=500),void 0===e&&(e=500);var n=this.store,r=n.rootId,o=n.viewPort,i=o.zoom,a=o.center;return{rootId:r,dataNodes:this.exportingDataNodes,operations:this.exportingOperations,resultNodes:this.exportingResultNodes,zoom:i,center:a,abbreviationUrl:this.getExportingAbbreviationUrl(t,e)}},e}(gt),uo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),co=function(t){function e(e){var n=t.call(this,e)||this;return n.scalable=!0,n}return uo(e,t),e.prototype.render=function(){this.getters.ctx;t.prototype.render.call(this)},e}(ke),po=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lo=function(t){function e(e){var n=t.call(this,e)||this;return n.type=w,n.x=0,n.y=0,n.rotatable=!1,n.x=e.x,n.y=e.y,n}return po(e,t),Object.defineProperty(e.prototype,"R",{get:function(){return 5},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SizeContainer",{get:function(){var t=this.x,e=this.y,n=this.R/2;return new te({points:[{x:t-n,y:e-n},{x:t+n,y:e-n},{x:t+n,y:e+n},{x:t-n,y:e+n}],target:this,draw:this.draw})},enumerable:!0,configurable:!0}),e.prototype.translate=function(t,e){var n=function(t,e,n){return{x:t.x+e,y:t.y+n}}({x:this.x,y:this.y},t,e);this.x=n.x,this.y=n.y},e.prototype.render=function(){var e=this.getters.ctx;t.prototype.render.call(this),e.save(),e.fillStyle=this.fill,e.restore()},e.prototype.contain=function(t,e){},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.getters.getInitialPoint(t),n=this.dragger.getDeltaXToPrevPoint(e),r=this.dragger.getDeltaYToPrevPoint(e);this.translate(n,r)}},e}(co),fo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ho=function(t){function e(e){return t.call(this,e)||this}return fo(e,t),e}(lo),go=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yo=function(t){function e(e){var n=t.call(this,e)||this;return n.type=O,n.shouldRenderInMiniMap=!0,n}return go(e,t),e}(Ae),vo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bo=function(t){function e(e){var n=t.call(this,e)||this;return n.type=T,n}return vo(e,t),Object.defineProperty(e.prototype,"twoPointsLines",{get:function(){return this.sharedGetters.getTwoPointsLine(this.points)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRegionPath2d",{get:function(){var t=this.lineWidth,e=new Path2D;return this.twoPointsLines.map(function(n){var r=gn(n.source,n.target,t),o=r.leftTop,i=r.rightTop,a=r.rightBottom,s=r.leftBottom;Qt([o,i,a,s],e)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetArrowPath2d",{get:function(){var t=this.segments.length,e=this.segments[t-2].point,n=this.target.point,r=yn(e,n,20),o=r.top,i=r.right,a=r.bottom,s=r.left;return Qt([o,i,a,s])},enumerable:!0,configurable:!0}),e}(mn),mo=function(){var t;return(t={}).segment=Xe,t[E]=Ie,t[S]=mn,t[T]=bo,t["orthogonal-line"]=qn,t[w]=lo,t[O]=yo,t[L]=Ir,t[x]=Re,t.image=qt,t[j]=ho,t},_o=["angle","draggable","fill","height","id","shouldSelect","left","type","top","width"],Po=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Oo=function(){function t(t,e){this.drawStore=t,this.getters=e}return Object.defineProperty(t.prototype,"sharedActions",{get:function(){return this.getters.draw.sharedActions},enumerable:!0,configurable:!0}),t.prototype.UPDATE_STORE=function(t){var e=F()(t);Object.keys(t).map(function(n){t[n]=e[n]})},t.prototype.UPDATE_DRAW=function(t){this.drawStore.draw=t},t.prototype.UPDATE_CANVAS=function(t){this.drawStore.canvas=t,this.getters.setCtx(t.getContext("2d"))},t.prototype.UPDATE_TMP_CANVAS=function(t){this.drawStore.tmpCanvas=t,this.getters.setTmpCtx(t.getContext("2d"))},t.prototype.INTIALIZE_DRAW_ROOT_ID=function(){this.drawStore.rootId=this.getters.generateUniqueDrawRootId()},t.prototype.UPDATE_DRAW_ROOT_ID=function(t){this.drawStore.rootId=t},t.prototype.UPDATE_SETTING=function(t){this.drawStore.setting=t},t.prototype.UPDATE_VIEWPORT=function(t){this.drawStore.viewPort=t},t.prototype.UPDATE_RENDERER=function(t){this.drawStore.renderer=t},t.prototype.UPDATE_SELECTOR=function(t){this.drawStore.selector=t},t.prototype.UPDATE_INTERACTION=function(t){this.drawStore.interaction=t},t.prototype.UPDATE_MINIMAP=function(t){this.drawStore.miniMap=t},t.prototype.UPDATE_GRID=function(t){this.drawStore.grid=t},t.prototype.UPDATE_TEST_UTILS=function(t){this.drawStore.testUtils=t},t.prototype.UPDATE_TEXT_INPUT=function(t){this.drawStore.textInput=t},t.prototype.ADD_ELEMENT=function(t,e,n,r){var o=mo()[e];if(!g()(o)){var i=new o(Po({draw:t},n));i.exportable=!0;var a=function(t){var e={};return q()(t,function(t,n){(nt()(t)||ot()(t)||ut()(t)||at()(t)||pt()(t)||g()(t))&&(e[n]=t)}),e}(i),s=Po({__instance__:i},a);return g()(r)&&this.getters.storeActiveElements.push(s),g()(r)||this.getters.getStoreElementsByPanelId(r).push(s),i}console.log('Type not found: "'+e+'"')},t.prototype.REMOVE_ELEMENT=function(t){ht(t)&&Wt(this.getters.cellList,t)},t.prototype.REMOVE_ELEMENTS=function(t){t.map(function(t){return t&&t.remove()}),t.map(this.REMOVE_ELEMENT.bind(this))},t.prototype.ADD_PANEL=function(t){this.getters.storePanels.push({id:this.getters.generateUniqueDrawElementId(),name:t,elements:[]})},t.prototype.MODIFY_ACTIVE_PANEL_ID=function(t){this.drawStore.activePanelId=t},t.prototype.ADD_ELEMENT_TO_CELL_LIST=function(t){var e=t.addedToBottom,n=void 0!==e&&e;!n&&this.drawStore.cellList.push(t),n&&this.drawStore.cellList.unshift(t)},t.prototype.UPDATE_STORE_ELEMENTS_BY_THEIR_INSTANCES=function(){this.drawStore.panels.map(function(t,e){t.elements.map(function(t){return function(e,n){var r=e.__instance__;if(y(r)){var o=Object.keys(r),i=Q()(o,_o);i.map(function(t,e){return function(n){this.drawStore.panels[t].elements[e][n]=this.drawStore.panels[t].elements[e].__instance__[n]}}(t,n))}}}(e))})},t.prototype.UPDATE_SYNC_STORE_ROOT_ID=function(t){this.drawStore.syncStore.rootId=t},t.prototype.REFRESH_SYNC_STORE_ROOT_ID=function(){var t=this.drawStore.rootId;this.UPDATE_SYNC_STORE_ROOT_ID(t)},t.prototype.UPDATE_SYNC_STORE_ELEMENTS=function(t){this.drawStore.syncStore.elements=t},t.prototype.REFRESH_SYNC_STORE_ELEMENTS=function(){var t=[];this.drawStore.cellList.filter(function(t){return t.exportable}).map(function(e){var n={__instance__:null,data:null};return n.data=function(t){var e={};return q()(t,function(t,n){St(t)&&(e[n]=t)}),e}(e),t.push(n),n}),this.UPDATE_SYNC_STORE_ELEMENTS(t)},t.prototype.START_DRAG_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);this.sharedActions.startDragCell(n,t)},t.prototype.START_DRAG_CELLS_SHOULD_SELECT=function(t){var e=this;this.getters.cellsShouldSelect.map(function(n){e.sharedActions.startDragCell(n,t)})},t.prototype.DRAGGING_CELLS_SHOULD_DRAG=function(t){var e=this;this.getters.cellsShouldDrag.map(function(n){e.sharedActions.draggingCell(n,t)})},t.prototype.STOP_DRAG_CELLS_SHOULD_DRAG=function(t){var e=this;this.getters.cellsShouldDrag.map(function(n){e.sharedActions.stopDragCell(n,t)})},t.prototype.CLICK_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);y(n)&&this.sharedActions.clickCell(n,t)},t.prototype.HOVER_MOST_TOP_CELL_FOCUSED=function(t,e){var n=this.getters.getInitialPoint(t),r=this.getters.getTopCell(n),o=e.prevHovingDsElement;r&&r!==o&&this.sharedActions.mouseInCell(r,t),o&&r!==o&&this.sharedActions.mouseOutCell(o,t),ht(r)&&this.sharedActions.mouseMoveCell(r,t),e.updatePrevHovingDsElement(r)},t.prototype.DOUBLE_CLICK_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);y(n)&&this.sharedActions.doubleClickCell(n,t)},t.prototype.DESELECT_ALL_CELLS=function(){this.getters.selectedCells.map(this.sharedActions.deselectCell)},t.prototype.SELECT_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getTopCell(t);this.sharedActions.selectCell(e)},t.prototype.SELECT_CELLS_IN_SELECTOR_RIGION=function(){this.getters.cellsInSelectorRigion.map(this.sharedActions.selectCell)},t.prototype.APPEND_TEXT_INPUT_TO_DOCUMENT_BODY=function(){var t=this.getters.textInput;if(ht(t)){var e=t.input;ht(e)&&document.body.appendChild(e)}},t}(),Eo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),So=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.store=e,r.getters=n,r}return Eo(e,t),e.prototype.RESET=function(){this.getters.dsElementsList.map(function(t){return t.remove()}),this.REMOVE_ELEMENTS(this.store.cellList)},e.prototype.DESELECT_ALL_CELLS=function(){this.store.cellList.map(this.sharedActions.deselectCell)},e.prototype.SELECT_NODES_IN_SELECTOR_REGION=function(){this.getters.nodesInSelectorRegion.map(this.sharedActions.selectCell)},e.prototype.SELECT_LINKS_IN_SELECTOR_REGION=function(){this.getters.linksInSelectorRegion.map(this.sharedActions.selectCell)},e.prototype.SELECT_OPERATIONS_IN_SELECTOR_REGION=function(){this.getters.operationsInSelectorRegion.map(this.sharedActions.selectCell)},e.prototype.SELECT_TOP_DS_ELEMENT=function(t){var e=this.getters.getTopDsElement(t);ht(e)&&this.sharedActions.selectCell(e)},e.prototype.START_DRAG_TOP_DS_ELEMENT=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopDsElement(e);this.sharedActions.startDragCell(n,t)},e.prototype.START_DRAG_SELECTED_DS_ELEMENTS=function(t){var e=this;this.getters.selectedDsElements.map(function(n){return e.sharedActions.startDragCell(n,t)})},e.prototype.DRAGGING_SELECTED_DS_ELEMENTS_DRAGGER_ENABLED=function(t){var e=this;this.getters.selectedDsElementsDraggerEnabled.map(function(n){e.sharedActions.draggingCell(n,t)})},e.prototype.STOP_DRAG_SELECTED_dS_ELEMENTS_DRAGGER_ENABLED=function(t){var e=this;this.getters.selectedDsElementsDraggerEnabled.map(function(n){e.sharedActions.stopDragCell(n,t)})},e.prototype.CLICK_TOP_DS_ELEMENT=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopDsElement(e);ht(n)&&this.sharedActions.clickCell(n,t)},e.prototype.DOUBLE_CLICK_TOP_DS_ELEMENT=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopDsElement(e);ht(n)&&this.sharedActions.doubleClickCell(n,t)},e.prototype.HOVER_TOP_DS_ELEMENT=function(t,e){var n=e.prevHovingDsElement,r=this.getters.getInitialPoint(t),o=this.getters.getTopDsElement(r);o&&o!==n&&this.sharedActions.mouseInCell(o,t),n&&o!==n&&this.sharedActions.mouseOutCell(n,t),ht(o)&&this.sharedActions.mouseMoveCell(o,t),e.updatePrevHovingDsElement(o)},e.prototype.UPDATE_FORMATTER=function(t){this.store.formatter=t},e.prototype.REMOVE_ALL_FLOWS=function(){var t=this.store.cellList.filter(function(t){return t.type===Pt});this.REMOVE_ELEMENTS(t)},e.prototype.REMOVE_ALL_CHAINS=function(){var t=this.store.cellList.filter(function(t){return t.type===Ot});this.REMOVE_ELEMENTS(t)},e.prototype.REMOVE_RESULT_NODE_AND_ITS_FOLLOWING_FLOWS=function(t){var e=this.store.formatter.getFollowingFlowsByResultNode(t);console.log("followingFlows",e),this.sharedActions.forceRemoveFlows(e),t&&t.forceRemove()},e.prototype.GENERATE_OPERATION_WITH_SELECTED_NODES=function(t){if(this.getters.onlySingleNodesSelected){var e=this.getters.selectedSingleNodes;if(Mt(e))return this.store.ds.createOperation({nodes:e,operationType:t})}},e.prototype.GENERATE_FILTER_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.FILTER)},e.prototype.GENERATE_UNION_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.UNION)},e.prototype.GENERATE_INTERSECT_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.INTERSECT)},e.prototype.GENERATE_INTERSECT_MUTLTI_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.INTERSECT_MULTI)},e.prototype.GENERATE_INTERSECT_TWO_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.INTERSECT_TWO)},e.prototype.GENERATE_SUBTRACT_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.SUBTRACT)},e.prototype.GENERATE_SUBTRACT_MULTI_OPERATION_WITH_SELECTED_NODES=function(){this.GENERATE_OPERATION_WITH_SELECTED_NODES(zr.SUBTRACT_MULTI)},e.prototype.DELETE_RESULT_NODE=function(t){this.REMOVE_RESULT_NODE_AND_ITS_FOLLOWING_FLOWS(t)},e.prototype.DELETE_SELECTED_RESLUT_NODES=function(){this.getters.selectedResultNodes.map(this.DELETE_RESULT_NODE.bind(this))},e.prototype.DELETE_OPERATION=function(t){var e=t.resultNode;ht(e)&&this.DELETE_RESULT_NODE(e),t&&t.remove()},e.prototype.DELETE_SELECTED_OPERATIONS=function(){this.getters.selectedOperations.map(this.DELETE_OPERATION.bind(this))},e.prototype.DELETE_DATA_NODE=function(t){var e=t.operation;ht(e)&&this.DELETE_OPERATION(e),t&&t.remove()},e.prototype.DELETE_SELECTED_DATA_NODES=function(){this.getters.selectedDataNodes.map(this.DELETE_DATA_NODE.bind(this))},e.prototype.DELETE_SELECTED_DS_ELEMENTS=function(){this.DELETE_SELECTED_RESLUT_NODES(),this.DELETE_SELECTED_OPERATIONS(),this.DELETE_SELECTED_DATA_NODES()},e.prototype.UPDATE_SETTING=function(t){this.store.setting=t},e}(Oo),To=n(21);function wo(){return"drawData-"+function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"-"+t.getHours()+"-"+t.getMinutes()+"-"+t.getSeconds()}()}var Lo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=Math.min,Co=Math.max,Do=(Math.abs,function(t){function e(e){var n=t.call(this,e)||this;return n.shouldSelect=!1,n}return Lo(e,t),Object.defineProperty(e.prototype,"path",{get:function(){var t=new Path2D,e=this.left,n=this.top,r=this.width,o=this.height;return t.rect(e,n,r,o),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return Math.min(this.startPoint.x,this.endPoint.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return Math.min(this.startPoint.y,this.endPoint.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.endPoint.x-this.startPoint.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.endPoint.y-this.startPoint.y)},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;y(this.startPoint)&&y(this.endPoint)&&(t.save(),t.fillStyle="rgba(37, 145, 293, 0.1)",t.fill(this.path),t.lineWidth=1,t.strokeStyle="#b1b1f3",t.stroke(this.path),t.restore())},e.prototype.boundsInSelectionArea=function(t){var e=!1,n=t.left,r=t.right,o=t.top,i=t.bottom,a=this.startPoint,s=this.endPoint;if(y(a)&&y(s)){var u=xo(a.x,s.x),c=Co(a.x,s.x),p=xo(a.y,s.y),l=Co(a.y,s.y);e=n>=u&&r<=c&&o>=p&&i<=l}return e},e}(At)),Ao=function(){function t(){this.keyboardKeysPressing=[],window.addEventListener("keydown",this._keydownListener.bind(this)),window.addEventListener("keyup",this._keyupListener.bind(this))}return Object.defineProperty(t.prototype,"isAltPressing",{get:function(){return G()(this.keyboardKeysPressing,t.KEYBOARD_KEYS.ALT)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpacePressing",{get:function(){return G()(this.keyboardKeysPressing,t.KEYBOARD_KEYS.SPACE)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnterPressing",{get:function(){return G()(this.keyboardKeysPressing,t.KEYBOARD_KEYS.ENTER)},enumerable:!0,configurable:!0}),t.prototype._keydownListener=function(t){var e=t.key;this._addToKeyboardKeysPressing(e),this.handleKeyDown&&this.handleKeyDown(t)},t.prototype._keyupListener=function(t){var e=t.key;this._removeFromKeyboardKeysPressing(e)},t.prototype._addToKeyboardKeysPressing=function(t){this.keyboardKeysPressing=Y()(this.keyboardKeysPressing.concat([t]))},t.prototype._removeFromKeyboardKeysPressing=function(t){this.keyboardKeysPressing=this.keyboardKeysPressing.filter(function(e){return e!==t})},t.prototype.handleKeyDown=function(t){},t.KEYBOARD_KEYS={ALT:"Alt",SPACE:" ",ENTER:"Enter"},t}();function jo(t){return t&&(2==t.which||4==t.button)}var Io=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),No=function(t){function e(e){var n=t.call(this,e)||this,r=n.getters,o=r.canvas,i=r.textInput;return n.eventKeyboard=new Ao,o.removeEventListener("mousedown",n.mousedownListener.bind(n)),o.addEventListener("mousedown",n.mousedownListener.bind(n)),o.removeEventListener("mousemove",n.mousemoveListener.bind(n)),o.addEventListener("mousemove",n.mousemoveListener.bind(n)),o.removeEventListener("mouseup",n.mouseupListener.bind(n)),o.addEventListener("mouseup",n.mouseupListener.bind(n)),o.removeEventListener("click",n.clickListener.bind(n)),o.addEventListener("click",n.clickListener.bind(n)),o.removeEventListener("dblclick",n.dblclickListener.bind(n)),o.addEventListener("dblclick",n.dblclickListener.bind(n)),o.removeEventListener("mousewheel",n.mousewheelListener.bind(n)),o.addEventListener("mousewheel",n.mousewheelListener.bind(n)),ht(i)&&i.bindEvents(),n.eventKeyboard.handleKeyDown=n.keyBoardDownListener.bind(n),n}return Io(e,t),e.prototype.updatePrevHovingDsElement=function(t){this.prevHovingDsElement=t},e.prototype.mousedownListener=function(t){var e=this.getters,n=this.actions,r=e.getInitialPoint(t);return this.eventKeyboard.isSpacePressing||jo(t)?e.viewPort.startPan(t):e.pointOnEmpty(r)?(n.DESELECT_ALL_CELLS(),this.interfaceOnEmptyClick&&this.interfaceOnEmptyClick(t),void this.startSelect(t)):e.pointOnSelectionExcludingCells(r)?void n.START_DRAG_MOST_TOP_CELL_FOCUSED(t):e.pointOnCellDeselected(r)?(n.DESELECT_ALL_CELLS(),n.SELECT_MOST_TOP_CELL_FOCUSED(r),void n.START_DRAG_MOST_TOP_CELL_FOCUSED(t)):void(e.pointOnCellSelected(r)?n.START_DRAG_CELLS_SHOULD_SELECT(t):e.draw.render())},e.prototype.mousemoveListener=function(t){var e=this.getters;!e.viewPort.shouldPan&&e.selector.shouldSelect&&this.selecting(t),e.viewPort.shouldPan&&e.viewPort.panning(t),this.actions.DRAGGING_CELLS_SHOULD_DRAG(t),this.actions.HOVER_MOST_TOP_CELL_FOCUSED(t,this),e.draw.render()},e.prototype.mouseupListener=function(t){var e=this.getters,n=this.actions;e.selector.shouldSelect=!1,this.stopSelect(t),n.STOP_DRAG_CELLS_SHOULD_DRAG(t),e.viewPort.stopPan(),e.draw.render()},e.prototype.mousewheelListener=function(t){var e=this.getters;t.preventDefault();e.eventKeyboard;var n=e.getPoint(t),r=t.deltaX,o=t.deltaY;(r<0||o<0)&&e.viewPort.zoomIn(n),(r>0||o>0)&&e.viewPort.zoomOut(n)},e.prototype.clickListener=function(t){this.actions.CLICK_MOST_TOP_CELL_FOCUSED(t)},e.prototype.dblclickListener=function(t){this.actions.DOUBLE_CLICK_MOST_TOP_CELL_FOCUSED(t)},e.prototype.keyBoardDownListener=function(t){var e=t.key,n=this.getters.textInput;e===Ao.KEYBOARD_KEYS.ENTER&&n.isShowing&&n.hideSelfAndUpdateTarget()},e.prototype.startSelect=function(t){var e=this.getters;e.selector.shouldSelect=!0,e.selector.startPoint=e.getInitialPoint(t)},e.prototype.selecting=function(t){var e=this.getters;e.selector.endPoint=e.getInitialPoint(t)},e.prototype.stopSelect=function(t){var e=this.getters;this.actions.SELECT_CELLS_IN_SELECTOR_RIGION(),e.selector.startPoint=null,e.selector.endPoint=null},e}(At),Ro=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mo=Math.abs,ko=Math.max,Uo=function(t){function e(e){var n=t.call(this,e)||this;return n.shouldPan=!1,n.zoom=1,n.center=n.basicCenter,n}return Ro(e,t),Object.defineProperty(e.prototype,"basicCenter",{get:function(){var t=this.getters;return{x:t.canvasWidth/2,y:t.canvasHeight/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicWidth",{get:function(){return this.getters.canvasWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicHeight",{get:function(){return this.getters.canvasHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.basicWidth*this.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.basicHeight*this.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pan",{get:function(){var t=this.center,e=this.basicCenter;return{x:t.x-e.x,y:t.y-e.y}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panX",{get:function(){return this.pan.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panY",{get:function(){return this.pan.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPanning",{get:function(){return function(t){return 2===t.which}(event)||this.getters.eventKeyboard.isSpacePressing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movement",{get:function(){var t=this.width,e=this.height,n=this.basicWidth,r=this.basicHeight,o=this.center,i=o.x,a=o.y,s=this.basicCenter;return{x:i-s.x-(t-n)/2,y:a-s.y-(e-r)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!0,configurable:!0}),e.prototype.zoomBy=function(t,n){void 0===t&&(t={x:0,y:0});var r=this;if(!function(){var t=r.zoom+n,o=e.MAX_ZOOM,i=e.MIN_ZOOM;return t>o||t<i}()){var o=this.zoom;this.zoom=this.zoom+n;this.center,this.basicCenter;var i=this.zoom;this.center=function(t,e,n){void 0===t&&(t={x:0,y:0});var r=t.x,o=t.y;return{x:r+(n.x-r)*e,y:o+(n.y-o)*e}}(t,i/o,this.center),this.draw.render()}},e.prototype.zoomTo=function(t,e){void 0===e&&(e={x:0,y:0});var n=t-this.zoom;this.zoomBy(e,n)},e.prototype.zoomIn=function(t){void 0===t&&(t=this.getters.canvasCenterPoint),this.zoomBy(t,e.ZOOM_VARIATION)},e.prototype.zoomOut=function(t){void 0===t&&(t=this.getters.canvasCenterPoint),this.zoomBy(t,-e.ZOOM_VARIATION)},e.prototype.panBy=function(t,e){var n=this.center,r=n.x,o=n.y;this.center={x:r+t,y:o+e}},e.prototype.getDeltaPointToPrevPanningPoint=function(t){var e=t.x,n=t.y,r=this.prevPanningPoint;return{x:e-r.x,y:n-r.y}},e.prototype.getDeltaXToPrevPanningPoint=function(t){return this.getDeltaPointToPrevPanningPoint(t).x},e.prototype.getDeltaYToPrevPanningPoint=function(t){return this.getDeltaPointToPrevPanningPoint(t).y},e.prototype.startPan=function(t){var e=this.getters.getPoint(t);this.shouldPan=!0,this.prevPanningPoint=e},e.prototype.panning=function(t){var e=this.getters.getPoint(t),n=this.getDeltaXToPrevPanningPoint(e),r=this.getDeltaYToPrevPanningPoint(e);this.prevPanningPoint=e,this.panBy(n,r)},e.prototype.stopPan=function(){this.shouldPan=!1},e.prototype.resetPan=function(){this.center=this.basicCenter},e.prototype.transform=function(t){var e=t.x,n=t.y,r=this.movementX,o=this.movementY,i=this.zoom;return{x:e*i+r,y:n*i+o}},e.prototype.transformToInitial=function(t){var e=t.x,n=t.y,r=this.movementX,o=this.movementY,i=this.zoom;return{x:(e-r)/i,y:(n-o)/i}},e.prototype.centerLayout=function(t){var e=t.left,n=t.top,r=t.right,o=t.bottom;if(![e,n,r,o].some(function(t){return!isFinite(t)})){var i={x:(e+r)/2,y:(n+o)/2},a=Mo(r-e)+100,s=Mo(o-n)+100,u=this.getters,c=u.canvasWidth,p=u.canvasHeight,l=u.canvasCenterPoint;this.panCanvasCenterToPoint(i);var f=ko(a/c,s/p),h=0!==f?1/f:1;this.zoomTo(h,l)}},e.prototype.panCanvasCenterToPoint=function(t){var e=this.getters.canvasCenterPoint,n=this.transform(t),r=n.x,o=n.y,i=e.x-r,a=e.y-o;this.panBy(i,a)},e.prototype.update=function(t,e){this.zoomTo(t);var n=e.x,r=e.y,o=this.center,i=n-o.x,a=r-o.y;this.panBy(i,a)},e.ZOOM_VARIATION=.5,e.MAX_ZOOM=100,e.MIN_ZOOM=.1,e}(At),Bo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ho=Math.abs,zo=function(t){function e(n){var r=t.call(this,n)||this;return r.zoom=1,r.pan={x:0,y:0},r.interval=e.INTERVAL,r.canvas=n.canvas,r}return Bo(e,t),Object.defineProperty(e.prototype,"ctx",{get:function(){return this.ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panX",{get:function(){return this.pan.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panY",{get:function(){return this.pan.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasWidth",{get:function(){return this.canvas.getBoundingClientRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeight",{get:function(){return this.canvas.getBoundingClientRect().height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(Ho(this.panX)+this.canvasWidth)/this.zoom+5*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return(Ho(this.panY)+this.canvasHeight)/this.zoom+5*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return-Math.round(this.panX/this.interval)*this.interval-2*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return-Math.round(this.panY/this.interval)*this.interval-2*this.interval},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){for(var t=new Path2D,e=this,n=(e.width,e.height,e.interval),r=e.left,o=e.top,i=e.right,a=e.bottom,s=0,u=0;u<i;s++)u=s*n,t.moveTo(r+u+n,o),t.lineTo(r+u+n,a);s=0;for(var c=0;c<a;s++)c=s*n,t.moveTo(r,o+c+n),t.lineTo(i,o+c+n);return t},enumerable:!0,configurable:!0}),e.prototype.render=function(t,n,r,o){void 0===t&&(t=e.INTERVAL),void 0===n&&(n=e.DEFAULT_ZOOM),void 0===r&&(r=e.DEFAULT_PAN),void 0===o&&(o={});var i=o.color||"black";this.interval=t,this.zoom=n,this.pan=r;var a=this.getters.ctx,s=this.path;a.save(),a.lineWidth=1,a.strokeStyle=i,a.stroke(s),a.restore()},e.INTERVAL=10,e.DEFAULT_ZOOM=1,e.DEFAULT_PAN={x:0,y:0},e}(At),Fo=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wo=function(t){function e(e){return t.call(this,e)||this}return Fo(e,t),Object.defineProperty(e.prototype,"ctx",{get:function(){return this.getters.ctx},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.resetTransform(),this.getters.ctx.clearRect(0,0,this.getters.canvasWidth,this.getters.canvasHeight)},e.prototype.resetTransform=function(){this.ctx.setTransform(1,0,0,1,0,0)},e.prototype.setTransformViewPort=function(){var t=this.getters,e=t.zoom,n=t.movementX,r=t.movementY;t.ctx.setTransform(e,0,0,e,n,r)},e.prototype.setTransformViewPortToRenderMiniMap=function(){var t=this.getters,e=t.ctx,n=t.zoom,r=t.movementX,o=t.movementY,i=this.getters.miniMap.viewBox,a=i.initialRatio,s=i.basicLeft,u=i.basicTop;e.setTransform(n/a,0,0,n/a,s+r/a,u+o/a)},e}(At),Go=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Vo=function(){function t(t,e){this.drawStore=t,this.getters=e}return Object.defineProperty(t.prototype,"sharedActions",{get:function(){return this.getters.draw.sharedActions},enumerable:!0,configurable:!0}),t.prototype.UPDATE_STORE=function(t){var e=F()(t);Object.keys(t).map(function(n){t[n]=e[n]})},t.prototype.UPDATE_DRAW=function(t){this.drawStore.draw=t},t.prototype.UPDATE_CANVAS=function(t){this.drawStore.canvas=t,this.getters.setCtx(t.getContext("2d"))},t.prototype.UPDATE_TMP_CANVAS=function(t){this.drawStore.tmpCanvas=t,this.getters.setTmpCtx(t.getContext("2d"))},t.prototype.INTIALIZE_DRAW_ROOT_ID=function(){this.drawStore.rootId=this.getters.generateUniqueDrawRootId()},t.prototype.UPDATE_DRAW_ROOT_ID=function(t){this.drawStore.rootId=t},t.prototype.UPDATE_SETTING=function(t){this.drawStore.setting=t},t.prototype.UPDATE_VIEWPORT=function(t){this.drawStore.viewPort=t},t.prototype.UPDATE_RENDERER=function(t){this.drawStore.renderer=t},t.prototype.UPDATE_SELECTOR=function(t){this.drawStore.selector=t},t.prototype.UPDATE_INTERACTION=function(t){this.drawStore.interaction=t},t.prototype.UPDATE_MINIMAP=function(t){this.drawStore.miniMap=t},t.prototype.UPDATE_GRID=function(t){this.drawStore.grid=t},t.prototype.UPDATE_TEST_UTILS=function(t){this.drawStore.testUtils=t},t.prototype.UPDATE_TEXT_INPUT=function(t){this.drawStore.textInput=t},t.prototype.ADD_ELEMENT=function(t,e,n,r){var o=mo()[e];if(!g()(o)){var i=new o(Go({draw:t},n));i.exportable=!0;var a=function(t){var e={};return q()(t,function(t,n){(nt()(t)||ot()(t)||ut()(t)||at()(t)||pt()(t)||g()(t))&&(e[n]=t)}),e}(i),s=Go({__instance__:i},a);return g()(r)&&this.getters.storeActiveElements.push(s),g()(r)||this.getters.getStoreElementsByPanelId(r).push(s),i}console.log('Type not found: "'+e+'"')},t.prototype.REMOVE_ELEMENT=function(t){ht(t)&&Wt(this.getters.cellList,t)},t.prototype.REMOVE_ELEMENTS=function(t){t.map(function(t){return t&&t.remove()}),t.map(this.REMOVE_ELEMENT.bind(this))},t.prototype.ADD_PANEL=function(t){this.getters.storePanels.push({id:this.getters.generateUniqueDrawElementId(),name:t,elements:[]})},t.prototype.MODIFY_ACTIVE_PANEL_ID=function(t){this.drawStore.activePanelId=t},t.prototype.ADD_ELEMENT_TO_CELL_LIST=function(t){var e=t.addedToBottom,n=void 0!==e&&e;!n&&this.drawStore.cellList.push(t),n&&this.drawStore.cellList.unshift(t)},t.prototype.UPDATE_STORE_ELEMENTS_BY_THEIR_INSTANCES=function(){this.drawStore.panels.map(function(t,e){t.elements.map(function(t){return function(e,n){var r=e.__instance__;if(y(r)){var o=Object.keys(r),i=Q()(o,_o);i.map(function(t,e){return function(n){this.drawStore.panels[t].elements[e][n]=this.drawStore.panels[t].elements[e].__instance__[n]}}(t,n))}}}(e))})},t.prototype.UPDATE_SYNC_STORE_ROOT_ID=function(t){this.drawStore.syncStore.rootId=t},t.prototype.REFRESH_SYNC_STORE_ROOT_ID=function(){var t=this.drawStore.rootId;this.UPDATE_SYNC_STORE_ROOT_ID(t)},t.prototype.UPDATE_SYNC_STORE_ELEMENTS=function(t){this.drawStore.syncStore.elements=t},t.prototype.REFRESH_SYNC_STORE_ELEMENTS=function(){var t=[];this.drawStore.cellList.filter(function(t){return t.exportable}).map(function(e){var n={__instance__:null,data:null};return n.data=function(t){var e={};return q()(t,function(t,n){St(t)&&(e[n]=t)}),e}(e),t.push(n),n}),this.UPDATE_SYNC_STORE_ELEMENTS(t)},t.prototype.START_DRAG_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);this.sharedActions.startDragCell(n,t)},t.prototype.START_DRAG_CELLS_SHOULD_SELECT=function(t){var e=this;this.getters.cellsShouldSelect.map(function(n){e.sharedActions.startDragCell(n,t)})},t.prototype.DRAGGING_CELLS_SHOULD_DRAG=function(t){var e=this;this.getters.cellsShouldDrag.map(function(n){e.sharedActions.draggingCell(n,t)})},t.prototype.STOP_DRAG_CELLS_SHOULD_DRAG=function(t){var e=this;this.getters.cellsShouldDrag.map(function(n){e.sharedActions.stopDragCell(n,t)})},t.prototype.CLICK_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);y(n)&&this.sharedActions.clickCell(n,t)},t.prototype.HOVER_MOST_TOP_CELL_FOCUSED=function(t,e){var n=this.getters.getInitialPoint(t),r=this.getters.getTopCell(n),o=e.prevHovingDsElement;r&&r!==o&&this.sharedActions.mouseInCell(r,t),o&&r!==o&&this.sharedActions.mouseOutCell(o,t),ht(r)&&this.sharedActions.mouseMoveCell(r,t),e.updatePrevHovingDsElement(r)},t.prototype.DOUBLE_CLICK_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getInitialPoint(t),n=this.getters.getTopCell(e);y(n)&&this.sharedActions.doubleClickCell(n,t)},t.prototype.DESELECT_ALL_CELLS=function(){this.getters.selectedCells.map(this.sharedActions.deselectCell)},t.prototype.SELECT_MOST_TOP_CELL_FOCUSED=function(t){var e=this.getters.getTopCell(t);this.sharedActions.selectCell(e)},t.prototype.SELECT_CELLS_IN_SELECTOR_RIGION=function(){this.getters.cellsInSelectorRigion.map(this.sharedActions.selectCell)},t.prototype.APPEND_TEXT_INPUT_TO_DOCUMENT_BODY=function(){var t=this.getters.textInput;if(ht(t)){var e=t.input;ht(e)&&document.body.appendChild(e)}},t}(),Yo=[S,C,D],Ko=Math.sqrt,Xo=Math.pow,Zo=(Math.cos,Math.sin,Math.PI,Math.abs,function(t,e,n,r){var o=t.x,i=t.y,a=r.x,s=r.y;return{x:a+(o-a)*e,y:s+(i-s)*n}});var Qo=function(){function t(t,e){this.drawStore=t,this.getters=e}return t.prototype.startDragCell=function(t,e){t.dragger.start(e)},t.prototype.draggingCell=function(t,e){t.dragger.dragging(e)},t.prototype.stopDragCell=function(t,e){t.dragger.stop(e)},t.prototype.clickCell=function(t,e){t.handleClick&&t.handleClick(e)},t.prototype.doubleClickCell=function(t,e){t.handleDoubleClick&&t.handleDoubleClick(e)},t.prototype.mouseInCell=function(t,e){t.handleMouseIn&&t.handleMouseIn(e)},t.prototype.mouseMoveCell=function(t,e){t.handleMouseMove&&t.handleMouseMove(e)},t.prototype.mouseOutCell=function(t,e){t.handleMouseOut&&t.handleMouseOut(e)},t.prototype.rotateCell=function(t,e){t.rotate(e)},t.prototype.selectCell=function(t){t.select()},t.prototype.selectCells=function(t){t.map(function(t){return t.select()})},t.prototype.deselectCell=function(t){t.deselect()},t.prototype.deselectCells=function(t){t.map(function(t){return t.deselect()})},t.prototype.enableCellRotate=function(t){t.shouldRotate=!0},t.prototype.disableCellRotate=function(t){t.shouldRotate=!1},t.prototype.renderParticle=function(t){t.render()},t.prototype.renderElement=function(t,e){void 0===e&&(e=!1),e||t.render(),e&&(ht(t.renderFnInMiniMap)&&t.renderFnInMiniMap(),g()(t.renderFnInMiniMap)&&t.render())},t.prototype.updateSegmentPrevious=function(t,e){t.previous=e},t.prototype.updateSegmentNext=function(t,e){t.next=e},t.prototype.updateSegmentX=function(t,e){t.x=e},t.prototype.updateSegmentY=function(t,e){t.y=e},t.prototype.updateSegmentPoint=function(t,e){var n=e.x,r=e.y;t.x=n,t.y=r},t.prototype.ajustSegmentPreviousAndNext=function(t,e){var n=e.length;if(n>1)for(var r=n-1,o=e[0],i=e[r],a=0;a<n;a++){if(e[a]===t){var s=c(a)?i:e[a-1],u=Nt(a,e)?o:e[a+1];this.updateSegmentPrevious(t,s),this.updateSegmentNext(t,u)}}function c(t){return 0===t}},t.prototype.ajustSegmentsPreviousAndNext=function(t){var e=this;t.map(function(n){return e.ajustSegmentPreviousAndNext(n,t)})},t.prototype.showSegment=function(t){t.show=!0},t.prototype.showSegments=function(t){var e=this;t.map(function(t){return e.showSegment(t)})},t.prototype.hideSegment=function(t){t.show=!1},t.prototype.hideSegments=function(t){var e=this;t.map(function(t){return e.hideSegment(t)})},t.prototype.renderSegments=function(t){var e=this;t.map(function(t){return e.renderParticle(t)})},t.prototype.translateSegment=function(t,e,n){t.translate(e,n)},t.prototype.translateSegments=function(t,e,n){t.map(function(t){return t.translate(e,n)})},t.prototype.translateSegmentTo=function(t,e,n){t.translateTo(e,n)},t.prototype.translateSegmentsTo=function(t,e,n){console.log(t,e,n),t.map(function(t){return t.translateTo(e,n)})},t.prototype.translateSegmentToPoint=function(t,e){t.translateToPoint(e)},t.prototype.translateSegmentsToPoint=function(t,e){t.map(function(t){return t.translateToPoint(e)})},t.prototype.rotateSegment=function(t,e,n){var r=t.handleIn,o=t.handleOut;this.rotateHandle(r,e,n),this.rotateHandle(o,e,n);var i=h(t,e,n);this.updateSegmentPoint(t,i)},t.prototype.rotateSegments=function(t,e,n){var r=this;t.map(function(t){return r.rotateSegment(t,e,n)})},t.prototype.sizeSegment=function(t,e,n,r){var o=t.handleIn,i=t.handleOut,a=t.path.angle;this.sizeHandle(o,e,n,r),this.sizeHandle(i,e,n,r);var s=h(t,-a),u=h(r,-a),c=Zo(s,e,n,u),p=h(c,a);this.updateSegmentPoint(t,p)},t.prototype.sizeSegments=function(t,e,n,r){var o=this;t.map(function(t){return o.sizeSegment(t,e,n,r)})},t.prototype.showSegmentHandle=function(t){this.showHandle(t.handleIn),this.showHandle(t.handleOut)},t.prototype.showSegmentsHandles=function(t){var e=this;t.map(function(t){return e.showSegmentHandle(t)})},t.prototype.hideSegmentHandle=function(t){this.hideHandle(t.handleIn),this.hideHandle(t.handleOut)},t.prototype.hideSegmentsHandles=function(t){var e=this;t.map(function(t){return e.hideSegmentHandle(t)})},t.prototype.clearSegmentHandle=function(t){this.clearHandle(t.handleIn),this.clearHandle(t.handleOut)},t.prototype.clearSegmentsHandles=function(t){var e=this;t.map(function(t){return e.clearSegmentHandle(t)})},t.prototype.updateHandleRelativePoint=function(t,e){t.relativePoint=l(e)},t.prototype.adjustHandleParterPoint=function(t){var e,n=t.partner,r=t.segment,o=t.point,i=o.x,a=o.y,s=n.point,u=(s.x,s.y,r.point),c={x:i-u.x,y:a-u.y},p=function(t){var e=t.x,n=t.y;return Ko(Xo(e,2)+Xo(n,2))}(c),l=(n.length,{x:-c.x,y:-c.y});e={x:l.x,y:l.y},this.updateHandleRelativePoint(n,e)},t.prototype.showHandle=function(t){t.show=!0},t.prototype.hideHandle=function(t){t.show=!1},t.prototype.rotateHandle=function(t,e,n){var r=t.point,o=t.segmentPoint,i=(t.relativePoint,r.x,r.y,h(r,e,n)),a=h(o,e,n),s={x:i.x-a.x,y:i.y-a.y};this.updateHandleRelativePoint(t,s)},t.prototype.sizeHandle=function(t,e,n,r){var o=t.point,i=t.segmentPoint,a=t.relativePoint,s=t.segment.path.angle,u=h(o,-s),c=h(i,-s),p=(h(a,-s),h(r,-s)),l=(u.x,u.y,Zo(u,e,n,p)),f=h(l,s),d=Zo(c,e,n,p),g=h(d,s),y={x:f.x-g.x,y:f.y-g.y};this.updateHandleRelativePoint(t,y)},t.prototype.clearHandle=function(t){this.updateHandleRelativePoint(t,xe)},t.prototype.sizeItem=function(t,e,n,r){t.size(e,n,r)},t.prototype.updatePathSegments=function(t,e){t.updateSegments(e)},t.prototype.updatePoint=function(t,e,n){t.x=e,t.y=n},t.prototype.translatePoint=function(t,e,n){var r=t.x,o=t.y;this.updatePoint(t,r+e,o+n)},t.prototype.applyRotationArrow=function(t){t.rotationArrow.render()},t.prototype.applyScalePoint=function(t){},t.prototype.applySelectionBorder=function(t){var e=t.shouldSelect,n=t.type,r=(t.draw,t.path),o=this.getters.ctx;e&&!G()(Yo,n)&&(o.save(),o.lineWidth=1,o.setLineDash([5,5]),o.strokeStyle="black",o.stroke(r),o.restore())},t.prototype.updateTheTextOfDrawText=function(t,e){t.text=e},t.prototype.translateDrawText=function(t,e,n){t.x=t.x+e,t.y=t.y+n},t.prototype.updateTextInputTarget=function(t,e){t.target=e},t.prototype.mockDragCellPerformanceTest=function(t,e){return function(t,e){void 0===e&&(e=100);var n=null,r={x:0,y:0},o=performance.now();t.dragger.enable=!0,t.dragger.start(r);for(var i=0;i<=e;i++)i<e&&(r={x:1*i,y:1*i},t.dragger.dragging(r)),i===e&&(t.dragger.stop(r),n=performance.now()-o);return n}(t,e)},t.prototype.averageMockDragCellPerformanceTest=function(t,e,n){var r=this;return function(t,e){void 0===e&&(e=1);for(var n=0,r=0;r<e;r++)n+=t();return n/e}(function(){return r.mockDragCellPerformanceTest(t,e)},n)},t.prototype.forceRemoveFlows=function(t){t.map(function(t){return t&&t.forceRemove()})},t}(),Jo=function(t,e,n){if(void 0===e&&(e=.001),void 0===n&&(n=new Path2D),t.length<=1)return null;var r=e<1?e:1,o=[],i=t[t.length-1];o.push(t[0]);for(var a=r;a<=1;a+=r){var s=qo(t,a);o.push(s)}return o.push(i),function(t,e){return t.map(function(t,n,r){r.length,e.lineTo(t.x,t.y)}),e}(o,n),n};function qo(t,e){var n,r=t;return function t(){var i=r.length;if(i>1){for(var a=[],s=0;s<i-1;s++){var u=r[s],c=r[s+1],p=o(u,c,e);a.push(p)}return r=a,void t()}1===i&&(n=r[0])}(),n;function o(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}}function $o(t,e,n,r){for(var o,i,a,s,u,c,p,l,f=t.x,h=t.y,d=e.x,g=e.y,y=n.x,v=n.y,b=r.x,m=r.y,_=(Math.pow,Math.sqrt),P=Math.min,O=Math.max,E=Math.abs,S=new Array,T=[new Array,new Array],w=new Array,L=0;L<2;++L)if(0==L?(i=6*f-12*d+6*y,o=-3*f+9*d-9*y+3*b,a=3*d-3*f):(i=6*h-12*g+6*v,o=-3*h+9*g-9*v+3*m,a=3*g-3*h),E(o)<1e-12){if(E(i)<1e-12)continue;0<(s=-a/i)&&s<1&&S.push(s)}else l=_(p=i*i-4*a*o),p<0||(0<(u=(-i+l)/(2*o))&&u<1&&S.push(u),0<(c=(-i-l)/(2*o))&&c<1&&S.push(c));for(var x,C,D,A=S.length,j=A;A--;)x=(D=1-(s=S[A]))*D*D*f+3*D*D*s*d+3*D*s*s*y+s*s*s*b,T[0][A]=x,C=D*D*D*h+3*D*D*s*g+3*D*s*s*v+s*s*s*m,T[1][A]=C,w[A]={X:x,Y:C};return S[j]=0,S[j+1]=1,w[j]={X:f,Y:h},w[j+1]={X:b,Y:m},T[0][j]=f,T[1][j]=h,T[0][j+1]=b,T[1][j+1]=m,S.length=T[0].length=T[1].length=w.length=j+2,{left:P.apply(null,T[0]),top:P.apply(null,T[1]),right:O.apply(null,T[0]),bottom:O.apply(null,T[1])}}var ti=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ei=(Math.PI,function(t){function e(e){var n=t.call(this,e)||this;n.segment1=e.segment1,n.segment2=e.segment2,n.handle1=n.segment1.handleOut,n.handle2=n.segment2.handleIn,n.path=e.path;var r=n.drawStore.setting,o=r.curveUsesCanvasApi,i=r.curveRate;return n.useCanvasCurve=!!ht(o)&&o,n.useCanvasCurve=ht(e.useCanvasCurve)?e.useCanvasCurve:n.useCanvasCurve,n.t=ht(i)&&0!==i?i:1,n.t=ht(e.t)&&0!==e.t?e.t:n.t,n}return ti(e,t),Object.defineProperty(e.prototype,"point1",{get:function(){return this.segment1.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point2",{get:function(){return this.segment2.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handle1Point",{get:function(){return this.handle1.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handle2Point",{get:function(){return this.handle2.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevSegment",{get:function(){return this.segment1.previous},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextSegment",{get:function(){return this.segment2.next},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prevPoint",{get:function(){return this.prevSegment.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextPoint",{get:function(){return this.nextSegment.point},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=new Path2D,e=this,n=e.handle1Point,r=e.handle2Point,o=e.point1,i=e.point2,a=e.useCanvasCurve,s=e.t;return!a&&Jo([o,n,r,i],s,t),a&&(t.moveTo(o.x,o.y),t.bezierCurveTo(n.x,n.y,r.x,r.y,i.x,i.y)),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.handle1Point,e=this.handle2Point;return $o(this.point1,t,e,this.point2)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsCenter",{get:function(){return this.sharedGetters.getBoundsCenter(this.bounds)},enumerable:!0,configurable:!0}),e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.lineWidth=1,t.strokeStyle="#00f0ff",t.stroke(this.path2d),t.restore()},e}(At)),ni=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){var n=e.x,r=e.y;return new t(this.x+n,this.y+r)},t.prototype.subtract=function(e){var n=e.x,r=e.y;return new t(this.x-n,this.y-r)},t.prototype.multiply=function(e){return new t(this.x*e,this.y*e)},t.prototype.divide=function(e){return new t(this.x/e,this.y/e)},t.prototype.rotate=function(e,n){var r=n.x,o=void 0===r?0:r,i=n.y,a=void 0===i?0:i,s=e*Math.PI/180,u={x:this.x-o,y:this.y-a},c=u.x,p=u.y,l={x:c*Math.cos(s)-p*Math.sin(s)+o,y:c*Math.sin(s)+p*Math.cos(s)+a};return new t(l.x,l.y)},t}(),ri=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},oi=Math.PI,ii=(Math.min,Math.max,function(){function t(){}return t.prototype.getCurves=function(t,e,n,r){var o=t.length;if(o<=1)return[];for(var i=[],a=t[0].path,s=0;s<o;s++){var u=t[s],c=l(s)?t[0]:t[s+1],p=new ei({draw:r,segment1:u,segment2:c,path:a,useCanvasCurve:e,t:n});i.push(p)}return i;function l(t){return t===o-1}},t.prototype.getSegmentsCenter=function(t){return an(t)},t.prototype.createSegmentByPoint=function(t,e,n){void 0===n&&(n={});var r=t.x,o=t.y;return new Xe(ri({draw:e,x:r,y:o},n))},t.prototype.getPerpHandleRelativePoint=function(t,e,n){var r=e?e.defaultHandleLength:s,o=new ni(t.point.x,t.point.y),i=new ni(n.point.x,n.point.y),a=new ni((o.x+i.x)/2,(o.y+i.y)/2),u=new ni(e.x,e.y),c=new dn(u,a).rotate(-90).unit;return{x:r*c.x,y:r*c.y}},t.prototype.getCurveInitialBounds=function(t){var e=t.handle1Point,n=t.handle2Point,r=t.point1,o=t.point2,i=-t.path.angle*oi/180;return $o(ee(r,i,xe),ee(e,i,xe),ee(n,i,xe),ee(o,i,xe))},t.prototype.getPath2dByCurves=function(t){var e=new Path2D;return t.map(function(t,n){var r=t.handle1,o=t.handle2,i=t.segment1,a=t.segment2,s=t.useCanvasCurve,u=t.t;(function(t){return 0===t})(n)&&e.moveTo(i.x,i.y);!s&&Jo([i,r,o,a],u,e),s&&e.bezierCurveTo(r.x,r.y,o.x,o.y,a.x,a.y)}),e},t.prototype.getPathInitialBounds=function(t){var e,n,r,o,i=this;return t.map(function(t){var a=i.getCurveInitialBounds(t),s=a.left,u=a.right,c=a.top,p=a.bottom;e=g()(e)?s:e,n=g()(n)?u:n,r=g()(r)?c:r,o=g()(o)?p:o,s<e&&(e=s);u>n&&(n=u);c<r&&(r=c);p>o&&(o=p)}),{left:e,right:n,top:r,bottom:o}},t.prototype.getPathItemCenter=function(t){var e=t.curves,n=t.radian,r=this.getPathInitialBounds(e),o=this.getBoundsCenter(r);return ee(o,n,xe)},t.prototype.getPathBounds=function(t){var e,n,r,o;return t.map(function(t){var i=t.bounds,a=i.left,s=i.right,u=i.top,c=i.bottom;e=g()(e)?a:e,n=g()(n)?s:n,r=g()(r)?u:r,o=g()(o)?c:o,a<e&&(e=a);s>n&&(n=s);u<r&&(r=u);c>o&&(o=c)}),{left:e,right:n,top:r,bottom:o}},t.prototype.getBoundsCenter=function(t){return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}},t.prototype.getTranslatedBounds=function(t,e,n){var r=t.left,o=t.top;return{left:r+e,right:t.right+e,top:o+n,bottom:t.bottom+n}},t.prototype.getMultipiedPoint=function(t,e,n){return g()(n)&&(n=e),{x:t.x*e,y:t.y*n}},t.prototype.getTranslatedPoint=function(t,e,n){return{x:t.x+e,y:t.y+n}},t.prototype.getTwoPointsLine=function(t){var e=[];return t.length>=2&&t.map(function(t,n,r){if(!Nt(n,r)){var o={source:t,target:r[n+1]};e.push(o)}}),e},t}()),ai=Math.PI,si=function(){function t(t){this.getters=t}return t.prototype.renderPoint=function(t,e){return function(t,e,n){void 0===n&&(n="red");var r=e.getContext("2d");r.save();var o=t.x,i=t.y;r.beginPath(),r.arc(o,i,5,0,2*ai),r.fillStyle=n,r.fill(),r.restore()}(t,this.getters.canvas,e)},t.prototype.renderPoints=function(t,e){var n=this;t.map(function(t){return n.renderPoint(t,e)})},t.prototype.delayRenderPoint=function(t,e){var n=this;setTimeout(function(){n.renderPoint(t,e)},1)},t.prototype.delayRenderPoints=function(t,e){var n=this;t.map(function(t){return n.delayRenderPoint(t,e)})},t}(),ui=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ci=function(t){function e(e){var n=t.call(this,e)||this;return n.type=D,n.show=!1,n.miniMap=e.miniMap,n}return ui(e,t),Object.defineProperty(e.prototype,"initialRatio",{get:function(){var t=this.getters,e=t.canvasWidth,n=t.canvasHeight,r=this.miniMap,o=e/r.width,i=n/r.height;return o>i?o:i},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicCenter",{get:function(){var t=this.miniMap,e=t.left,n=t.top;return{x:e+t.width/2,y:n+t.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){var t=this.initialRatio,e=this.getters.viewPort,n=e.zoom,r=e.panX,o=e.panY,i=this.basicCenter;return{x:i.x-r/t/n,y:i.y-o/t/n}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicLeft",{get:function(){var t=this.miniMap;return t.left+t.width/2-this.basicWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicTop",{get:function(){var t=this.miniMap;return t.top+t.height/2-this.basicHeight/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicWidth",{get:function(){var t=this.initialRatio;return this.getters.canvasWidth/t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"basicHeight",{get:function(){var t=this.initialRatio;return this.getters.canvasHeight/t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.basicWidth/this.getters.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.basicHeight/this.getters.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.center,e=t.x,n=t.y,r=this.width,o=this.height,i=new Path2D;return i.rect(e-r/2,n-o/2,r,o),i},enumerable:!0,configurable:!0}),e.prototype.contain=function(t,e){this.getters.renderer.resetTransform();var n=this.getters.viewPort.transform({x:t,y:e});return this.show&&this.getters.ctx.isPointInPath(this.path2d,n.x,n.y)},e.prototype.render=function(){var t=this.getters.ctx;t.save(),t.lineWidth=1,t.strokeStyle="red",t.stroke(this.path2d),t.restore()},e.prototype.updateDrag=function(t){if(this.draggable){var e=this.initialRatio,n=this.getters.zoom,r=-(t.x-this.dragger.prevEvent.x)*e*n,o=-(t.y-this.dragger.prevEvent.y)*e*n;this.getters.viewPort.panBy(r,o)}},e}(Xt),pi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),li=function(t){function e(e){var n=t.call(this,e)||this;n.type=C,n.left=0,n.top=0,n.width=0,n.height=0,n.show=!1,n.renderingMainCells=!1,n.preventDefaultCellsRenderInMiniMap=!1,n.shouldRender=ht(e.shouldRender)?e.shouldRender:n.shouldRender;var r=n.drawStore.setting,o=r.miniMapWidth,i=r.miniMapHeight;return n.width=ht(o)?o:300,n.height=ht(i)?i:200,n.left=n.getters.canvasRight-n.width,n.top=n.getters.canvasHeight-n.height,n.viewBox=new ci({draw:n.draw,miniMap:n}),n}return pi(e,t),Object.defineProperty(e.prototype,"path2d",{get:function(){var t=this.left,e=this.top,n=this.width,r=this.height,o=new Path2D;return o.rect(t,e,n,r),o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasWidthInMiniMap",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvasHeightInMiniMap",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewBoxBasicPanelPath2d",{get:function(){var t=this.getters,e=t.canvasWidth,n=t.canvasHeight,r=this.left,o=this.top,i=this.width,a=this.height,s=this.viewBox.initialRatio,u=e/s,c=n/s,p=r+i/2-u/2,l=o+a/2-c/2,f=new Path2D;return f.rect(p,l,u,c),f},enumerable:!0,configurable:!0}),e.prototype.enablePreventDefaultCellsRenderInMiniMap=function(){return this.preventDefaultCellsRenderInMiniMap=!0},e.prototype.enableRender=function(){this.shouldRender=!0},e.prototype.disableRender=function(){this.shouldRender=!1},e.prototype.renderMainCells=function(){var t=this.getters,e=t.renderer;t.canvas;this.draw.renderBackground(),e.setTransformViewPortToRenderMiniMap(),this.renderingMainCells=!0,this.draw.renderMain(),this.renderingMainCells=!1},e.prototype.render=function(){var t=this.getters.ctx,e=this.viewBox,n=e.basicLeft,r=e.basicTop;t.save(),t.fillStyle="#181b20",t.fill(this.path2d),t.strokeStyle="#181b20",t.stroke(this.path2d),y(this.imageDataInRigion)&&t.putImageData(this.imageDataInRigion,n,r),t.restore()},e.prototype.contain=function(t,e){this.getters.renderer.resetTransform();var n=this.getters.viewPort.transform({x:t,y:e});return this.show&&this.getters.ctx.isPointInPath(this.path2d,n.x,n.y)},e.prototype.renderViewBoxBasicPanel=function(){var t=this.getters.ctx;t.save(),t.fillStyle="white",t.fill(this.viewBoxBasicPanelPath2d),t.restore()},e.prototype.saveImageDataInRigion=function(){var t=this.viewBox,e=t.basicWidth,n=t.basicHeight,r=t.basicLeft,o=t.basicTop;this.imageDataInRigion=this.getters.ctx.getImageData(r,o,e,n)},e}(Xt),fi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hi=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.style.position="fixed",n.input.style.zIndex="100000000000000",n.hide(),n}return fi(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.input.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isShowing",{get:function(){return"none"!==this.input.style.display},enumerable:!0,configurable:!0}),e.prototype.bindEvents=function(){var t=this,e=this.input;function n(){t.handleBlur&&t.handleBlur(),t.hideSelfAndUpdateTarget()}e.removeEventListener("blur",n),e.addEventListener("blur",n)},e.prototype.handleBlur=function(){},e.prototype.hide=function(){this.input.style.display="none"},e.prototype.show=function(){this.input.style.display="inline-block"},e.prototype.focus=function(){this.input.focus()},e.prototype.updateProp=function(t){var e=t.left,n=t.top,r=t.text,o=this.input;y(e)&&(o.style.left=e+"px"),y(n)&&(o.style.top=n+"px"),y(r)&&(o.value=r)},e.prototype.hideSelfAndUpdateTarget=function(){var t=this.target,e=this.value;this.hide(),y(t)&&(this.sharedActions.updateTheTextOfDrawText(t,e),this.draw.render())},e}(At),di=function(){function t(t,e){void 0===e&&(e={});var n=e.isExtended;e.showMiniMap;if(!n){this.drawStore=new v,this.getters=new gt(this.drawStore),this.actions=new Vo(this.drawStore,this.getters),this.actions.UPDATE_CANVAS(t),this.actions.UPDATE_SETTING(e),this._initialize();var r=new No({draw:this});this.actions.UPDATE_INTERACTION(r)}}return t.prototype._initialize=function(){var t=document.createElement("canvas");t.width=1e3,t.height=1e3,this.actions.UPDATE_TMP_CANVAS(t),this.actions.INTIALIZE_DRAW_ROOT_ID();var e=new si(this.getters);this.actions.UPDATE_TEST_UTILS(e),this.sharedGetters=new ii,this.sharedActions=new Qo(this.drawStore,this.getters),this.actions.UPDATE_DRAW(this);var n=new Uo({draw:this});this.actions.UPDATE_VIEWPORT(n);var r=new Wo({draw:this});this.actions.UPDATE_RENDERER(r);var o=new Do({draw:this});this.actions.UPDATE_SELECTOR(o);var i=this.drawStore.setting.showMiniMap,a=new li({draw:this,shouldRender:i});this.actions.UPDATE_MINIMAP(a);var s=new zo({draw:this,canvas:this.getters.canvas});this.actions.UPDATE_GRID(s),ht(this.drawStore.textInput)&&ht(this.drawStore.textInput.input)&&this.drawStore.textInput.input.remove();var u=new hi({draw:this});this.actions.UPDATE_TEXT_INPUT(u),this.actions.MODIFY_ACTIVE_PANEL_ID(this.getters.storeActivePanelId),this.actions.APPEND_TEXT_INPUT_TO_DOCUMENT_BODY()},t.prototype.render=function(){var t=this.getters,e=t.renderer,n=t.miniMap,r=n.shouldRender;e.clear(),r&&(n.renderMainCells(),n.saveImageDataInRigion(),e.clear()),this.renderBackground(),e.setTransformViewPort(),this.renderMain(),r&&(this.getters.renderer.resetTransform(),this.getters.miniMap.render())},t.prototype.renderBackground=function(){},t.prototype.renderMain=function(){var t=this.getters.miniMap.renderingMainCells,e=this.sharedActions.renderElement;this.getters.cellListShouldRender.map(function(n){return e(n,t)}),this.getters.selector.render()},t.prototype.addElement=function(t,e,n){return this.actions.ADD_ELEMENT(this,t,e,n)},t.prototype.removeElement=function(t){this.actions.REMOVE_ELEMENT(t)},t.prototype.attachDrawToElement=function(t){},t.prototype.importData=function(t){var e=this,n=JSON.parse(t),r=n.rootId,o=n.elements;this.actions.UPDATE_DRAW_ROOT_ID(r),o.map(function(t){var n=t.data;return e.actions.ADD_ELEMENT(e,n.type,n,"")}),this.render()},t.prototype.exportData=function(t){void 0===t&&(t=wo()),this.actions.REFRESH_SYNC_STORE_ROOT_ID(),this.actions.REFRESH_SYNC_STORE_ELEMENTS();var e=this.drawStore.syncStore,n=JSON.stringify(e);To(n,t+".json")},t}(),gi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yi=function(t){function e(e){var n=t.call(this,function(t){return t.src=Or.FILE_XLSX,t}(e))||this;return n.type=vt,n.renderFnInMiniMap=function(){var t=n.getters.ctx;t.fillStyle="#00c3c3",n.path2d&&t.fill(n.path2d)},n}return gi(e,t),e}(nn),vi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bi=function(t){function e(e){return t.call(this,e)||this}return vi(e,t),e.prototype.mousedownListener=function(t){var e=this.draw,n=e.getters,r=e.actions,o=n.getInitialPoint(t);if(this.eventKeyboard.isSpacePressing||jo(t))return n.viewPort.startPan(t),i();if(n.pointOnEmpty(o))return r.DESELECT_ALL_CELLS(),this.interfaceOnEmptyClick&&this.interfaceOnEmptyClick(t),this.startSelect(t),i();if(n.pointOnDeselectedDsElement(o))return r.DESELECT_ALL_CELLS(),r.SELECT_TOP_DS_ELEMENT(o),r.START_DRAG_SELECTED_DS_ELEMENTS(t),i();if(n.pointOnSelectedDsElement(o))return r.START_DRAG_SELECTED_DS_ELEMENTS(t),i();function i(){n.draw.render()}},e.prototype.mousemoveListener=function(t){var e=this.draw,n=e.getters,r=e.actions;!n.viewPort.shouldPan&&n.selector.shouldSelect&&this.selecting(t),n.viewPort.shouldPan&&n.viewPort.panning(t),r.DRAGGING_SELECTED_DS_ELEMENTS_DRAGGER_ENABLED(t),r.HOVER_TOP_DS_ELEMENT(t,this),n.draw.render()},e.prototype.mouseupListener=function(t){var e=this.draw,n=e.getters,r=e.actions;n.selector.shouldSelect=!1,this.stopSelect(t),r.STOP_DRAG_SELECTED_dS_ELEMENTS_DRAGGER_ENABLED(t),n.viewPort.stopPan(),n.draw.render()},e.prototype.clickListener=function(t){this.draw.actions.CLICK_TOP_DS_ELEMENT(t)},e.prototype.dblclickListener=function(t){this.draw.actions.DOUBLE_CLICK_TOP_DS_ELEMENT(t)},e.prototype.stopSelect=function(t){var e=this.draw,n=e.getters,r=e.actions;r.SELECT_NODES_IN_SELECTOR_REGION(),r.SELECT_LINKS_IN_SELECTOR_REGION(),r.SELECT_OPERATIONS_IN_SELECTOR_REGION(),n.selector.startPoint=null,n.selector.endPoint=null},e}(No),mi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_i=Math.abs,Pi=function(t){function e(e,n){var r=t.call(this,e)||this;return r.type=Ot,r.flows=[],r.flows=n,r}return mi(e,t),Object.defineProperty(e.prototype,"dsElements",{get:function(){var t=[];return this.flows.map(function(e){var n=e.dsElements;t=t.concat(n)}),t=Y()(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return fr(this.flows.map(function(t){return t.bounds}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsPath",{get:function(){return hr(this.bounds)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftTop",{get:function(){var t=this.bounds;return{x:t.left,y:t.top}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){var t=this.bounds;return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){var t=this.bounds,e=t.left,n=t.right;return _i(n-e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){var t=this.bounds,e=t.top,n=t.bottom;return _i(n-e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFormatterHorizontal",{get:function(){return this.drawStore.formatter.isHorizontal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFormatterVertical",{get:function(){return this.drawStore.formatter.isVertical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalResultNode",{get:function(){var t=null;try{t=this.flows.filter(function(t){var e=t.resultFlow;return g()(e)})[0].result}catch(t){}return t},enumerable:!0,configurable:!0}),e.prototype.contain=function(){},e.prototype.render=function(){var t=this.getters.ctx,e=this.boundsPath;t.strokeStyle="red",t.stroke(e)},e.prototype.translateLeftTopToPoint=function(t){var e=t.x,n=t.y,r=this.bounds,o=e-r.left,i=n-r.top;this.dsElements.map(function(t){return t&&t.translate(o,i)})},e.prototype.translate=function(t,e){this.dsElements.map(function(n){return n&&n.translate(t,e)})},e}(Xt),Oi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ei=function(t){function e(e,n){return t.call(this,e,n)||this}return Oi(e,t),e}(_r),Si=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ti=function(t){function e(e,n){return t.call(this,e,n)||this}return Si(e,t),e.prototype.format=function(){this.formatSortedData(),this.formatOperationLink(),this.formatOperation(),this.formatResult()},e.prototype.formatSortedData=function(){var t=this.drawStore.formatter,e=this.mostTopDataElement,n=this.sortedData,r=_r.DATA_ELEMENT_INTERVAL,o=0,i={x:0,y:0};e&&(i=e.itemCenter),n.map(function(n,a,s){var u=i.x,c=i.y,p={x:u,y:c};if(n!==e){var l=Ft(s,a),f=l?l.height/2:0,h=n.height/2;if(n.isDataNode&&(o=o+r+f+h,p.y=p.y+o,n.translateCenterToPoint(p)),n.isResultNode){var d=Ft(s,a);if(d){var g=t.getResultNodeVerticalDistanceToUpperNode(n,d,s);o=o+g+f+h,p.y=p.y+o;var y=p.x-n.itemCenter.x,v=p.y-n.itemCenter.y,b=t.getFlowByResult(n);b&&b.translate(y,v)}}}})},e}(_r),wi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Li=Math.min,xi=Math.max,Ci=function(t){function e(e){var n=t.call(this,e)||this;return n.direction=Et[P],n}return wi(e,t),Object.defineProperty(e.prototype,"flows",{get:function(){var t=this;return this.getters.operationsList.map(function(e){return new _r({draw:t.draw},e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flowsWithOnlyDataNodesInData",{get:function(){var t=this;return this.getters.operationsList.filter(function(t){return t.nodes.every(function(t){return t.isDataNode})}).map(function(e){return new Ei({draw:t.draw},e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flowsWithResultNodeInData",{get:function(){var t=this;return this.getters.operationsList.filter(function(t){return t.nodes.some(function(t){return t.isResultNode})}).map(function(e){return new Ti({draw:t.draw},e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"chains",{get:function(){var t=this,e=[],n=this.flowsWithOnlyDataNodesInData,r=this.flowsWithResultNodeInData;return n.map(function(n){if(o(e,n))return;var i=n.result,a=t.flowsWithResultNodeInDataHasDataElement(i);if(!a){var s=[n],u=new Pi({draw:t.draw},s);e.push(u)}if(a){var s=function(n){var i=[n];n.data;return function n(a){var s=r.filter(function(t){var e=t.data;return e.includes(a)})[0];if(s&&!o(e,s)){i.push(s);var u=s.data,c=s.result;!function n(r){r.filter(function(t){return t.isResultNode}).map(function(e){return t.getFlowByResult(e)}).filter(function(t){return!o(e,t)}).map(function(t){i.push(t);var e=t.data;n(e)})}(u),n(c)}}(n.result),i=X()(i,dr)}(n),u=new Pi({draw:t.draw},s);e.push(u)}}),e;function o(t,e){return t.some(function(t){return t.flows.some(function(t){return dr(t,e)})})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortedChains",{get:function(){var t=this;return this.chains.slice().sort(function(e,n){var r=e.bounds.top,o=n.bounds.top,i=e.bounds.left,a=n.bounds.left;if(t.isVertical)return r-o;if(t.isHorizontal)return i-a})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstSortedChain",{get:function(){return Ht(this.sortedChains)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastSortedChain",{get:function(){return zt(this.sortedChains)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleNodes",{get:function(){return this.getters.dataNodeList.filter(function(t){var e=t.operation;return g()(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortedSingleNodes",{get:function(){var t=this;return this.singleNodes.slice().sort(function(e,n){var r=e.bounds.top,o=n.bounds.top,i=e.bounds.left,a=n.bounds.left;if(t.isVertical)return r-o;if(t.isHorizontal)return i-a})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstSortedSingleNode",{get:function(){return Ht(this.sortedSingleNodes)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){var t=this.sortedSingleNodes,e=this.sortedChains;return fr([lr(t),lr(e)])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHorizontal",{get:function(){return this.direction===Et[P]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVertical",{get:function(){return this.direction===Et.vertical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finalResultNode",{get:function(){var t=null;try{t=this.sortedChains[0].finalResultNode}catch(t){}return this.removeFlowsChains(),t},enumerable:!0,configurable:!0}),e.prototype.getFollowingFlowsByResultNode=function(t){var e=this,n=[];try{return function t(r){var o=e.flows.filter(function(t){var e=t.result;return e===r})[0].resultFlow;o&&(n.push(o),o.result&&t(o.result))}(t),this.removeFlowsChains(),n}catch(t){}return[]},e.prototype.flowsWithResultNodeInDataHasDataElement=function(t){return this.flowsWithResultNodeInData.some(function(e){return e.data.includes(t)})},e.prototype.getFlowByResult=function(t){return this.flows.filter(function(e){return e.result===t})[0]},e.prototype.getBoundsOfFlowByResult=function(t){var e=this,n=[];!function t(r){var o=e.getFlowByResult(r);n.push(o);o.data.map(function(e){e.isResultNode&&t(e)})}(t);var r=n.map(function(t){return t.bounds});return{left:Li.apply(void 0,r.map(function(t){return t.left})),right:xi.apply(void 0,r.map(function(t){return t.right})),top:Li.apply(void 0,r.map(function(t){return t.top})),bottom:xi.apply(void 0,r.map(function(t){return t.bottom}))}},e.prototype.getResultNodeVerticalDistanceToUpperNode=function(t,e,n){var r=this,o=_r.DATA_ELEMENT_INTERVAL,i=function(e,n){var r=null,o=Bt(n,t);return ht(o)&&n.map(function(t,e){e<o&&t.isResultNode&&(r=t)}),r}(0,n);if(i){var a=e.itemCenter.y,s=function(t){return fr(t.map(function(t){return t.isResultNode?r.getBoundsOfFlowByResult(t):t.bounds}))}(e===i?[e]:[e,i]).bottom,u=t.itemCenter.y,c=this.getBoundsOfFlowByResult(t).top;return s-a-e.height/2+(u-c-t.height/2)+o}return o},e.prototype.removeFlowsChains=function(){var t=this.actions;t.REMOVE_ALL_FLOWS(),t.REMOVE_ALL_CHAINS()},e.prototype.format=function(){this.actions.DESELECT_ALL_CELLS(),this.foramtFlowsWithOnlyDataNodesInData(),this.formatFlowsWithResultNodeInData(),this.formatSortedChainsPosition(),this.formatSingleNodesPosition(),this.removeFlowsChains()},e.prototype.foramtFlowsWithOnlyDataNodesInData=function(){this.flowsWithOnlyDataNodesInData.map(function(t){return t.format()})},e.prototype.formatFlowsWithResultNodeInData=function(){this.flowsWithResultNodeInData.map(function(t){return t.format()})},e.prototype.formatSortedChainsPosition=function(){var t=this.sortedChains,n=this.firstSortedChain,r=e.CHAINS_INTERVAL,o=this.isVertical,i=this.isHorizontal,a=0,s=0,u={x:0,y:0};n&&(u=n.leftTop),t.map(function(t,e,n){if(It(e)){var c=Ft(n,e),p=c?c.width:0,l=c?c.height:0;s=s+r+p,a=a+r+l;var f=u.x,h=u.y,d=u;o&&(d={x:f,y:h+a}),i&&(d={x:f+s,y:h}),t.translateLeftTopToPoint(d)}})},e.prototype.formatSingleNodesPosition=function(){var t=this.isVertical,n=this.isHorizontal,r=this.sortedSingleNodes,o=this.lastSortedChain,i=this.firstSortedSingleNode,a=e.SINGLE_NODES_INTERVAL,s={x:0,y:0},u=0,c=0;if(o&&i){var p=o.bounds,l=p.left,f=p.bottom,h=p.right,d=p.top,g=i.width,y=i.height;t&&(s={x:l+g/2,y:f+y/2}),n&&(s={x:h+g/2,y:d+y/2})}!o&&i&&(s=i.itemCenter),r.map(function(e,r,i){if(jt(r)&&o){var p=e.width/2,l=e.height/2;u=u+a+p,c=c+a+l}if(It(r)){var f=Ft(i,r),h=f?f.width/2:0,d=f?f.height/2:0,p=e.width/2,l=e.height/2;u=u+a+h+p,c=c+a+d+l}var g=s.x,y=s.y,v=s;t&&(v={x:g,y:y+c});n&&(v={x:g+u,y:y});e.translateCenterToPoint(v)})},e.prototype.justifyLeftTopPosition=function(){var t=this.bounds,e=t.left,n=t.top,r=this.sortedSingleNodes,o=this.sortedChains;r.map(function(t){return t.translate(-e,-n)}),o.map(function(t){return t.translate(-e,-n)})},e.prototype.updateDirectionHorizontal=function(){this.direction=Et[P]},e.prototype.updateDirectionVertical=function(){this.direction=Et.vertical},e.prototype.formatHorizontal=function(){this.updateDirectionHorizontal(),this.format()},e.prototype.formatVertical=function(){this.updateDirectionVertical(),this.format()},e.prototype.centerLayout=function(){this.justifyLeftTopPosition(),this.getters.viewPort.centerLayout(this.bounds),this.removeFlowsChains()},e.prototype.centerViewport=function(){this.getters.viewPort.centerLayout(this.bounds)},e.CHAINS_INTERVAL=100,e.SINGLE_NODES_INTERVAL=100,e}(At),Di=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ai=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ji=function(t){function e(e,n){var r=this;n=Ai({},n,{isExtended:!0}),(r=t.call(this,e,n)||this).drawStore=new m(r),r.store=r.drawStore,r.getters=new so(r.store),r.actions=new So(r.store,r.getters);try{n&&(r.actions.UPDATE_SETTING(n),q()(n.imageUrls,function(t,e){return Or[e]=t}))}catch(t){console.log(t)}r.actions.UPDATE_CANVAS(e),r._initialize();var o=new bi({draw:r});r.actions.UPDATE_INTERACTION(o),r.getters.miniMap.disableRender(),r.getters.miniMap.enablePreventDefaultCellsRenderInMiniMap();var i=new Ci({draw:r});return r.actions.UPDATE_FORMATTER(i),r}return Di(e,t),e.prototype.createDataNode=function(t){void 0===t&&(t={});var e=new yi(Ai({},t,{draw:this}));return e.exportable=!0,e},e.prototype.createResultNode=function(t){void 0===t&&(t={});var e=new wr(Ai({},t,{draw:this}));return e.exportable=!0,e},e.prototype.createResultNodeByOperation=function(t,e){void 0===e&&(e={});var n=t.regenerateResultNode(e);return n&&(n.exportable=!0),n},e.prototype.createOperation=function(t){void 0===t&&(t={});var e=t.nodes,n=void 0===e?[]:e,r=t.operationType,o=new(0,this.getters.operationTypesMap[r])(Ai({},t,{draw:this,nodes:n}));return o&&(o.exportable=!0),o},e.prototype.importData=function(t){var e=this;this.actions.RESET(),this.render();var n=JSON.parse(t),r=n.rootId,o=n.dataNodes,i=n.operations,a=n.resultNodes,s=n.zoom,u=n.center;ht(r)&&ht(o)&&ht(i)&&ht(a)&&(this.actions.UPDATE_DRAW_ROOT_ID(r),o.map(function(t){return e.createDataNode(t)}),a.map(function(t){return e.createResultNode(t)}),i.map(function(t){void 0===t&&(t={});var n=t.nodesIds,r=(void 0===n?[]:n).map(function(t){try{return e.getters.nodesList.filter(function(e){return e.id===t})[0]}catch(t){return null}}).filter(ht);e.createOperation(Ai({},t,{nodes:r}))}),a.map(function(t){var n=t.operationId,r=t.id,o=e.getters.operationsList.filter(function(t){return t.id===n})[0],i=e.getters.resultNodeList.filter(function(t){return t.id===r})[0];ht(o)&&ht(i)&&o.connectToResultNode(i)}),ht(s)&&ht(u)&&this.store.viewPort.update(s,u),this.render())},e.prototype.getExportingData=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.getters).getExportingData.apply(t,e)},e.prototype.exportData=function(t){void 0===t&&(t=wo());var e=this.getExportingData(),n=JSON.stringify(e);To(n,t+".json")},e}(di);e.default=ji},function(t,e,n){var r=n(63),o=n(23),i=n(62),a=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:i(n);return u<0&&(u=a(s+u,0)),r(t,o(e,3),u)}},function(t,e,n){var r=n(23),o=n(7),i=n(5);t.exports=function(t){return function(e,n,a){var s=Object(e);if(!o(e)){var u=r(n,3);e=i(e),n=function(t){return u(s[t],t,s)}}var c=t(e,n,a);return c>-1?s[u?e[c]:c]:void 0}}},function(t,e,n){var r=n(3),o=n(0),i="[object Date]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(50);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(91),o=n(90),i=n(22),a=n(11);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e,n){var r=n(49),o=n(77),i=n(1),a=n(76),s=n(34),u=n(11);t.exports=function(t,e,n){for(var c=-1,p=(e=r(e,t)).length,l=!1;++c<p;){var f=u(e[c]);if(!(l=null!=t&&n(t,f)))break;t=t[f]}return l||++c!=p?l:!!(p=null==t?0:t.length)&&s(p)&&a(f,p)&&(i(t)||o(t))}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(94),o=n(93);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e,n){var r=n(9),o=n(12),i=n(1),a=n(13),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e,n){var r=n(96);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(38),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(98),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n(99)(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=i},function(t,e,n){var r=n(50);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(54),o=n(101),i=n(95),a=n(22),s=n(52),u=n(51),c=n(11),p=1,l=2;t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,p|l)}}},function(t,e,n){var r=n(52),o=n(5);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(69),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,s,u){var c=n&o,p=r(t),l=p.length;if(l!=r(e).length&&!c)return!1;for(var f=l;f--;){var h=p[f];if(!(c?h in e:i.call(e,h)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var g=!0;u.set(t,e),u.set(e,t);for(var y=c;++f<l;){var v=t[h=p[f]],b=e[h];if(a)var m=c?a(b,v,h,e,t,u):a(v,b,h,t,e,u);if(!(void 0===m?v===b||s(v,b,n,a,u):m)){g=!1;break}y||(y="constructor"==h)}if(g&&!y){var _=t.constructor,P=e.constructor;_!=P&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof P&&P instanceof P)&&(g=!1)}return u.delete(t),u.delete(e),g}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){var r=n(9),o=n(66),i=n(40),a=n(53),s=n(105),u=n(25),c=1,p=2,l="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Map]",g="[object Number]",y="[object RegExp]",v="[object Set]",b="[object String]",m="[object Symbol]",_="[object ArrayBuffer]",P="[object DataView]",O=r?r.prototype:void 0,E=O?O.valueOf:void 0;t.exports=function(t,e,n,r,O,S,T){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!S(new o(t),new o(e)));case l:case f:case g:return i(+t,+e);case h:return t.name==e.name&&t.message==e.message;case y:case b:return t==e+"";case d:var w=s;case v:var L=r&c;if(w||(w=u),t.size!=e.size&&!L)return!1;var x=T.get(t);if(x)return x==e;r|=p,T.set(t,e);var C=a(w(t),w(e),r,O,S,T);return T.delete(t),C;case m:if(E)return E.call(t)==E.call(e)}return!1}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(41),o=n(53),i=n(106),a=n(104),s=n(14),u=n(1),c=n(36),p=n(75),l=1,f="[object Arguments]",h="[object Array]",d="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,y,v,b){var m=u(t),_=u(e),P=m?h:s(t),O=_?h:s(e),E=(P=P==f?d:P)==d,S=(O=O==f?d:O)==d,T=P==O;if(T&&c(t)){if(!c(e))return!1;m=!0,E=!1}if(T&&!E)return b||(b=new r),m||p(t)?o(t,e,n,y,v,b):i(t,e,P,n,y,v,b);if(!(n&l)){var w=E&&g.call(t,"__wrapped__"),L=S&&g.call(e,"__wrapped__");if(w||L){var x=w?t.value():t,C=L?e.value():e;return b||(b=new r),v(x,C,n,y,b)}}return!!T&&(b||(b=new r),a(t,e,n,y,v,b))}},function(t,e,n){var r=n(41),o=n(54),i=1,a=2;t.exports=function(t,e,n,s){var u=n.length,c=u,p=!s;if(null==t)return!c;for(t=Object(t);u--;){var l=n[u];if(p&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++u<c;){var f=(l=n[u])[0],h=t[f],d=l[1];if(p&&l[2]){if(void 0===h&&!(f in t))return!1}else{var g=new r;if(s)var y=s(h,d,f,t,e,g);if(!(void 0===y?o(d,h,i|a,s,g):y))return!1}}return!0}},function(t,e,n){var r=n(109),o=n(103),i=n(51);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}}},function(t,e,n){var r=n(111)();t.exports=r},function(t,e,n){var r=n(112),o=n(5);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(7),o=n(0);t.exports=function(t){return o(t)&&r(t)}},function(t,e,n){var r=n(114);t.exports=function(t){return r(t)?t:[]}},function(t,e){var n=800,r=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var a=o(),s=r-(a-i);if(i=a,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,n){var r=n(117),o=n(79),i=n(24),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e,n){var r=n(118),o=n(116)(r);t.exports=o},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(120),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,s=o(i.length-e,0),u=Array(s);++a<s;)u[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(u),r(t,this,c)}}},function(t,e,n){var r=n(24),o=n(121),i=n(119);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e,n){var r=n(27),o=n(59),i=n(58),a=n(12),s=n(8),u=n(26),c=Math.min;t.exports=function(t,e,n){for(var p=n?i:o,l=t[0].length,f=t.length,h=f,d=Array(f),g=1/0,y=[];h--;){var v=t[h];h&&e&&(v=a(v,s(e))),g=c(v.length,g),d[h]=!n&&(e||l>=120&&v.length>=120)?new r(h&&v):void 0}v=t[0];var b=-1,m=d[0];t:for(;++b<l&&y.length<g;){var _=v[b],P=e?e(_):_;if(_=n||0!==_?_:0,!(m?u(m,P):p(y,P,n))){for(h=f;--h;){var O=d[h];if(!(O?u(O,P):p(t[h],P,n)))continue t}m&&m.push(P),y.push(_)}}return y}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(67),o=n(124),i=n(25),a=r&&1/i(new r([,-0]))[1]==1/0?function(t){return new r(t)}:o;t.exports=a},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e,n){var r=n(12);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){var r=n(4),o=n(13),i=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=u.test(t);return n||c.test(t)?p(t.slice(2),n?2:8):s.test(t)?i:+t}},function(t,e,n){var r=n(129),o=1/0,i=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===o||t===-o?(t<0?-1:1)*i:t==t?t:0:0===t?t:0}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e,n){var r=n(14),o=n(0),i="[object Set]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(133),o=n(8),i=n(15),a=i&&i.isSet,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(14),o=n(0),i="[object Map]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(135),o=n(8),i=n(15),a=i&&i.isMap,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(4),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(137),o=n(31),i=n(33);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(30);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(9),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(30);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e,n){var r=n(30),o=n(142),i=n(141),a=n(140),s=n(139),u="[object Boolean]",c="[object Date]",p="[object Map]",l="[object Number]",f="[object RegExp]",h="[object Set]",d="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",b="[object Float32Array]",m="[object Float64Array]",_="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",w="[object Uint32Array]";t.exports=function(t,e,n){var L=t.constructor;switch(e){case y:return r(t);case u:case c:return new L(+t);case v:return o(t,n);case b:case m:case _:case P:case O:case E:case S:case T:case w:return s(t,n);case p:return new L;case l:case d:return new L(t);case f:return i(t);case h:return new L;case g:return a(t)}}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(6)(n(2),"WeakMap");t.exports=r},function(t,e,n){var r=n(6)(n(2),"Promise");t.exports=r},function(t,e,n){var r=n(6)(n(2),"DataView");t.exports=r},function(t,e,n){var r=n(68),o=n(71),i=n(73);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(16),o=n(71);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e,n){var r=n(16),o=n(32);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){(function(t){var r=n(2),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(35)(t))},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var r=n(4),o=n(33),i=n(154),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},function(t,e,n){var r=n(16),o=n(73);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(74)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(33),o=n(157),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(3),o=n(34),i=n(0),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(3),o=n(0),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(16),o=n(5);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(17);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e,n){var r=n(17);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(17);t.exports=function(t){return r(this,t).get(t)}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(17);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e,n){var r=n(18),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e,n){var r=n(18),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(18),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(18);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(174),o=n(173),i=n(172),a=n(171),s=n(170);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=o,u.prototype.get=i,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(175),o=n(20),i=n(39);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(2)["__core-js_shared__"];t.exports=r},function(t,e,n){var r=n(178),o=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!o&&o in t}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(9),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(83),o=n(179),i=n(4),a=n(81),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,p=u.toString,l=c.hasOwnProperty,f=RegExp("^"+p.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?f:s).test(a(t))}},function(t,e,n){var r=n(20),o=n(39),i=n(38),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(t,e),this.size=n.size,this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e,n){var r=n(20);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e,n){var r=n(19);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(19);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(19);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(19),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(41),o=n(164),i=n(80),a=n(163),s=n(156),u=n(153),c=n(152),p=n(151),l=n(149),f=n(69),h=n(148),d=n(14),g=n(144),y=n(143),v=n(138),b=n(1),m=n(36),_=n(136),P=n(4),O=n(134),E=n(5),S=1,T=2,w=4,L="[object Arguments]",x="[object Function]",C="[object GeneratorFunction]",D="[object Object]",A={};A[L]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[D]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[x]=A["[object WeakMap]"]=!1,t.exports=function t(e,n,j,I,N,R){var M,k=n&S,U=n&T,B=n&w;if(j&&(M=N?j(e,I,N,R):j(e)),void 0!==M)return M;if(!P(e))return e;var H=b(e);if(H){if(M=g(e),!k)return c(e,M)}else{var z=d(e),F=z==x||z==C;if(m(e))return u(e,k);if(z==D||z==L||F&&!N){if(M=U||F?{}:v(e),!k)return U?l(e,s(M,e)):p(e,a(M,e))}else{if(!A[z])return N?e:{};M=y(e,z,k)}}R||(R=new r);var W=R.get(e);if(W)return W;if(R.set(e,M),O(e))return e.forEach(function(r){M.add(t(r,n,j,r,e,R))}),M;if(_(e))return e.forEach(function(r,o){M.set(o,t(r,n,j,o,e,R))}),M;var G=B?U?h:f:U?keysIn:E,V=H?void 0:G(e);return o(V||e,function(r,o){V&&(r=e[o=r]),i(M,o,t(r,n,j,o,e,R))}),M}}]);
//# sourceMappingURL=ds.js.map